{
  "content": "# Set up a subscription with Cash App Pay\n\n## Learn how to create and charge for a subscription with Cash App Pay.\n\nUse this guide to set up a\n[subscription](https://docs.stripe.com/billing/subscriptions/creating) using\n[Cash App Pay](https://docs.stripe.com/payments/cash-app-pay) as a payment\nmethod.\n\nSetup Intents APISubscriptions APIStripe-hosted page\nCreate and confirm a subscription using two API calls. The [first API\ncall](https://docs.stripe.com/billing/subscriptions/cash-app-pay#create-setup-intent)\nuses the [Setup Intents API](https://docs.stripe.com/api/setup_intents) to set\nCash App Pay as a payment method. The [second API\ncall](https://docs.stripe.com/billing/subscriptions/cash-app-pay#create-subscription)\nsends customer, product, and payment method information to the [Subscriptions\nAPI](https://docs.stripe.com/api/subscriptions) to create a Subscription and\nconfirm a payment in one call.\n\n[Create a product and\npriceDashboard](https://docs.stripe.com/billing/subscriptions/cash-app-pay#create-product-plan-code)\n[Products](https://docs.stripe.com/api/products) represent the item or service\nyou’re selling. [Prices](https://docs.stripe.com/api/prices) define how much and\nhow frequently you charge for a product. This includes how much the product\ncosts, what currency you accept, and whether it’s a one-time or recurring\ncharge. If you only have a few products and prices, create and manage them in\nthe Dashboard.\n\nThis guide uses a stock photo service as an example and charges customers a 15\nUSD monthly subscription. To model this:\n\n- Navigate to the [Add a\nproduct](https://dashboard.stripe.com/test/products/create) page.\n- Enter a **Name** for the product.\n- Enter **15** for the price.\n- Select **USD** as the currency.\n- Click **Save product**.\n\nAfter you create the product and the price, record the price ID so you can use\nit in subsequent steps. The pricing page displays the ID and it looks similar to\nthis: `price_G0FvDp6vZvdwRZ`.\n\n[Create a\nSetupIntentServer-side](https://docs.stripe.com/billing/subscriptions/cash-app-pay#create-setup-intent)\nCreate a [SetupIntent](https://docs.stripe.com/api/setup_intents) to save a\ncustomer’s payment method for future payments. The `SetupIntent` tracks the\nsteps of this setup process.\n\n```\ncurl https://api.stripe.com/v1/setup_intents \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d confirm=true \\\n --data-urlencode return_url=\"https://www.stripe.com\" \\\n -d usage=off_session \\\n -d \"payment_method_data[type]\"=cashapp \\\n -d \"payment_method_types[]\"=cashapp \\\n -d \"mandate_data[customer_acceptance][type]\"=online \\\n -d \"mandate_data[customer_acceptance][online][ip_address]\"=\"127.0.0.0\" \\\n -d \"mandate_data[customer_acceptance][online][user_agent]\"=device\n```\n\nThe returned SetupIntent includes a [client\nsecret](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-client_secret),\nwhich the client side uses to securely complete the setup instead of passing the\nentire SetupIntent object. You can use different approaches to [pass the client\nsecret to the client\nside](https://docs.stripe.com/payments/payment-intents#passing-to-client). The\nSetupIntent response also includes a payment method ID that you need to use in\nthe next step to confirm a PaymentIntent.\n\nThe SetupIntent response includes the status `requires_action`, which means your\nusers must perform another action to complete the SetupIntent. Use the\n`next_action.cashapp_handle_redirect_or_display_qr_code` object from the\nSetupIntent response to redirect your users to a Stripe hosted page that\ndisplays the QR code, or render the QR code directly.\n\nTo authenticate users, follow the instructions to [confirm SetupIntent and save\na payment\nmethod](https://docs.stripe.com/payments/cash-app-pay/set-up-payment?platform=web&ui=direct-api#web-create-setup-intent).\nAfter they authenticate, the Cash App mobile application redirects users to the\n`return_url` on their mobile device, and the SetupIntent moves to a `succeeded`\nstate.\n\n[Create a\nsubscriptionServer-side](https://docs.stripe.com/billing/subscriptions/cash-app-pay#create-subscription)\nCreate a subscription that has a price and customer. Set the value of the\n`default_payment_method` parameter to the PaymentMethod ID from the SetupIntent\nresponse.\n\n```\ncurl https://api.stripe.com/v1/subscriptions \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d \"items[0][price]\"={{PRICE_ID}} \\\n -d default_payment_method={{PAYMENT_METHOD_ID}}\n```\n\nIncluded in the response is the subscription’s first\n[PaymentIntent](https://docs.stripe.com/payments/payment-intents), containing\nthe [client\nsecret](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-client_secret),\nwhich you use on the client side to securely complete the payment process\ninstead of passing the entire PaymentIntent object. Return the `client_secret`\nto the frontend to complete payment.\n\n#### Note\n\nTo create a\n[subscription](https://docs.stripe.com/billing/subscriptions/creating) with a\nfree trial period, see [Subscription\ntrials](https://docs.stripe.com/billing/subscriptions/cash-app-pay#trial-periods).\n\n## Links\n\n- [subscription](https://docs.stripe.com/billing/subscriptions/creating)\n- [Cash App Pay](https://docs.stripe.com/payments/cash-app-pay)\n- [first API\ncall](https://docs.stripe.com/billing/subscriptions/cash-app-pay#create-setup-intent)\n- [Setup Intents API](https://docs.stripe.com/api/setup_intents)\n- [second API\ncall](https://docs.stripe.com/billing/subscriptions/cash-app-pay#create-subscription)\n- [Subscriptions API](https://docs.stripe.com/api/subscriptions)\n- [Products](https://docs.stripe.com/api/products)\n- [Prices](https://docs.stripe.com/api/prices)\n- [Add a product](https://dashboard.stripe.com/test/products/create)\n- [https://www.stripe.com](https://www.stripe.com)\n- [client\nsecret](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-client_secret)\n- [pass the client secret to the client\nside](https://docs.stripe.com/payments/payment-intents#passing-to-client)\n- [confirm SetupIntent and save a payment\nmethod](https://docs.stripe.com/payments/cash-app-pay/set-up-payment?platform=web&ui=direct-api#web-create-setup-intent)\n- [PaymentIntent](https://docs.stripe.com/payments/payment-intents)",
  "metadata": {
    "title": "Set up a subscription with Cash App Pay | Stripe Documentation",
    "description": "Learn how to create and charge for a subscription with Cash App Pay.",
    "sourceURL": "https://docs.stripe.com/billing/subscriptions/cash-app-pay"
  }
}