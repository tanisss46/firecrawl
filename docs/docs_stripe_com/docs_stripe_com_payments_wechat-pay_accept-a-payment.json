{
  "content": "# Accept a WeChat Pay payment\n\n## Use the Payment Intents and Payment Methods APIs to accept WeChat Pay, a digital wallet popular with customers from China.\n\nStripe-hosted pageDirect API\n#### Caution\n\nStripe automatically presents your customers payment method options by\nevaluating their currency, payment method restrictions, and other parameters. We\nrecommend that you configure your payment methods from the Stripe Dashboard\nusing the instructions in [Accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?platform=web&ui=stripe-hosted).\n\nIf you want to continue manually configuring the payment methods you present to\nyour customers with Checkout, use this guide. Otherwise, update your integration\nto [configure payment methods in the\nDashboard](https://docs.stripe.com/payments/dashboard-payment-methods).\n\nWeChat Pay is a\n[single-use](https://docs.stripe.com/payments/payment-methods#usage) payment\nmethod. Customers pay with WeChat Pay by scanning the QR code that they see\nduring Checkout. Completing the payment redirects customers back to your\nwebsite.\n\n[Determine\ncompatibility](https://docs.stripe.com/payments/wechat-pay/accept-a-payment#compatibility)\nA Checkout Session must satisfy all of the following conditions to support\nWeChat Pay payments:\n\n- [Prices](https://docs.stripe.com/api/prices) for all line items must be in the\nsame currency. If you have line items in different currencies, create separate\nCheckout Sessions for each currency.\n- You can only use one-time line items (WeChat Pay Checkout Sessions donâ€™t\nsupport recurring\n[subscription](https://docs.stripe.com/billing/subscriptions/creating) plans).\n[Accept a\npayment](https://docs.stripe.com/payments/wechat-pay/accept-a-payment#accept-a-payment)\n#### Note\n\nThis guide builds on the foundational [accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?integration=checkout)\nCheckout integration.\n\nThis guides you through enabling WeChat Pay and shows the differences between\naccepting a card payment and using WeChat Pay.\n\n### Enable WeChat Pay as a payment method\n\nWhen creating a new [Checkout\nSession](https://docs.stripe.com/api/checkout/sessions), you need to:\n\n- Add `wechat_pay` to the list of `payment_method_types`\n- Pass the `client` as `'web'` in the `payment_method_options.wechat_pay` hash\n- Make sure all your `line_items` use the same currency\n\n```\nStripe.api_key = 'sk_test_BQokikJOvBiI2HlWgH4olfQ2'\n\nStripe::Checkout::Session.create({\n mode: 'payment',\n payment_method_types: ['card'],\n payment_method_types: ['wechat_pay'],\n\n # or you can take multiple payment methods with\n # payment_method_types: ['card', 'wechat_pay', ...]\n\n# Specify the client (currently, Checkout only supports a client value of \"web\")\n payment_method_options: {\n wechat_pay: {\n client: 'web',\n },\n },\n line_items: [{\n price_data: {\n currency: 'usd',\n product_data: {\n name: 'T-shirt',\n },\n unit_amount: 2000,\n },\n quantity: 1,\n }],\n success_url: 'https://example.com/success',\n cancel_url: 'https://example.com/cancel',\n})\n```\n\n### Fulfill your orders\n\nAfter accepting a payment, learn how to [fulfill\norders](https://docs.stripe.com/checkout/fulfillment).\n\n## Test your integration\n\nWhen testing your Checkout integration, select WeChat Pay as the payment method\nand click the **Pay** button, which renders a QR code.\n\nScanning the QR code while testing routes you to a Stripe hosted page, which\nallows you to simulate authorizing the test payment.\n\n## See also\n\n- [Checkout fulfillment](https://docs.stripe.com/checkout/fulfillment)\n- [Customizing\nCheckout](https://docs.stripe.com/payments/checkout/customization)\n\n## Links\n\n- [Accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?platform=web&ui=stripe-hosted)\n- [configure payment methods in the\nDashboard](https://docs.stripe.com/payments/dashboard-payment-methods)\n- [single-use](https://docs.stripe.com/payments/payment-methods#usage)\n- [Prices](https://docs.stripe.com/api/prices)\n- [subscription](https://docs.stripe.com/billing/subscriptions/creating)\n- [accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?integration=checkout)\n- [Checkout Session](https://docs.stripe.com/api/checkout/sessions)\n- [https://example.com/success](https://example.com/success)\n- [https://example.com/cancel](https://example.com/cancel)\n- [fulfill orders](https://docs.stripe.com/checkout/fulfillment)\n- [Customizing\nCheckout](https://docs.stripe.com/payments/checkout/customization)",
  "metadata": {
    "title": "Accept a WeChat Pay payment | Stripe Documentation",
    "description": "Use the Payment Intents and Payment Methods APIs to accept WeChat Pay, a digital wallet popular with customers from China.",
    "sourceURL": "https://docs.stripe.com/payments/wechat-pay/accept-a-payment"
  }
}