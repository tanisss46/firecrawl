# Configure taxes with Stripe and NetSuite

## Learn about options for configuring taxes with Stripe and NetSuite.

You must configure your payment front end to calculate tax before Stripe
receives the transaction and the connector syncs it to NetSuite. You can’t use
the NetSuite tax tables to calculate tax through Stripe.

Instead, you have the following options:

- Automatically calculate taxes using [Stripe Tax](https://docs.stripe.com/tax).
- Create and maintain your own tax rates and apply them to products using
[Stripe tax rates](https://docs.stripe.com/billing/taxes/tax-rates).
- Calculate taxes outside of Stripe and record the amount using an [invoice
item](https://docs.stripe.com/api/invoiceitems/create) added to the Stripe
invoice.
- Work with a [Stripe partner](https://stripe.partners/) to calculate tax.

## Considerations

Consider the following as you review your tax situation during the onboarding
process for the Stripe Connector for NetSuite:

- **Determine what system is creating the payment**: Determine if the payment is
from an e-commerce shop (such as Shopify or Magento) or an automated
subscription generated by Stripe.
- **Charge tax based on location**: Determine whether you only need to charge a
flat tax because a customer is in a specific state or providence, or if you need
to charge tax based on a customer’s exact location.
- **Determine whether tax is inclusive or exclusive**: Determine whether your
price includes tax (inclusive), or if tax is a separate line item on the invoice
or order (exclusive). Tax is primarily inclusive in the European Union.
- **Determine how you manage tax remittance**: Determine whether you use
NetSuite to remit tax, or if you use a third-party tool (such as Avalara).
- **Determine how you represent taxes in NetSuite**: Determine whether you use
line-level taxes, header-level taxes, multi-component taxes, or represent taxes
as a unique liability item.

Consult with a tax advisor who understands your business model to determine your
tax obligations. Advice or suggestions provided here don’t qualify as official
tax or legal advice. Information supplied by the Stripe Connector for NetSuite
is strictly related to the configuration options available in the connector to
handle taxes.

## Recommended tax workflows

The Stripe Connector for NetSuite offers several options for tax workflows,
depending on your integration.

### Stripe Billing

If you use [Stripe Billing](https://docs.stripe.com/billing) or [Stripe
Invoicing](https://docs.stripe.com/invoicing) and [invoice
automation](https://docs.stripe.com/connectors/netsuite/invoice-automation), we
recommend the following:

- Use [Stripe Tax](https://docs.stripe.com/tax) to automatically calculate taxes
in Stripe.
- After billing the customer with a Stripe invoice, the connector records the
Stripe-calculated tax amounts to NetSuite.
- Use NetSuite as a ledger of taxes owed and paid. The connector syncs the data
for net taxes owed from Stripe to NetSuite. Don’t use NetSuite for detailed
reporting on state or local taxes owed.
- Use [Stripe Tax reports](https://docs.stripe.com/tax/reports) to manage
detailed tax reporting and remittance.

Learn how to [set up](https://docs.stripe.com/tax/subscriptions) Stripe Billing
with Stripe Tax.

### E-commerce

If you run an e-commerce store using an application (such as Shopify,
WooCommerce, or Magento), you can use that app to help with tax calculation. You
can then use an app like Celigo or In8 to sync order data to NetSuite. Stripe
and the connector aren’t involved in the tax calculation process.

### Billing managed in NetSuite

Stripe and the connector aren’t involved in the tax calculation or recording
process if you manage your invoicing process in NetSuite. If you use a tax
system other than Stripe Tax or Avalara, you might need to build a custom
integration into Stripe. For more details, see the [tax systems that work with
Stripe](https://stripe.partners/?search=tax).

### Payments without a Stripe invoice

If you create payments without an invoice, then Stripe and the connector can’t
help with recording taxes in NetSuite. Because there’s no line-level detail,
Stripe can’t determine the product purchased, the amount paid for the product,
or the amount of tax paid.

## Tax representation in NetSuite

Represent taxes in NetSuite by either:

- Adding to the invoice a line item that posts to a liability account
*(recommended)*
- Setting a tax rate on the line-item level of the invoice

You can find tax settings in the connector app by navigating to **Settings** >
**Controls** > **Taxes**.

If you’re an international company, the price might include tax. You can specify
the gross amount at the line item level and let NetSuite calculate the correct
tax owed based on the customer’s address.

If you use a tax integration bundle in NetSuite, such as AvaTax, you can
automatically calculate taxes based on the NetSuite invoice information.

### (Recommended) Taxes as a separate line item

When representing taxes in NetSuite, specify the taxes as a separate line item
on the invoice to record the taxes calculated in Stripe. If you use this option,
taxes aren’t recorded at the line item or header level of the NetSuite record.
Even if you use the NetSuite tax engine, you might want to specify taxes as a
separate line item. For example, Stripe might have more detailed address data or
product tax codes compared to NetSuite.

If you use Stripe Tax or Stripe Tax Rates, you can find the tax amount, source,
and tax percent for each tax rate in the line item’s description.

For example, if you use Stripe Tax, you see `8.88 of Sales Tax - New York at
8.875% generated by Stripe Tax`. For multiple tax rates, you see `.38 of Tax -
Seattle at 3.75%, .65 of Sales Tax - WA at 6.5%`. If you only use Avalara, the
calculated tax rate displays and you see `6.00% Tax by Avalara`.

#### Tax reports for recording tax as a NetSuite line item

Use [Stripe tax reporting](https://docs.stripe.com/tax/reports) to see a
breakdown of the taxes generated in Stripe. Complete tax reporting isn’t
available in NetSuite; however, you can use the tax line item to see the total
amount of taxes paid.

### Taxes represented on every line item

Differences in features between Stripe and NetSuite might lead to incorrect tax
percentages. To account for this, the connector matches the total amount of tax
calculated on each line in NetSuite with the total amount of taxes on each line
in Stripe.

#### Multiple tax rates on a line item

While NetSuite only supports two tax rates, Stripe supports multiple tax rates
on a line item. To account for this difference, the connector combines the tax
rates from Stripe into a single percentage that’s set on the `tax_rate1`
property for each NetSuite line item. In most cases, you can add all of the tax
rates to generate the total tax rate.

In rare cases, adding the tax rates won’t generate the combined tax rate.
Instead, you can calculate the tax rates based on the total tax amount. To
produce the total tax amount for the line, you can apply each tax rate to the
pre-tax amount. The total tax amount from a summed percentage might differ from
the total tax amount from separate tax percentages. This is because of
compounding rounded tax amounts when the tax rates are separate.

For example, a line item has a value of 1.00 USD and tax rates of 9.5% and 9.6%.
Both tax rates generate a tax amount of 0.10 USD, totaling 0.020 USD of tax for
the line. Adding the tax rates results in a total tax rate of 19.1%, which
generates 0.19 USD of tax instead of the total 0.020 USD. The connector matches
the tax amounts on each line in NetSuite with the line amounts in Stripe. For
this example, the connector calculates a tax rate of 20% so that a total tax of
0.020 USD generates on the line in NetSuite.

#### Tax on credit note line items

You can’t use credit note automation if you represent taxes as line items in
NetSuite. Because NetSuite has limitations that prevent setting the tax rate on
credit memo line items, you can use Taxes as a separate line item instead.

### Tax rates with discounts on line items

The connector uses the tax rate to calculate the proper tax amount for any items
with a discount applied. The invoice that the connector creates in NetSuite
includes separate line items for the original prices (pre-discounted) and the
total discounts.

For example, say you have a line item on your invoice with the following
amounts:

PriceDiscountPost-discounted price100 USD20 USD80 USD
The tax rate is 10% and applies to the post-discounted amount of 80 USD. This
results in a tax amount of 8 USD.

The connector generates an 8% tax rate in NetSuite for the line item, based on
the pre-discounted amount of 100 USD and tax amount of 8 USD. This differs from
the tax percentage used in Stripe.

### Inclusive line-level tax

If your company is based in the European Union, the amount shown to customers
most likely includes tax. In NetSuite, the amount charged to the customer
appears in the gross amount transaction column. NetSuite calculates tax through
either the NetSuite tax engine or the Avalara NetSuite integration.

## Integrate a custom tax system with Stripe Billing

You can also calculate taxes using a custom system. If you do, complete the
following for the connector to correctly categorize the tax line item:

- Use a standalone Stripe invoice item for the exact tax amount.
- Add a `netsuite_tax` metadata key that’s set to `true`.

## See also

- [Calculate tax with
Avalara](https://docs.stripe.com/connectors/netsuite/avalara-connector)

## Links

- [Stripe Tax](https://docs.stripe.com/tax)
- [Stripe tax rates](https://docs.stripe.com/billing/taxes/tax-rates)
- [invoice item](https://docs.stripe.com/api/invoiceitems/create)
- [Stripe partner](https://stripe.partners/)
- [Stripe Billing](https://docs.stripe.com/billing)
- [Stripe Invoicing](https://docs.stripe.com/invoicing)
- [invoice
automation](https://docs.stripe.com/connectors/netsuite/invoice-automation)
- [Stripe Tax reports](https://docs.stripe.com/tax/reports)
- [set up](https://docs.stripe.com/tax/subscriptions)
- [tax systems that work with Stripe](https://stripe.partners/?search=tax)
- [Calculate tax with
Avalara](https://docs.stripe.com/connectors/netsuite/avalara-connector)