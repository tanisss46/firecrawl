{
  "content": "# Accept a Multibanco payment\n\n## Learn how to accept the Multibanco payment method.\n\nWebMobileStripe-hosted pageDirect API\n#### Caution\n\nStripe automatically presents your customers payment method options by\nevaluating their currency, payment method restrictions, and other parameters. We\nrecommend that you configure your payment methods from the Stripe Dashboard\nusing the instructions in [Accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?platform=web&ui=stripe-hosted).\n\nIf you want to continue manually configuring the payment methods you present to\nyour customers with Checkout, use this guide. Otherwise, [migrate to the\nDashboard](https://docs.stripe.com/payments/dashboard-payment-methods).\n\nMultibanco is a voucher-based payment method in Portugal. If your business is\nbased in Europe or the United States, you can accept Multibanco payments from\ncustomers in Portugal using the [Payment Intents\nAPI](https://docs.stripe.com/payments/payment-intents).\n\nTo complete a transaction, customers receive a voucher that includes Multibanco\nentity and reference numbers. Customers use these voucher details to make a\npayment outside your checkout flow through online banking or from an ATM.\n\nPayment confirmation might be delayed by several days due to the initiation of a\nbank transfer when a customer pays for a Multibanco voucher. Bank transfers can\nencounter delays, particularly over weekends, contributing to the delay in\npayment confirmation.\n\n[Determine\ncompatibility](https://docs.stripe.com/payments/multibanco/accept-a-payment#compatibility)\nA Checkout Session must satisfy all of the following conditions to support\nMultibanco:\n\n- [Prices](https://docs.stripe.com/api/prices) for all line items must be in the\nsame currency (EUR).\n- You can only use one-time line items (recurring\n[subscription](https://docs.stripe.com/billing/subscriptions/creating) plans are\nnot supported).\n[Accept a\npayment](https://docs.stripe.com/payments/multibanco/accept-a-payment#accept-a-payment)\n#### Note\n\nBuild an integration to [accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?integration=checkout)\nwith Checkout before using this guide.\n\nEnable Multibanco by making the following updates to your card payment\nintegration.\n\n### Enable Multibanco as a payment method\n\nWhen creating a new [Checkout\nSession](https://docs.stripe.com/api/checkout/sessions), you need to:\n\n- Add `multibanco` to the list of `payment_method_types`.\n- Make sure all your `line_items` use the `eur` currency.\n\n```\nStripe::Checkout::Session.create({\n mode: 'payment',\n payment_method_types: ['card'],\n payment_method_types: ['card', 'multibanco'],\n line_items: [{\n price_data: {\n currency: 'usd',\n # To accept `multibanco`, all line items must have currency: eur\n currency: 'eur',\n product_data: {\n name: 'T-shirt',\n },\n unit_amount: 2000,\n },\n quantity: 1,\n }],\n success_url: 'https://example.com/success',\n cancel_url: 'https://example.com/cancel',\n})\n```\n\n### Redirect to Stripe-hosted voucher page\n\n#### Note\n\nUnlike card payments, the customer won’t be redirected to the\n[success_url](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-success_url)\nwith a Multibanco payment.\n\nAfter submitting the Checkout form successfully, the customer is redirected to\nthe `hosted_voucher_url`. The customer can reference the hosted page’s payment\ninstructions for details on how to complete their payment. You can view the page\non both desktop and mobile platforms, and it’s also printable.\n\nStripe sends a\n[payment_intent.requires_action](https://docs.stripe.com/api/events/types#event_types-payment_intent.requires_action)\nevent when a Multibanco voucher is created successfully. If you need to send an\nemail with the voucher’s payment instructions link, locate the PaymentIntent at\n`data.object` on the `requires_action` event, and extract the\n`hosted_voucher_url` at\n[next_action.multibanco_display_details.hosted_voucher_url](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-next_action-multibanco_display_details-hosted_voucher_url)\non the PaymentIntent.\n\n### Fulfill your orders\n\nBecause Multibanco is a [delayed\nnotification](https://docs.stripe.com/payments/payment-methods#payment-notification)\npayment method, you need to use a method such as\n[webhooks](https://docs.stripe.com/webhooks) to monitor the payment status and\nhandle order fulfillment. Learn more about [setting up webhooks and fulfilling\norders](https://docs.stripe.com/checkout/fulfillment).\n\nThe following events are sent when the payment status changes:\n\nEvent nameDescriptionNext\nsteps[checkout.session.completed](https://docs.stripe.com/api/events/types#event_types-checkout.session.completed)The\ncustomer has successfully submitted the Checkout form. Stripe has generated a\nMultibanco voucher.Wait for the customer to pay the Multibanco\nvoucher.[checkout.session.async_payment_succeeded](https://docs.stripe.com/api/events/types#event_types-checkout.session.async_payment_succeeded)The\ncustomer has successfully paid the Multibanco voucher. The `PaymentIntent`\ntransitions to `succeeded`.Fulfill the goods or services that the customer\npurchased.[checkout.session.async_payment_failed](https://docs.stripe.com/api/events/types#event_types-checkout.session.async_payment_failed)The\nMultibanco voucher has expired, or the payment has failed for some other reason.\nThe `PaymentIntent` returns to a status of `requires_payment_method`.Contact the\ncustomer by email and request that they place a new order.[OptionalSend\nautomated payment instruction\nemails](https://docs.stripe.com/payments/multibanco/accept-a-payment#instruction-emails)[OptionalCustomize\nvoucher\nappearance](https://docs.stripe.com/payments/multibanco/accept-a-payment#customize-voucher-appearance)[Test\nyour\nintegration](https://docs.stripe.com/payments/multibanco/accept-a-payment#test-the-integration)\nWhen testing your Checkout integration, select Multibanco as the payment method,\nthen click **Pay**. Provide the following email patterns in the Checkout form to\ntest different scenarios:\n\nEmailDescription\n`{any_prefix}@{any_domain}`\n\nSimulates a Multibanco voucher that a customer pays. The\n`payment_intent.succeeded` webhook arrives after about 3 minutes.\n\nExample: jenny@example.com\n\n`{any_prefix}succeed_immediately@{any_domain}`\n\nSimulates a Multibanco voucher that a customer pays immediately. The\n`payment_intent.succeeded` webhook arrives within several seconds.\n\nExample: succeed_immediately@example.com\n\n`{any_prefix}expire_immediately@{any_domain}`\n\nSimulates a Multibanco voucher that expires immediately. The\n`payment_intent.payment_failed` webhook arrives within several seconds.\n\nExample: expire_immediately@example.com\n\n`{any_prefix}expire_with_delay@{any_domain}`\n\nSimulates a Multibanco voucher that expires before a customer pays. The\n`payment_intent.payment_failed` webhook arrives after about 3 minutes.\n\nExample: expire_with_delay@example.com\n\n`{any_prefix}fill_never@{any_domain}`\n\nSimulates a Multibanco voucher that never succeeds. The\n`payment_intent.payment_failed` webhook arrives after 11 days, which mimics\nbehavior in live mode. Learn about Multibanco\n[expiration](https://docs.stripe.com/payments/multibanco/accept-a-payment#expiration).\n\nExample: fill_never@example.com\n\n## Expiration\n\nMultibanco vouchers expire at the `expires_at` UNIX timestamp in\n[next_action.multibanco_display_details.expires_at](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-next_action-multibanco_display_details-expires_at),\nwhich is 7 days after you create the voucher. Customers can’t pay a Multibanco\nvoucher after it expires. After expiration, the PaymentIntent’s status\ntransitions from `requires_action` to `processing`, and Stripe sends a\n[payment_intent.processing](https://docs.stripe.com/api/events/types#event_types-payment_intent.processing)\nevent.\n\nThe PaymentIntent remains in the `processing` status for a maximum buffer period\nof 4 days to allow for potential completed payment notification delays caused by\nbank-transfer delays. If the Multibanco payment doesn’t complete within the\nbuffer period, the PaymentIntent’s status transitions to\n`requires_payment_method` and Stripe sends a\n[payment_intent.payment_failed](https://docs.stripe.com/api/events/types#event_types-payment_intent.payment_failed)\nevent. If you receive the customer’s funds after the buffer period, Stripe\nautomatically initiates a refund process for the mispaid amount.\n\n## Cancelation\n\nYou can cancel Multibanco vouchers using [Cancel a\nPaymentIntent](https://docs.stripe.com/api/payment_intents/cancel). After\ncancelation, Stripe sends a\n[payment_intent.canceled](https://docs.stripe.com/api/events/types#event_types-payment_intent.canceled)\nevent.\n\nIf a customer’s funds are received for a canceled Multibanco voucher, Stripe\nautomatically initiates a refund process for the mispaid amount.\n\n#### Note\n\nCanceling a pending payment invalidates the original voucher instructions. When\nyou cancel a pending Multibanco payment, inform your customer.\n\nWhen you successfully reconfirm a PaymentIntent in status `requires_action`,\nStripe creates new voucher instructions and a new `hosted_voucher_url`. You must\nprovide them to your customer.\n\n## Refunds\n\nLearn about Multibanco\n[refunds](https://docs.stripe.com/payments/multibanco#refunds).\n\n## See also\n\n- [Checkout fulfillment](https://docs.stripe.com/checkout/fulfillment)\n- [Customizing\nCheckout](https://docs.stripe.com/payments/checkout/customization)\n\n## Links\n\n- [Accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?platform=web&ui=stripe-hosted)\n- [migrate to the\nDashboard](https://docs.stripe.com/payments/dashboard-payment-methods)\n- [Payment Intents API](https://docs.stripe.com/payments/payment-intents)\n- [Prices](https://docs.stripe.com/api/prices)\n- [subscription](https://docs.stripe.com/billing/subscriptions/creating)\n- [accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?integration=checkout)\n- [Checkout Session](https://docs.stripe.com/api/checkout/sessions)\n- [https://example.com/success](https://example.com/success)\n- [https://example.com/cancel](https://example.com/cancel)\n-\n[success_url](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-success_url)\n-\n[payment_intent.requires_action](https://docs.stripe.com/api/events/types#event_types-payment_intent.requires_action)\n-\n[next_action.multibanco_display_details.hosted_voucher_url](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-next_action-multibanco_display_details-hosted_voucher_url)\n- [delayed\nnotification](https://docs.stripe.com/payments/payment-methods#payment-notification)\n- [webhooks](https://docs.stripe.com/webhooks)\n- [setting up webhooks and fulfilling\norders](https://docs.stripe.com/checkout/fulfillment)\n-\n[checkout.session.completed](https://docs.stripe.com/api/events/types#event_types-checkout.session.completed)\n-\n[checkout.session.async_payment_succeeded](https://docs.stripe.com/api/events/types#event_types-checkout.session.async_payment_succeeded)\n-\n[checkout.session.async_payment_failed](https://docs.stripe.com/api/events/types#event_types-checkout.session.async_payment_failed)\n-\n[expiration](https://docs.stripe.com/payments/multibanco/accept-a-payment#expiration)\n-\n[next_action.multibanco_display_details.expires_at](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-next_action-multibanco_display_details-expires_at)\n-\n[payment_intent.processing](https://docs.stripe.com/api/events/types#event_types-payment_intent.processing)\n-\n[payment_intent.payment_failed](https://docs.stripe.com/api/events/types#event_types-payment_intent.payment_failed)\n- [Cancel a PaymentIntent](https://docs.stripe.com/api/payment_intents/cancel)\n-\n[payment_intent.canceled](https://docs.stripe.com/api/events/types#event_types-payment_intent.canceled)\n- [refunds](https://docs.stripe.com/payments/multibanco#refunds)\n- [Customizing\nCheckout](https://docs.stripe.com/payments/checkout/customization)",
  "metadata": {
    "title": "Accept a Multibanco payment | Stripe Documentation",
    "description": "Learn how to accept the Multibanco payment method.",
    "sourceURL": "https://docs.stripe.com/payments/multibanco/accept-a-payment"
  }
}