{
  "content": "# Query connected account data\n\n## Use Sigma and Data Pipeline to retrieve connected account information.\n\n[Connect](https://docs.stripe.com/connect) platforms can report on their\nconnected accounts using Sigma or Data Pipeline. You can write queries that run\nacross your entire platform in much the same way as your own Stripe account.\n\nAdditional groups of Connect-specific tables within the schema are located in\nthe **Connect** sections of the schema. If you don’t operate a Connect platform,\nthese tables are not displayed.\n\n## Connected account information\n\nThe `connected_accounts` table provides a list of\n[Account](https://docs.stripe.com/api#account_object) objects with information\nabout connected accounts. This table is used for account-level information\nacross all accounts on your platform, such as [business\nname](https://docs.stripe.com/api#account_object-business_name),\n[country](https://docs.stripe.com/api#account_object-country), or the user’s\n[email address](https://docs.stripe.com/api#account_object-email).\n\nThe following example uses the `connected_accounts` table to retrieve a list of\nfive accounts for individuals located in the US that have\n[payouts](https://docs.stripe.com/payouts) disabled because Stripe does not have\nthe [required verification\ninformation](https://docs.stripe.com/connect/required-verification-information)\nto [verify their\naccount](https://docs.stripe.com/connect/identity-verification).\n\n```\nselect\n id,\n email,\n legal_entity_address_city as city,\n legal_entity_address_line1 as line1,\n legal_entity_address_postal_code as zip,\n legal_entity_address_state as state,\n legal_entity_dob_day as dob_day,\n legal_entity_dob_month as dob_month,\n legal_entity_dob_year as dob_year,\n```\n\nSee all 22 lines\nAll the required fields for individual accounts in the US are retrieved as\ncolumns. This allows you to see what information has been provided, and what is\nneeded, for each account. This can be seen in the example report below (some\ncolumns have been omitted for brevity).\n\nidemailcity…id_provideddocument_idacct_jMqdyEw…jenny.rosen@example.comSan\nFrancisco…truefile_TJYhXYr…acct_heBfRXR…sophia.garcia@example.com…falsefile_fGziLJb…acct_dx84KB7…natalie.davis@example.comSeattle…truefile_2x61pZo…acct_V2xUyzd…ella.thompson@example.comAustin…falsefile_WPtYIRT…acct_SU5NhuU…james.smith@example.com…falsefile_KYXhOHu…\n## Accounts with requirements\n\nThe `connected_accounts` table also contains information about the\n`requirements` and `future_requirements` for connected accounts. Use the table\nto retrieve lists of accounts that have requirements currently due and will be\ndisabled soon. Use the `future_requirements` columns to [handle verification\nupdates](https://docs.stripe.com/connect/handle-verification-updates).\n\nThe following example uses the `connected_accounts` table to retrieve a list of\naccounts that have upcoming verification updates.\n\n```\nselect\n id,\n business_name,\n requirements_currently_due,\n future_requirements_currently_due\nfrom\n connected_accounts\nwhere\n future_requirements_currently_due != ''\n```\n\nThe `requirements_past_due`, `requirements_currently_due`,\n`requirements_eventually_due`, `future_requirements_past_due`,\n`future_requirements_currently_due`, and `future_requirements_eventually_due`\nare comma-separated lists of requirements on the account.\n\nidbusiness_namerequirements_currently_duefuture_requirements_currently_dueacct_1JLOXTr65xL6wmw6RocketRidesbusiness_profile.urlacct_1hxFexyxvT84ZvdCKavholmindividual.email,settings.payments.statement_descriptoracct_1zEjBGteqUk5H1fgFurEverexternal_accountsettings.payments.statement_descriptoracct_14MlH11Khlv6x67MPashabusiness_profile.urlcompany.tax_id\n## Transactional data for connected accounts\n\n[Transactional](https://docs.stripe.com/stripe-data/query-transactions) and\n[subscription](https://docs.stripe.com/stripe-data/query-billing-data) data for\nconnected accounts is contained within the `connected_account_` tables. The\navailable data for connected accounts is organized and structured in the same\nway as data for your own account.\n\nFor instance, the `balance_transactions` table, located in the **Payments**\nsection, contains balance transaction data for your Stripe account. The\n`connected_account_balance_transactions` table, located in the **Connect -\nPayments** section, contains balance transaction data for your connected\naccounts. Each Connect-specific table has an additional `account` column\ncontaining the identifier of a connected account. This can be used when joining\ntables to build advanced queries.\n\nThe following example is based upon the default query that’s loaded into the\neditor. Instead of retrieving the ten most recent balance transactions on your\naccount, it does so across all of your platform’s connected accounts.\n\n```\nselect\n date_format(created, '%m-%d-%Y') as day,\n account, -- Added to include corresponding account identifier\n id,\n amount,\n currency,\n source_id,\n type\nfrom connected_account_balance_transactions -- Changed to use Connect-specific\ntable\n order by day desc\n limit 5\n```\n\ndayaccountidamountcurrencysource_idtype3/9/2025acct_Vw3EDvu…txn_ScuEGOM…-1,000usdre_GdqbgRN…refund3/9/2025acct_Yq2BSIO…txn_fDzCh4D…1,000usdch_YVvJgfj…charge3/9/2025acct_ybODP21…txn_c6V3Udj…1,000usdch_IkhpbTv…charge3/9/2025acct_nBu71YE…txn_v1ck5Wc…1,000eurch_K2o0BPL…charge3/9/2025acct_Twta3HX…txn_hpGyffj…-1,000usdre_O4PoWkI…refund\nRefer to our\n[transactions](https://docs.stripe.com/stripe-data/query-transactions) and\n[subscriptions](https://docs.stripe.com/stripe-data/query-billing-data)\ndocumentation to learn more about querying transactional and subscription data.\nYou can then supplement or adapt your queries with Connect-specific information\nto report on connected accounts.\n\n### Query charges on connected accounts\n\nUse Sigma or Data Pipeline to report on the flow of funds to your connected\naccounts. How you do this depends on your platform’s approach to creating\ncharges.\n\n## Direct charges\n\nIf your platform creates [direct\ncharges](https://docs.stripe.com/connect/direct-charges) on a connected account,\nthey appear on the connected account, not on your platform. This is analogous to\na connected account making a charge request itself. Platforms can use the\nConnect-specific tables (for example, `connected_account_charges` or\n`connected_account_balance_transactions`) to report on direct charges.\n\nAccess the [direct charges query\ntemplate](https://dashboard.stripe.com/sigma/queries/templates/Direct%20charges)\nto retrieve itemized information about application fees earned through direct\ncharges, and reports on the connected account, transfer, and payment that is\ncreated.\n\n## Destination charges\n\nIf your platform creates [destination\ncharges](https://docs.stripe.com/connect/destination-charges) on behalf of\nconnected accounts, charge information is available within your own account’s\ndata. A separate transfer of the funds to the connected account is automatically\ncreated, which creates a payment on that account. For example, the [destination\ncharges query\ntemplate](https://dashboard.stripe.com/sigma/queries/templates/Destination%20charges)\nreports on transfers related to destination charges made by your platform. One\nway to analyze the flow of funds from a destination charge to a connected\naccount is by joining the `transfer_id` column of the `charges` table to the\n`id` column of the `transfers` table. This example includes the original charge\nidentifier and amount, the amount transferred to the connected account, and the\nconnected account’s identifiers and resulting payment.\n\n```\nselect\n date_format(date_trunc('day', charges.created), '%y-%m-%d') as day,\n charges.id,\n charges.amount as charge_amount,\n transfers.amount as transferred_amount,\n transfers.destination_id\nfrom charges\ninner join transfers\n on transfers.id=charges.transfer_id\norder by day desc\nlimit 5\n```\n\ndayidcharge_amounttransferred_amountdestination_id3/9/2025ch_acct_bwKf2jd…1,0001,000acct_Ia0jwSN…3/9/2025ch_acct_F284nt4…800800acct_UqQtSr8…3/9/2025ch_acct_jz6C5D3…1,000800acct_TRdjkdU…3/9/2025ch_acct_ObTBQkd…1,100950acct_uustuMj…3/9/2025ch_acct_XAxnpCR…1,1001,100acct_vub3PlU…\nPayment and transfer information for Connected accounts is also available within\nConnect-specific tables (for example, `connected_account_charges`).\n\n### Separate charges and transfers\n\nReport on [separate charges and\ntransfers](https://docs.stripe.com/connect/separate-charges-and-transfers) using\na similar approach to destination charges. All charges are created on your\nplatform’s account, with funds separately transferred to connected accounts\nusing [transfer\ngroups](https://docs.stripe.com/connect/separate-charges-and-transfers). A\npayment is created on the connected account that references the transfer and\ntransfer group.\n\nBoth the `charges` and `transfers` table include a `transfer_group` column.\nPayment, transfer, and transfer group information is available within the\nConnect-specific `connected_account_charges` table.\n\n## Links\n\n- [configured with\nproperties](https://docs.stripe.com/connect/update-to-typeless-connect)\n- [platform\ncontrols](https://docs.stripe.com/connect/platform-controls-for-standard-accounts)\n- [Connect](https://docs.stripe.com/connect)\n- [Account](https://docs.stripe.com/api#account_object)\n- [business name](https://docs.stripe.com/api#account_object-business_name)\n- [country](https://docs.stripe.com/api#account_object-country)\n- [email address](https://docs.stripe.com/api#account_object-email)\n- [payouts](https://docs.stripe.com/payouts)\n- [required verification\ninformation](https://docs.stripe.com/connect/required-verification-information)\n- [verify their account](https://docs.stripe.com/connect/identity-verification)\n- [handle verification\nupdates](https://docs.stripe.com/connect/handle-verification-updates)\n- [query templates](https://dashboard.stripe.com/sigma/queries/templates)\n- [Transactional](https://docs.stripe.com/stripe-data/query-transactions)\n- [subscription](https://docs.stripe.com/stripe-data/query-billing-data)\n- [direct charges](https://docs.stripe.com/connect/direct-charges)\n- [direct charges query\ntemplate](https://dashboard.stripe.com/sigma/queries/templates/Direct%20charges)\n- [destination charges](https://docs.stripe.com/connect/destination-charges)\n- [destination charges query\ntemplate](https://dashboard.stripe.com/sigma/queries/templates/Destination%20charges)\n- [separate charges and\ntransfers](https://docs.stripe.com/connect/separate-charges-and-transfers)",
  "metadata": {
    "title": "Query connected account data | Stripe Documentation",
    "description": "Use Sigma and Data Pipeline to retrieve connected account information.",
    "sourceURL": "https://docs.stripe.com/stripe-data/query-connect-data"
  }
}