{
  "content": "# Legacy extensionsDeprecated\n\n## Learn how to build Stripe extensions, and see our Partner Directory for extensions created by our verified partners.\n\n#### Stripe Apps replaces extensions\n\nYou can no longer build new Stripe extensions. Stripe Apps replaces extensions\nfor developing on Stripe. However, existing extensions will continue to work\nuntil 2024. If you already have an extension, we recommend migrating it to\nStripe Apps.\n\n[View the Stripe Apps migration\ndocs](https://docs.stripe.com/stripe-apps/migrate-extension)\n\n#### Note\n\nYou can now automatically send your Stripe data and reports to Snowflake or\nAmazon Redshift in a few clicks with Stripe Data Pipeline. [Learn\nmore](https://stripe.com/data-pipeline).\n\nStripe’s products and features allow companies to accept online payments, but\noffer other reasons to integrate as well. Companies like\n[Baremetrics](https://stripe.com/partners/baremetrics) and\n[Segment](https://stripe.com/partners/segmentsources) build on top of Stripe to\nprovide their services to Stripe accounts with a Standard dashboard.\n\nBuilding an extension on Stripe consists of four steps:\n\n- [Configure OAuth and specify a redirect\nURI](https://docs.stripe.com/building-extensions#configure-oauth-redirect).\n- [Configure branding\nsettings](https://docs.stripe.com/building-extensions#configure-branding).\n- [Create an OAuth link for your\nusers](https://docs.stripe.com/building-extensions#create-oauth-link).\n- [Use the API on behalf of connected\naccounts](https://docs.stripe.com/building-extensions#use-api).\n\nYou’re also required to add business details to activate your account, if you\nhaven’t already.\n\nTo get started, visit the [Extensions\npage](https://dashboard.stripe.com/test/extensions) located in the Developers\ntab of the Stripe dashboard.\n\n[Configure OAuth and specify a redirect\nURI](https://docs.stripe.com/building-extensions#configure-oauth-redirect)\nYou can configure this setting in the **Integration** section of the [Extensions\nSettings](https://dashboard.stripe.com/test/settings/extensions) page.\n\nStart your integration by toggling the button to enable onboarding Standard\naccounts with OAuth. Extensions shouldn’t use OAuth with Express accounts.\n\nStripe provides a unique identifier for your extension called a `client_id`. You\nset the `redirect_uri` and users are directed to that page after they connect\ntheir accounts. You must specify all redirect URIs in your extension settings.\nThe development and production versions of these two values help with\n[testing](https://docs.stripe.com/connect/testing#using-oauth). Take note of\nthese values so you can create an OAuth link in the third step.\n\n[Configure branding\nsettings](https://docs.stripe.com/building-extensions#configure-branding)\nYou can customize how your business appears to your users in the **Branding**\nsection of the [Extensions\nSettings](https://dashboard.stripe.com/test/settings/extensions) page.\n\nUsers see your logo when they link their Stripe accounts to your application.\nAfter they link their accounts, your icon displays in their connected\napplications list.\n\n[Create an OAuth link for your\nusers](https://docs.stripe.com/building-extensions#create-oauth-link)\nStripe offers a standard OAuth 2.0 flow to connect to Stripe accounts. Using the\n`client_id` and `redirect_uri` values from step one, you can create an OAuth\nlink for your users to onboard with. We recommend showing this link with a\n**Connect with Stripe** button that sends users to the `authorize_url` endpoint:\n\n```\n\nhttps://connect.stripe.com/oauth/authorize?response_type=code&client_id=ca_FkyHCg7X8mlvCUdMDao4mMxagUfhIwXb&scope=read_only\n```\n\nHere’s an example of how you can display the above link to your user, along with\nthe [Connect with Stripe\nbutton](https://d37ugbyn3rpeym.cloudfront.net/docs/connect/Connect-with-Stripe-button.zip):\n\n[Connect\nwith](https://connect.stripe.com/oauth/authorize?response_type=code&client_id=ca_FkyHCg7X8mlvCUdMDao4mMxagUfhIwXb&scope=read_write)\nAfter the user clicks the link on your site, we redirect them to a page to allow\nor deny the connection to your extension. Stripe’s authorization flow prompts\nthem to either choose an existing account to connect with your extension, or\ncreate a new one.\n\nAfter the user connects their existing or newly created account to your\nextension, we redirect them back to the URL you set as your extension’s\n`redirect_uri` .\n\nAt the end of the OAuth workflow, you’re provided with authorization credentials\nfor the user’s account:\n\n```\n{\n ...\n \"stripe_user_id\": \"acct_0123456789\",\n ...\n}\n```\n\nYou need to store the `stripe_user_id` so you can identify user accounts.\n\n[Use the API on behalf of connected\naccounts](https://docs.stripe.com/building-extensions#use-api)\nAfter users link their Stripe accounts to your application, you can make [API\nrequests](https://docs.stripe.com/api) on their behalf. To perform API requests,\nyou need your extension account’s secret key, and a `Stripe-Account` header that\nidentifies the account that you’re making the request for. All Stripe libraries\nsupport this style of authentication on a per-request basis.\n\n### Fetching stored data\n\nStored data includes information like charges and customer details. With\n`read_only` access, you can make most `GET` requests in Stripe’s API. You can\nretrieve a single object (for example, [retrieve a Payment\nIntent](https://docs.stripe.com/api/payment_intents/retrieve)) or a list of\nobjects (for example, [list all Payment\nIntents](https://docs.stripe.com/api/payment_intents/list)).\n\n```\ncurl https://api.stripe.com/v1/payment_intents \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d \"created[lte]\"=1612048287 \\\n -d \"limit\"=50 \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\"\n```\n\nWhile the API performs at a high level, repeatedly fetching large data sets\nslows your application’s responsiveness. We recommended storing fetched data on\nyour side for analysis and reporting.\n\n### Listening for real-time data\n\nIn addition to stored data, you can access real-time data via\n[webhooks](https://docs.stripe.com/connect/webhooks). After you define an\n[extension webhook endpoint in your\naccount](https://dashboard.stripe.com/account/webhooks), Stripe sends [event\nnotifications](https://docs.stripe.com/api#events) to your endpoint for every\nconnected account. The event object’s `account` property identifies the account\nwhere the event occurred.\n\nFor example, the event below shows that a customer was created in the\n`acct_0123456789` account. Again, we recommend storing this data on your side\nfor analysis and reporting. By watching events as they occur, your application\ncan respond faster, and you won’t need to make as many API calls.\n\n```\n{\n \"id\": \"evt_\",\n \"livemode\": true,\n \"object\": \"event\",\n \"type\": \"customer.created\",\n \"account\": \"acct_0123456789\",\n \"pending_webhooks\": 2,\n \"created\": 1349654313,\n \"data\": {...}\n}\n```\n\n## Charging for your application\n\nYour extension’s Stripe account can process its own charges, so you can still\ncharge for your application with `read_only` access. After customers connect\ntheir Stripe accounts, ask for their payment details and then [create a\nsubscription](https://docs.stripe.com/api/subscriptions/create) for them in your\nStripe account. Make sure to store the created customer ID with the associated\nStripe account ID, so that you can track which users are paid and active, and\nwhich ones are not.\n\nIf you create\n[subscriptions](https://docs.stripe.com/billing/subscriptions/creating), you can\nalso specify an `application_fee_percent` as a fee for your application. This is\ncharged on top of any Stripe fees. Read the\n[Subscriptions](https://docs.stripe.com/connect/subscriptions) documentation to\nlearn more.\n\n## Disconnected accounts\n\nUsers can disconnect their accounts from your integration at any time. When this\nhappens, Stripe sends an `account.application.deauthorized`\n[webhook](https://docs.stripe.com/webhooks). You can use this notification to\ntrigger cleanup on your end, such as disabling the user’s account on your site\nor removing their data.\n\nYou can also disconnect accounts from your integration, by making a request to\nthe [OAuth\ndeauthorization](https://docs.stripe.com/connect/oauth-reference#post-deauthorize)\nendpoint.\n\n## Links\n\n- [View the Stripe Apps migration\ndocs](https://docs.stripe.com/stripe-apps/migrate-extension)\n- [Learn more](https://stripe.com/data-pipeline)\n- [Baremetrics](https://stripe.com/partners/baremetrics)\n- [Segment](https://stripe.com/partners/segmentsources)\n- [Extensions page](https://dashboard.stripe.com/test/extensions)\n- [Extensions Settings](https://dashboard.stripe.com/test/settings/extensions)\n- [testing](https://docs.stripe.com/connect/testing#using-oauth)\n- [Connect OAuth Reference](https://docs.stripe.com/connect/oauth-reference)\n- [OAuth 2.0 client](https://oauth.net/2/)\n-\n[https://connect.stripe.com/oauth/authorize?response_type=code&client_id=ca_FkyHCg7X8mlvCUdMDao4mMxagUfhIwXb&scope=read_only](https://connect.stripe.com/oauth/authorize?response_type=code&client_id=ca_FkyHCg7X8mlvCUdMDao4mMxagUfhIwXb&scope=read_only)\n- [Connect with Stripe\nbutton](https://d37ugbyn3rpeym.cloudfront.net/docs/connect/Connect-with-Stripe-button.zip)\n- [Connect\nwith](https://connect.stripe.com/oauth/authorize?response_type=code&client_id=ca_FkyHCg7X8mlvCUdMDao4mMxagUfhIwXb&scope=read_write)\n- [API requests](https://docs.stripe.com/api)\n- [retrieve a Payment\nIntent](https://docs.stripe.com/api/payment_intents/retrieve)\n- [list all Payment Intents](https://docs.stripe.com/api/payment_intents/list)\n- [webhooks](https://docs.stripe.com/connect/webhooks)\n- [extension webhook endpoint in your\naccount](https://dashboard.stripe.com/account/webhooks)\n- [event notifications](https://docs.stripe.com/api#events)\n- [create a subscription](https://docs.stripe.com/api/subscriptions/create)\n- [subscriptions](https://docs.stripe.com/billing/subscriptions/creating)\n- [Subscriptions](https://docs.stripe.com/connect/subscriptions)\n- [webhook](https://docs.stripe.com/webhooks)\n- [OAuth\ndeauthorization](https://docs.stripe.com/connect/oauth-reference#post-deauthorize)",
  "metadata": {
    "title": "Legacy extensions | Stripe Documentation",
    "description": "Learn how to build Stripe extensions, and see our Partner Directory for extensions created by our verified partners.",
    "sourceURL": "https://docs.stripe.com/building-extensions"
  }
}