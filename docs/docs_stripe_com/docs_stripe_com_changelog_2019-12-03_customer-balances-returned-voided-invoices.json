{
  "content": "# Customer balances are now returned when voiding invoicesBreaking changes\n\n## What’s new\n\nCustomer balances applied to all invoices are now debited or credited back to\nthe customer when voided. Earlier, applied customer balances weren’t returned\nback to the customer and were consumed. To achieve this behavior in earlier API\nversions:\n\n- Set `consume_applied_balance` to `false` when voiding invoices in\n[/v1/invoices/:id/void](https://docs.stripe.com/api/invoices/void).\n- Set `invoice_customer_balance_settings[consume_applied_balance_on_void]` to\n`false` in `/v1/subscriptions`\n[create](https://docs.stripe.com/api/subscriptions/create) or\n[update](https://docs.stripe.com/api/subscriptions/update) to force this\nbehavior for invoices voided by a subscription.\n- Set\n`subscription_data[invoice_customer_balance_settings][consume_applied_balance_on_void]`\nto `false` in `/v1/checkout/sessions`\n[create](https://docs.stripe.com/api/checkout/sessions/create) to force this\nbehavior for invoices voided by subscriptions created with Checkout.\n\n## Impact\n\nLets you have customer balances properly credited back to the customer when\ninvoices are voided. Previously, any customer balances applied to the voided\ninvoices would be consumed and not returned to the customer, which led to\nunexpected balance depletion.\n\n## Upgrade\n\n- [View your current API\nversion](https://docs.stripe.com/upgrades#view-your-api-version-and-the-latest-available-upgrade-in-workbench)\nin Workbench.\n- If you use an SDK, upgrade to the corresponding SDK version for this API\nversion.- If you don’t use an SDK, update your [API\nrequests](https://docs.stripe.com/api/versioning) to include `Stripe-Version:\n2019-12-03`\n- Upgrade the API version used for [webhook\nendpoints](https://docs.stripe.com/webhooks/versioning).\n- [Test your integration](https://docs.stripe.com/testing) against the new\nversion.\n- If you use Connect, [test your Connect\nintegration](https://docs.stripe.com/connect/testing).\n- In Workbench, [perform the\nupgrade](https://docs.stripe.com/upgrades#perform-the-upgrade). You can [roll\nback the version](https://docs.stripe.com/upgrades#roll-back-your-api-version)\nfor 72 hours.\n\nLearn more about [Stripe API upgrades](https://docs.stripe.com/upgrades).\n\n## Links\n\n- [/v1/invoices/:id/void](https://docs.stripe.com/api/invoices/void)\n- [create](https://docs.stripe.com/api/subscriptions/create)\n- [update](https://docs.stripe.com/api/subscriptions/update)\n- [create](https://docs.stripe.com/api/checkout/sessions/create)\n- [View your current API\nversion](https://docs.stripe.com/upgrades#view-your-api-version-and-the-latest-available-upgrade-in-workbench)\n- [API requests](https://docs.stripe.com/api/versioning)\n- [webhook endpoints](https://docs.stripe.com/webhooks/versioning)\n- [Test your integration](https://docs.stripe.com/testing)\n- [test your Connect integration](https://docs.stripe.com/connect/testing)\n- [perform the upgrade](https://docs.stripe.com/upgrades#perform-the-upgrade)\n- [roll back the\nversion](https://docs.stripe.com/upgrades#roll-back-your-api-version)\n- [Stripe API upgrades](https://docs.stripe.com/upgrades)",
  "metadata": {
    "title": "Customer balances are now returned when voiding invoices | Stripe Documentation",
    "description": "",
    "sourceURL": "https://docs.stripe.com/changelog/2019-12-03/customer-balances-returned-voided-invoices"
  }
}