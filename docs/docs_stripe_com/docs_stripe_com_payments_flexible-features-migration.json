{
  "content": "# Migrate to the latest flexible payment scenarios\n\n## Adapt your beta advanced payment scenarios to the general release.\n\nStripe now supports several flexible payment scenarios for non-card-present\ntransactions. If you’ve already integrated the private beta version of any of\nthese features, this guide provides details to upgrade to the general release.\nFor new integrations, use the following guides for the features that interest\nyou:\n\n- [Increment an\nAuthorization](https://docs.stripe.com/payments/incremental-authorization)\n- [Capture more than the Authorized\nAmount](https://docs.stripe.com/payments/overcapture)\n- [Place an Extended Hold on an Online Card\nPayment](https://docs.stripe.com/payments/extended-authorization)\n- [Capture a Payment Multiple\nTimes](https://docs.stripe.com/payments/multicapture)\n\nWe’ve incorporated the following feedback-driven improvements to these features:\n\n- Detailed control over the features at the\n[PaymentIntent](https://docs.stripe.com/payments/payment-intents) level.\n- Clearer expectations regarding feature availability and usage after a\n[confirmation](https://docs.stripe.com/api/payment_intents/confirm) phase.\n\nEach of the flexible payment features has different requirements from its\nprivate beta integration. Choose the feature you need to upgrade and refer to\nthe note at the top for changes and requirements specific to that feature.\n\nIncremental authorizationOvercaptureExtended authorizationMulticapture\n#### Changes from beta\n\nThe first step of this integration is now mandatory.\n\n[Request incremental\nauthorization](https://docs.stripe.com/payments/flexible-features-migration#request-incremental-auth)\nYour [PaymentIntent](https://docs.stripe.com/payments/payment-intents) must\ninclude a request for incremental authorization before confirmation.\n\n#### Warning\n\nThis formerly optional step is now mandatory.\n\nBeforeAfter\n```\ncurl https://api.stripe.com/v1/payment_intents \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d amount=1000 \\\n -d currency=usd \\\n -d \"payment_method_types[]\"=card \\\n -d payment_method=pm_card_debit_incrementalAuthAuthorized \\\n -d confirm=true \\\n -d capture_method=manual \\\n -d \"expand[]\"=latest_charge \\\n-d\n\"payment_method_options[card][request_incremental_authorization_support]\"=true\n```\n\n```\ncurl https://api.stripe.com/v1/payment_intents \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d amount=1000 \\\n -d currency=usd \\\n -d \"payment_method_types[]\"=card \\\n -d payment_method=pm_card_debit_incrementalAuthAuthorized \\\n -d confirm=true \\\n -d capture_method=manual \\\n -d \"expand[]\"=latest_charge \\\n-d\n\"payment_method_options[card][request_incremental_authorization]\"=if_available\n```\n\nThe response now returns the status of the incremental authorization request in\nthe `payment_method_details.card.incremental_authorization.status` property of\nthe [latest_charge](https://docs.stripe.com/api/charges/object). The status\nvalues is `available` or `unavailable` depending on the customer’s payment\nmethod.\n\nBeforeAfter\n```\n// PaymentIntent Response\n{\n \"id\": \"pi_ANipwO3zNfjeWODtRPIg\",\n \"object\": \"payment_intent\",\n \"amount\": 1000,\n \"amount_capturable\": 1000,\n \"amount_received\": 0,\n ...\n // if latest_charge is expanded\n {\n \"latest_charge\": {\n \"amount\": 1000,\n \"payment_method_details\": {\n \"card\": {\n \"incremental_authorization_supported\": true // or false\n }\n }\n ...\n }\n }\n}\n```\n\n```\n// PaymentIntent Response\n{\n \"id\": \"pi_ANipwO3zNfjeWODtRPIg\",\n \"object\": \"payment_intent\",\n \"amount\": 1000,\n \"amount_capturable\": 1000,\n \"amount_received\": 0,\n ...\n // if latest_charge is expanded\n {\n \"latest_charge\": {\n \"amount\": 1000,\n \"payment_method_details\": {\n \"card\": {\n \"incremental_authorization\": {\n \"status\": \"available\" // or \"unavailable\"\n }\n }\n }\n ...\n }\n }\n}\n```\n\n[Incrementally modify the authorized\namount](https://docs.stripe.com/payments/flexible-features-migration#use-incremental-auth)\n**No changes have been made to this step in comparison to the beta version.**\n\n```\ncurl\nhttps://api.stripe.com/v1/payment_intents/pi_ANipwO3zNfjeWODtRPIg/increment_authorization\n\\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d amount=1500\n```\n\n## Choose how to capture more than initially authorized amount\n\nTwo of the flexible payment features allow you to capture an amount larger than\ninitially authorized:\n\n- Over capture up to a certain limit ([Capture more than the authorized amount\non a payment](https://docs.stripe.com/payments/overcapture))\n- Increment the existing authorization and then capture the newly authorized\namount ([Increment an\nauthorization](https://docs.stripe.com/payments/incremental-authorization))\n\nThe example below showcases how these features can complement each other in the\ngenerally available version.\n\n```\ncurl https://api.stripe.com/v1/payment_intents \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d amount=1000 \\\n -d currency=usd \\\n -d \"payment_method_types[]\"=card \\\n -d payment_method=pm_card_visa \\\n -d confirm=true \\\n -d capture_method=manual \\\n -d \"expand[]\"=latest_charge \\\n-d\n\"payment_method_options[card][request_incremental_authorization]\"=if_available \\\n -d \"payment_method_options[card][request_overcapture]\"=if_available\n```\n\n```\n// PaymentIntent Response\n{\n \"object\": \"payment_intent\",\n \"amount\": 1000,\n ...\n // if latest_charge is expanded\n {\n \"latest_charge\": {\n \"payment_method_details\": {\n \"card\": {\n \"incremental_authorization\": {\n \"status\": \"available\" // or \"unavailable\"\n },\n \"overcapture\": {\n \"status\": \"available\", // or \"unavailable\"\n \"maximum_capturable_amount\": 1200\n }\n }\n }\n ...\n }\n }\n}\n```\n\nUpon [confirmation](https://docs.stripe.com/api/payment_intents/confirm) of the\nPaymentIntent, if both features are available, you have options on the next\nsteps to capture a larger amount than initially authorized:\n\n- Overcapture if the desired amount is equal or below the\n`maximum_capturable_amount`.\n- Perform an incremental authorization to the desired amount, then capture.\n\n## Links\n\n- [Increment an\nAuthorization](https://docs.stripe.com/payments/incremental-authorization)\n- [Capture more than the Authorized\nAmount](https://docs.stripe.com/payments/overcapture)\n- [Place an Extended Hold on an Online Card\nPayment](https://docs.stripe.com/payments/extended-authorization)\n- [Capture a Payment Multiple\nTimes](https://docs.stripe.com/payments/multicapture)\n- [PaymentIntent](https://docs.stripe.com/payments/payment-intents)\n- [confirmation](https://docs.stripe.com/api/payment_intents/confirm)\n- [latest_charge](https://docs.stripe.com/api/charges/object)",
  "metadata": {
    "title": "Migrate to the latest flexible payment scenarios | Stripe Documentation",
    "description": "Adapt your beta advanced payment scenarios to the general release.",
    "sourceURL": "https://docs.stripe.com/payments/flexible-features-migration"
  }
}