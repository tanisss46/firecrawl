{
  "content": "# Connect OAuth reference\n\n## This reference lists available public methods for our OAuth endpoints for Connect.\n\nThe OAuth [Connect](https://docs.stripe.com/connect) flow allows you to\ncustomize the user’s experience by passing additional parameters to Stripe. Some\ncommon examples are explained below, and the rest of the reference lists every\npossible option.\n\n#### Note\n\nAs a platform, remember that data you create for a Standard account (that is,\ncharges, customers, [invoices](https://docs.stripe.com/api/invoices), and so on)\nwill be visible on their Stripe account. This also means if they connect other\nplatforms, those platforms will have access to that data too.\n\nStarting in June 2021, Platforms using OAuth with `read_write` scope won’t be\nable to connect to accounts that are controlled by another platform.\n\n[Extensions](https://docs.stripe.com/building-extensions) won’t experience any\nchanges to how OAuth behaves. Learn more about [OAuth changes for Standard\nPlatforms](https://docs.stripe.com/connect/oauth-changes-for-standard-platforms).\n\n## Common examples\n\n### Prefill fields\n\nProvide the best possible user experience for users who need to create a new\nStripe account by prefilling the account form fields with information you\nalready have, like the user’s email and name. Prefilling has no effect if your\nuser already has a Stripe account. You can’t prefill certain fields, including\nterms of service acceptance and RISA acceptance in Japan.\n\n### Dynamically set the redirect URI\n\nFor security purposes, Stripe redirects a user only to a predefined URI.\nHowever, Connect allows you to define more than one redirect URI, which you can\nuse to further customize the user’s experience. For example, you could redirect\nsome of your users back to **https://sub1.example.com** and others to\n**https://sub2.example.com**.\n\nTo dynamically set the redirect URI:\n\n- In your [platform\nsettings](https://dashboard.stripe.com/settings/connect/onboarding-options/oauth),\nadd each redirect URI.\n- Add a `redirect_uri` parameter to your authorization request and set the value\nto one of your redirect URIs.\n\n```\n\nhttps://connect.stripe.com/oauth/authorize?response_type=code&client_id={{CLIENT_ID}}&scope=read_write&redirect_uri=https://sub2.example.com\n\n```\n\nIf no `redirect_uri` is specified in the URL, then Stripe uses the first URI\nconfigured in your platform settings.\n\n## Authorize the account\n\nFor Standard accounts: GET https://connect.stripe.com/oauth/authorize\n\nSends the user to Stripe to connect to your platform.\n\n### Request\n\nParameterDescription`client_id`The unique identifier provided to your\napplication, found in your [application\nsettings](https://dashboard.stripe.com/settings/connect/onboarding-options/oauth).`response_type`The\nonly option at the moment is code.`redirect_uri`OptionalThe URL for the\nauthorize\n[response](https://docs.stripe.com/connect/oauth-reference#get-authorize-response)\nredirect. If provided, this must exactly match one of the comma-separated\n`redirect_uri` values in your [application\nsettings](https://dashboard.stripe.com/settings/connect/onboarding-options/oauth).\nTo protect yourself from certain forms of man-in-the-middle attacks, the live\nmode `redirect_uri` must use a secure HTTPS connection. Defaults to the\n`redirect_uri` in your application settings if not\nprovided.`scope`OptionalStandard Onlyread_write or read_only, depending on the\nlevel of access you need. Defaults to read_only for Standard accounts. Note\nread_only [can only be specified for\nextensions](https://docs.stripe.com/connect/oauth-changes-for-standard-platforms).\n`state`OptionalAn arbitrary string value we’ll pass back to you, useful for CSRF\nprotection.\nThe following query string parameters are all optional—we use them to prefill\ndetails in the account form for new users. Some prefilled fields (for example,\nURL or product category) might be automatically hidden. Any parameters with\ninvalid values are silently ignored.\n\nNote that some of these parameters apply only to Standard accounts (indicated).\n\nParameterDescription`stripe_user[email]`RecommendedThe user’s email address.\nMust be a valid email format.`stripe_user[url]`RecommendedThe URL for the user’s\nbusiness. This can be the user’s website, a profile page within your\napplication, or another publicly available profile for the business, such as a\nLinkedIn or Facebook profile. It must be URL-encoded and include a scheme (http\nor https). If you prefill this field, include a description of the user’s\nproducts or services and their contact information in the linked page. If we\ndon’t have enough information, we’ll have to reach out to the user directly\nbefore initiating payouts.`stripe_user[country]`Two-letter country code (for\nexample, US or CA). Must be a country that Stripe currently\nsupports.`stripe_user[phone_number]`The business phone number. Must be 10 digits\nonly. Must also prefill `stripe_user[country]` with the corresponding\ncountry.`stripe_user[business_name]`The legal name of the\nbusiness.`stripe_user[business_type]`The type of the business. For Standard\naccounts, the value must be sole_prop, corporation, non_profit, partnership, or\nllc. `stripe_user[first_name]`First name of the person filling out a Stripe\napplication.`stripe_user[last_name]`Last name of the person filling out a Stripe\napplication.`stripe_user[dob_day]` `stripe_user[dob_month]`\n`stripe_user[dob_year]`Day (0-31), month (1-12), and year (YYYY, greater than\n1900) for the birth date of the person filling out a Stripe application. If you\nchoose to pass these parameters, you must pass all\nthree.`stripe_user[street_address]`Standard onlyStreet address of the\nbusiness.`stripe_user[city]`Standard onlyAddress city of the business. To\nprevent ambiguity, also prefill `stripe_user[country]` with the corresponding\ncountry.`stripe_user[state]`Standard onlyAddress state of the business. Must be\nthe two-letter state or province code (for example, NY for a US business or AB\nfor a Canadian one). Must also prefill `stripe_user[country]` with the\ncorresponding country.`stripe_user[zip]`Standard onlyAddress postal code of the\nbusiness. Must be a string. To prevent ambiguity, also prefill\n`stripe_user[country]` with the corresponding\ncountry.`stripe_user[physical_product]`Standard onlyA string: true if the user\nsells a physical product, false otherwise.`stripe_user[product_description]`A\ndescription of what the business is accepting payments\nfor.`stripe_user[currency]`Standard onlyThree-letter [ISO\ncode](http://en.wikipedia.org/wiki/ISO_4217) representing currency, in lowercase\n(for example, usd or cad). Must be a valid country and currency combination that\nStripe supports. Must prefill `stripe_user[country]` with the corresponding\ncountry.`stripe_user[first_name_kana]`The Kana variation of the first name of\nthe person filling out a Stripe application. Must prefill `stripe_user[country]`\nwith JP, as this parameter is only relevant for\nJapan.`stripe_user[first_name_kanji]`The Kanji variation of the first name of\nthe person filling out a Stripe application. Must prefill `stripe_user[country]`\nwith JP, as this parameter is only relevant for\nJapan.`stripe_user[last_name_kana]`The Kana variation of the last name of the\nperson filling out a Stripe application. Must prefill `stripe_user[country]`\nwith JP, as this parameter is only relevant for\nJapan.`stripe_user[last_name_kanji]`The Kanji variation of the last name of the\nperson filling out a Stripe application. Must prefill `stripe_user[country]`\nwith JP, as this parameter is only relevant for Japan.`stripe_user[gender]`The\ngender of the person filling out a Stripe application. (International\nregulations require either male or female.) Must prefill `stripe_user[country]`\nwith JP, as this parameter is only relevant for\nJapan.`stripe_user[block_kana]`Standard onlyThe Kana variation of the address\nblock. This parameter is only relevant for Japan. You must prefill\n`stripe_user[country]` with JP and `stripe_user[zip]` with a valid Japanese\npostal code to use this parameter.`stripe_user[block_kanji]`Standard onlyThe\nKanji variation of the address block. This parameter is only relevant for Japan.\nYou must prefill `stripe_user[country]` with JP and `stripe_user[zip]` with a\nvalid Japanese postal code to use this\nparameter.`stripe_user[building_kana]`Standard onlyThe Kana variation of the\naddress building. This parameter is only relevant for Japan. You must prefill\n`stripe_user[country]` with JP and `stripe_user[zip]` with a valid Japanese\npostal code to use this parameter.`stripe_user[building_kanji]`Standard onlyThe\nKanji variation of the address building. This parameter is only relevant for\nJapan. You must prefill `stripe_user[country]` with JP and `stripe_user[zip]`\nwith a valid Japanese postal code to use this parameter.\n### Response\n\nThe user’s browser is redirected back to your [configured redirect\nURI](https://dashboard.stripe.com/settings/connect/onboarding-options/oauth) or\nthe value you passed in the `redirect_uri` parameter. When successful, you\nreceive the following query parameters:\n\nParameterDescription`code`An authorization code you can use in the next call to\nget an access token for your user. This can only be used once and expires in 5\nminutes.`scope`read_write or read_only, depending what you passed on the initial\nGET request.`state`The value of the `state` parameter you provided on the\ninitial GET request.\n### Error Response\n\nIn case of an error, the user’s browser won’t be redirected except in the case\nof `access_denied`. Instead, errors will be returned in a JSON dictionary with\nthe following fields:\n\nParameterDescription`error`A unique [error\ncode](https://docs.stripe.com/connect/oauth-reference#get-authorize-error-codes)\nper error type.`error_description`A human readable description of the\nerror.`state`The value of the `state` parameter you provided on the initial GET\nrequest.\n### Error Codes\n\nParameterDescription`access_denied`User denied\nauthorization.`invalid_scope`Invalid `scope` parameter\nprovided.`invalid_redirect_uri`Provided `redirect_uri` parameter is an invalid\nURL or isn’t allowed by your [application\nsettings](https://dashboard.stripe.com/settings/connect/onboarding-options/oauth).`invalid_request`Missing\n`response_type` parameter.`unsupported_response_type`Unsupported `response_type`\nparameter. Currently the only supported `response_type` is code.\n## Complete the connection and get the account ID\n\nPOST https://connect.stripe.com/oauth/token\n\nUsed both for turning an `authorization_code` into an account connection, and\nfor getting a new access token using a `refresh_token`.\n\n### Request\n\nMake this call using your secret API key as a `client_secret` POST parameter:\n\n```\ncurl https://connect.stripe.com/oauth/token \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d \"code\"=\"ac_123456789\" \\\n -d \"grant_type\"=\"authorization_code\"\n```\n\nWhen converting an authorization code to an access token, you must use an API\nkey that matches the mode—live or test—of the authorization code (which depends\non whether the `client_id` used was production or development).\n\nWhen using a refresh token to request an access token, you can use either a test\nor live API key to obtain a test or live access token respectively. Any existing\naccess token with the same scope and mode—live or test—is revoked.\n\n#### Note\n\nPer OAuth v2, this endpoint isn’t idempotent. Consuming an authorization code\nmore than once revokes the account connection.\n\nParameterDescription`grant_type`authorization_code when turning an authorization\ncode into an access token, or refresh_token when using a refresh token to get a\nnew access token.`code` or `refresh_token`The value of the `code` or\n`refresh_token`, depending on the `grant_type`.`scope`OptionalWhen requesting a\nnew access token from a refresh token, any scope that has an equal or lesser\nscope as the refresh token. Has no effect when requesting an access token from\nan authorization code. Defaults to the scope of the refresh token.\n### Response\n\nParameterDescription`scope`The scope granted to the access token, depending on\nthe scope of the authorization code and `scope` parameter.`stripe_user_id`The\nunique ID of the account you have been granted access to, as a\nstring.`livemode`Indicates whether the platform’s access to perform updates on\nbehalf of the connected account includes livemode access, or is limited to\ntestmode actions. This matches the livemode of the application used [to\nauthorize the OAuth\nrequest](https://docs.stripe.com/connect/oauth-reference#get-authorize).`token_type`Always\nhas a value of bearer.`access_token`Deprecated Use the `Stripe-Account`\n[header](https://docs.stripe.com/connect/authentication#stripe-account-header)\nwith your platform’s secret key (that can make requests on behalf of this Stripe\naccount).`stripe_publishable_key`Deprecated Use the `Stripe-Account`\n[header](https://docs.stripe.com/connect/authentication#stripe-account-header)\nwith your platform’s publishable key (that can make requests on behalf of this\nStripe account).`refresh_token`Deprecated Can be used to get a new access token\nof an equal or lesser scope, or of a different live mode (where\n[applicable](https://docs.stripe.com/connect/testing#creating-accounts)).\n### Error Response\n\nParameterDescription`error`A unique [error\ncode](https://docs.stripe.com/connect/oauth-reference#post-token-error-codes)\nper error type.`error_description`A human readable description of the error.\n### Error Codes\n\nParameterDescription`invalid_request`No `code`, `refresh_token`, or `grant_type`\nparameter provided (where required).`invalid_grant`A variety of things can\nprompt this error:- `code` doesn’t exist, is expired, has been used, or doesn’t\nbelong to you\n- `refresh_token` doesn’t exist or doesn’t belong to you\n- API key mode (live or test mode) doesn’t match the `code` or `refresh_token`\nmode\n`unsupported_grant_type`Unsupported `grant_type` parameter specified. The only\ncurrently supported types are authorization_code and\nrefresh_token.`invalid_scope`Invalid `scope` parameter\nprovided.`unsupported_response_type`Unsupported `response_type` parameter.\nCurrently the only supported `response_type` is code.APIDashboard\n## Revoke the account’s access\n\nPOST https://connect.stripe.com/oauth/deauthorize\n\nUsed for revoking access to an account.\n\n#### Note\n\nYou can only revoke a Standard account’s access to your platform.\n\n### Request\n\nMake this call using your secret API key as an Authorization header.\n\n```\ncurl https://connect.stripe.com/oauth/deauthorize \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d client_id=\"ca_FkyHCg7X8mlvCUdMDao4mMxagUfhIwXb\" \\\n -d stripe_user_id=acct_ON3nXtRQkhmUIQ\n```\n\nWhen revoking access to an account, you must use an API key that matches the\nmode — live or test — used to connect to the account. Use a live mode API key if\na production `client_id` created the connection, or a test mode API key for a\ndevelopment `client_id`.\n\nParameterDescription`client_id`The `client_id` of the application that you’d\nlike to disconnect the account from. The account must be connected to this\napplication.`stripe_user_id`The account you’d like to disconnect from.\n### Response\n\nParameterDescription`stripe_user_id`The unique ID of the account you have\nrevoked access to, as a string. This is the same as the `stripe_user_id` you\npassed in. If this is returned, the revocation is successful.\n### Error Response\n\nParameterDescription`error`A unique [error\ncode](https://docs.stripe.com/connect/oauth-reference#post-deauthorize-error-codes)\nper error type.`error_description`A human readable description of the error.\n### Error Codes\n\nParameterDescription`invalid_request`No `client_id` or `stripe_user_id`\nparameter provided (where required).`invalid_client`A variety of things can\nprompt this error:- `client_id` doesn’t belong to you\n- `stripe_user_id` doesn’t exist or isn’t connected to your application\n- API key mode (live or test mode) doesn’t match the `client_id` mode\n- `no_deauth_on_controlled_account` the account can’t be disconnected and\ninstead use the [rejection API](https://docs.stripe.com/api/account/reject).\n\n## Links\n\n- [Connect](https://docs.stripe.com/connect)\n- [account types](https://docs.stripe.com/connect/accounts)\n- [invoices](https://docs.stripe.com/api/invoices)\n- [Extensions](https://docs.stripe.com/building-extensions)\n- [OAuth changes for Standard\nPlatforms](https://docs.stripe.com/connect/oauth-changes-for-standard-platforms)\n- [platform\nsettings](https://dashboard.stripe.com/settings/connect/onboarding-options/oauth)\n- [ISO code](http://en.wikipedia.org/wiki/ISO_4217)\n- [header](https://docs.stripe.com/connect/authentication#stripe-account-header)\n- [applicable](https://docs.stripe.com/connect/testing#creating-accounts)\n- [rejection API](https://docs.stripe.com/api/account/reject)",
  "metadata": {
    "title": "Connect OAuth reference | Stripe Documentation",
    "description": "This reference lists available public methods for our OAuth endpoints for Connect.",
    "sourceURL": "https://docs.stripe.com/connect/oauth-reference"
  }
}