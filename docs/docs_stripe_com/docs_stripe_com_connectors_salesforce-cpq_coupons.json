{
  "content": "# Sync Stripe coupons\n\n## Learn how to sync Stripe coupons between Salesforce and Stripe.\n\nThe Stripe Billing Connector for Salesforce CPQ enables you to add configurable,\nstackable coupons to your Stripe subscriptions and subscription items synced\nfrom Salesforce. For example, you can offer your customers a one-time discount\nof 10% off or 50 USD off for the first 3 months of their subscription.\n\n## Assign permission sets\n\nFor coupons to work properly, you must assign the Salesforce user who adds and\nsyncs orders to the Stripe Connector Coupon User permission set. To add a user\nto the permission set, they must have a Salesforce CPQ license.\n\n## Add a coupon to a Salesforce order or order item\n\nThe connector exposes the following custom Salesforce objects that you can use\ntogether to add discounts to your Stripe subscriptions:\n\nSalesforce objectDescriptionQuote Stripe CouponA Salesforce object representing\na Stripe coupon. The `Quote Stripe Coupon` has a one-to-one field mapping with\nthe [Stripe\nCoupon](https://docs.stripe.com/billing/subscriptions/coupons#coupons).Quote\nStripe Coupon AssociationA Salesforce junction object used to correlate a `Quote\nStripe Coupon` to a `Quote`.Quote Line Stripe Coupon AssociationA Salesforce\njunction object used to correlate a `Quote Stripe Coupon` to a `Quote Line`.\nWhen a Salesforce order activates, the connector:\n\n- Identifies any `Quote Stripe Coupon` objects corresponding to the Salesforce\norder or order line\n- Serializes the `Quote Stripe Coupon` onto the corresponding Salesforce order\nor order line\n- Creates (or re-uses where possible) a Stripe coupon for each Salesforce coupon\n- Applies the coupons to the corresponding subscription or subscription item\ncreated in Stripe\n\n## Reuse Stripe coupons\n\nThe connector reuses existing Stripe coupons if multiple orders or order items\nreuse the corresponding Salesforce coupon. Modifying the original Salesforce\ncoupon creates a new Stripe coupon.\n\n## Custom mappings for coupons\n\nSimilar to other native Salesforce objects, you can use the data mapper to map\nthe `Quote Stripe Coupon`. By default, the `Quote Stripe Coupon` is a one-to-one\nfield mapping to the `Stripe Coupon`. You can also add custom metadata to the\n`Quote Stripe Coupon`.\n\n## Custom Apex triggers\n\nThe connector uses custom Apex triggers to serialize the\n`Quote_Stripe_Coupon__c` on the Salesforce order `after update`. If you have\ncustom workflows that modify the `Quote_Stripe_Coupon__c`, make sure the trigger\noccurs `before update` to avoid race conditions between the workflows.\n\n## Multi-currency support\n\nIf you enabled\n[multi-currency](https://help.salesforce.com/s/articleView?id=sf.admin_enable_multicurrency.htm&type=5)\nand you specify an amount off for the coupon, the connector maps the\n`CurrencyIsoCode` on the `Quote Stripe Coupon` to the equivalent [Stripe\ncurrency](https://docs.stripe.com/currencies) during Stripe coupon creation.\n\n## See also\n\n- [Order\namendments](https://docs.stripe.com/connectors/salesforce-cpq/subscription-order-amendments)\n- [Subscription\norders](https://docs.stripe.com/connectors/salesforce-cpq/subscriptions)\n\n## Links\n\n- [Stripe Coupon](https://docs.stripe.com/billing/subscriptions/coupons#coupons)\n-\n[multi-currency](https://help.salesforce.com/s/articleView?id=sf.admin_enable_multicurrency.htm&type=5)\n- [Stripe currency](https://docs.stripe.com/currencies)\n- [Order\namendments](https://docs.stripe.com/connectors/salesforce-cpq/subscription-order-amendments)\n- [Subscription\norders](https://docs.stripe.com/connectors/salesforce-cpq/subscriptions)",
  "metadata": {
    "title": "Sync Stripe coupons | Stripe Documentation",
    "description": "Learn how to sync Stripe coupons between Salesforce and Stripe.",
    "sourceURL": "https://docs.stripe.com/connectors/salesforce-cpq/coupons"
  }
}