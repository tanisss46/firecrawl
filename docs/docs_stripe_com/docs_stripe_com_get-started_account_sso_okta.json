{
  "content": "# Single sign-on with OktaPublic preview\n\n## Learn how to setup single sign-on in the Dashboard with Okta.\n\nStripe supports Single Sign-On (SSO), allowing you to manage your team’s access\nand roles through your identity provider (IdP). This means your team can access\nStripe without needing separate passwords. When SSO is configured, users (team\nmembers) are automatically redirected to your IdP for authentication when they\nsign in to Stripe.\n\nYour IdP verifies if they have a valid role assignment to your Stripe accounts\nor [organization](https://docs.stripe.com/get-started/account/orgs/sso), and\ngenerates a SAML assertion used by Stripe to assign the proper roles in the\nStripe Dashboard. When your account requires SSO, you must update team roles\nthrough your Identity Provider (IdP) for security. Changes to a team member’s\nroles only appear in Stripe after they sign in to the Dashboard again using the\nupdated SAML assertion.\n\n[Verify domain\nownership](https://docs.stripe.com/get-started/account/sso/okta#verify-domain-verification)\nA domain is the portion of an email address after the `@` symbol (such as\n`kavholm.com`). You must configure SSO for Stripe for each of your business’s\nemail domains. To verify domain ownership:\n\n- Navigate to [User\nauthentication](https://dashboard.stripe.com/settings/security/authentication)\nin the Stripe Dashboard, and click **+ New domain** to view your account’s\nunique verification code.\n```\n stripe-verification=4242424242424242424242\n\n```\n- Add the verification code as a `TXT` record to your Domain Name System (DNS)\nprovider.\n- Return to the Stripe Dashboard, and click **Save and verify**. Depending on\nyour DNS provider, it can take 24 hours or more to verify your domain.\n- After successful verification, don’t delete the `TXT` record from your DNS\nprovider. If you delete it, you might lose access to the Dashboard because\nStripe frequently checks the DNS records of your domain.\n\n#### Multiple Stripe accounts support\n\nIf you’re configuring SSO for multiple Stripe accounts, you must create an\n[organization](https://docs.stripe.com/get-started/account/orgs) to centrally\nconfigure SSO across all of your accounts. Alternatively, contact [Stripe\nsupport](https://support.stripe.com/) to verify your domain across separate\naccounts with one shared verification code.\n\n[Create a Stripe app in\nOkta](https://docs.stripe.com/get-started/account/sso/okta#create-app)\nCreate an app in Okta to represent the relationship between the Stripe Dashboard\nand Okta:\n\n- Open and log in to the Okta admin portal.\n- In the left navigation pane, navigate to **Dashboard** > **Applications** >\n**Add Application**.\n- Click **Create App Integration** > **SAML 2.0** > **Next**.\n- Enter an **App name** (for example `Stripe Integration`), then click **Next**.\n- Configure your SAML settings in Okta:- For **Single sign-on URL**, add the\nvalue: `https://dashboard.stripe.com/login/saml/consume`.\n- For **Audience URI**, add the value:\n`https://dashboard.stripe.com/saml/metadata`.\n- For **Name ID format**, select `EmailAddress`.\n- For **Application username**, select `Email`.\n- Next, click **Show Advanced Settings**:- For **Signature Algorithm**, select\n`RSA-SHA256`.\n- For **Digest Algorithm**, select `SHA256`.\n- Click **Next**, then select **This is an internal app that we created** for\n**App type**.\n- Click **Finish**.\n[Assign Stripe roles in\nOkta](https://docs.stripe.com/get-started/account/sso/okta#assign-stripe-roles)\nAssign Stripe roles for your users by creating attribute statements in your\nStripe app in Okta. Stripe roles give users different degrees of access to the\nStripe Dashboard. An attribute statement consists of two components. The `name`\nrepresents the Stripe account where you want to assign roles. The `value`\nrepresents the roles you want to assign to the Stripe account. Users can have\ndifferent roles in a single account or across multiple accounts in an\n[organization](https://docs.stripe.com/get-started/account/orgs/sso).\n\nStripe supports the following roles. Some of these roles are only available if\nyour account uses the applicable Stripe product. For more information, see [User\nroles supported by\nStripe](https://docs.stripe.com/get-started/account/teams/roles).\n\nRoleValueAdministrator`admin`Analyst`analyst`Cardholder`cardholder`Connect\nOnboarding Analyst`connect_onboarding_analyst`Connect Risk\nAnalyst`connect_risk_analyst`Data Migration\nSpecialist`data_migration_specialist`Developer`developer`Dispute\nAnalyst`dispute_analyst`Financial Connections\nSpecialist`financial_connections_specialist`IAM Admin`iam_admin`Identity\nAnalyst`identity_analyst`Identity View only`identity_view_only`Issuing Support\nAgent`issuing_support_agent`Opal View only`opal_view_only`Sandbox\nAdministrator`sandbox_admin`Sandbox User`sandbox_user`Super\nAdministrator`super_admin`Support Associate`support_associate`Support\nCommunications`support_communications`Support only`support_only`Support\nSpecialist`support_specialist`Refund Analyst`refund_analyst`Tax\nAnalyst`tax_analyst`Terminal Specialist`terminal_specialist`Topups\nonly`topups_only`Top-up Specialist`topup_specialist`Transfer\nAnalyst`transfer_analyst`View only`view_only`\n### Create a custom role attribute\n\n- In the left navigation pane, navigate to **Directory** > **Profile Editor**.\n- Click the name of your Stripe app, then click **Add Attribute**.\n- Set **Data type** to `String Array`.\n- For **Display name**, enter `Stripe Roles`.\n- For **Variable name**, enter `stripe_roles`.\n- Select **Define enumerated list of values**, then add an attribute member for\neach Stripe role you want to assign to your users. For example, Display name:\n`Administrator`, Value: `admin`.\n#### Warning\n\nMake sure to assign at least one user or group the `super_admin` role. This\nensures your organization receives important notifications about your account\nhealth. Only users with the Super Admin role can make changes to your account\nstructure, close the account, or change the default bank account.\n- For **Attribute required**, select **Yes**.\n- For **Attribute type**, select **Group**.\n- For **Group Priority**, select **Combine values across groups**. Select this\nif you want to assign a user multiple roles across multiple Stripe accounts.\n- Click **Save**, and copy the variable name of the attribute you created for\nlater use.\n\n!\n\n### Create a group of users\n\n- In the left navigation pane, navigate to **Directory** > **Groups**.\n- Click **Add group**, enter a group name (such as Super Admins in Stripe), then\nclick **Save**.\n- In the group list, click the name of your group, then click **Assign people**.\n- Add users by searching for their first name, primary email address, or\nusername.\n\n### Grant the group access to the Stripe app\n\n- Click the **Applications** tab > **Assign applications**.\n- Next to the name of your Stripe app, click **Assign**.\n- Select any Stripe roles you want to give to the group, then click **Save and\ngo back** > **Done**. This assigns the roles to all the users in this group. All\nthe users in this group can log into Stripe, and their role is automatically set\nto the value you set.\n\n!\n\nIf a user belongs to multiple groups, Okta combines the roles assigned across\nall the groups. For example, if a user belongs to the following groups:\n\n- `IAM Group`\n- `Stripe Admin Group`\n- `Stripe Developer Group`\n\nThen, they’re assigned the roles from all of the groups:\n\n!\n\n### Update the value of your attribute statement\n\n- In the left navigation pane, navigate to **Applications**, then click your\nStripe app.\n- Click the **General** tab > **SAML settings** > **Edit**.\n- In the **Attribute Statements** section, assign a dynamic role to a user:- For\n**Name**, enter the Stripe account ID. Use the format\n`Stripe-Role-<account-id>`. For example, if the account ID is\n`acct_1JgxGwHIzIlFIyZf`, enter the name `Stripe-Role-acct_1JgxGwHIzIlFIyZf`. For\na list of account ids, navigate to the **Accounts** section in your\n[Profile](https://dashboard.stripe.com/settings/user) in the Stripe Dashboard.\n- For **Name format**, select `Basic`.\n- For **Value**, enter `appuser.<variable-name>`. If you didn’t save the\nvariable name, navigate to **Directory** > **Profile Editor**, click your Stripe\napp, and use the variable name next to the applicable attribute. For example,\n`appuser.stripe_roles`.\n- Click **Save**. This tells Okta to send an attribute statement with each\nassertion for the account and role.\n\n### (Optional) Assign roles in multiple Stripe accounts\n\nTo assign roles across multiple Stripe accounts, create a separate attribute\nstatement in your app for each of your accounts.\n\n!\n\n### (Optional) Assign roles in your organization\n\nIf you use [Organizations](https://docs.stripe.com/get-started/account/orgs) to\nunify your business across multiple Stripe accounts, grant team members access\nto your organization by assigning roles in your organization. Remember that\n[organization-level\nroles](https://docs.stripe.com/get-started/account/orgs/team#organization-level-and-account-level-roles)\ngrant access to organization dashboard and as well as all accounts in the\norganization.\n\n- Find your `organization-id` in Stripe by account switching to your\norganizations and navigating to **Settings > Organizations management**.\n- In Okta, in your app’s list of **Attribute Statements**, create an attribute\nstatement using the format `Stripe-Role-<organization-id>`.\n[Configure\nStripe](https://docs.stripe.com/get-started/account/sso/okta#configure-stripe)\nTo configure Stripe with SSO:\n\n### Retrieve the following values from Okta\n\n- Open the Okta admin portal.\n- In the left navigation pane, navigate to **Applications**, then select your\nStripe app.\n- Click the **Sign On** tab > **View SAML Setup Instructions** to open a page\nthat displays the following values:- **Identity provider Issuer**: An identifier\nof your identity provider.\n- **Identity provider single Sign-On URL**: The URL of your identity provider\nthat your users are redirected to, so they can authenticate.\n- **X.509 Certificate**: The X.509 certificate that your identity provider uses\nto sign assertions.\n\n### Configure your Stripe account to connect with Okta\n\n- In the Stripe Dashboard, navigate to **Settings** > **Team and security** >\n[User authentication](https://dashboard.stripe.com/account/user_authentication).\n- Next to the domain name, click the overflow button () > **Manage SSO\nsettings**.\n- Click **Test your configuration** > **Next**.\n- Provide info for your identity provider:\n\n- For **Issuer ID**, enter the value for **Identity provider Issuer** in Okta.\n- For **Identity provider URL**, enter the value for **Identity provider single\nSign-On URL** in Okta.\n- For **Identity provider certificate**, enter the value for **X.509\nCertificate** in Okta.\n- Click **Test configuration** to open a new window to test your configuration.\nExit this window, and return to the original window.\n- If you pass the test, click **Done**.\n\nIf the test fails, refer to [Troubleshoot\nSSO](https://docs.stripe.com/get-started/account/sso/troubleshooting), and\naddress the reported issues in your Stripe app in Okta.\n- Select SSO enforcement. You can choose between **Off**, **Optional**, or\n**Mandatory**. You can change enforcement type in the future.\n- Click **Save settings** > **Done**.\n[Authenticate with\nSSO](https://docs.stripe.com/get-started/account/sso/okta#authenticate-sso)\nAfter you finish configuring SSO, you can inform your users to sign in with any\nof these methods:\n\n### Stripe’s sign in page\n\nUsers can navigate to the [Stripe sign in\npage](https://dashboard.stripe.com/login), enter their email, then select **Use\nsingle sign-on (SSO)**.\n\nIf a user has access to multiple accounts, Stripe authenticates them with the\ndefault account connected to the user. If a user only has access to SAML\nmerchants, or doesn’t have access to any merchants, Stripe redirects them to the\nIdP, regardless of the contents in the password field.\n\n### IdP-initiated login\n\nTo use IdP-initiated login, your [IdP needs to support Service\nProvider-initiated\nlogin](https://docs.stripe.com/get-started/account/sso/troubleshooting). Verify\nif this is possible using your IdP’s documentation.\n\n### SSO URL\n\nUse the following login URL with your domain to directly sign in to your account\nwith SSO. This URL includes the domain and account you want to use for SSO\nauthentication. If you change the account token at the end of the URL, it\nauthenticates you against a different account.\n\n```\n\nhttps://dashboard.stripe.com/login/saml_direct/domain/{{YOUR_DOMAIN}}/merchant/{{STRIPE_ACCOUNT_ID}}\n\n```\n\n#### Support for multiple Stripe accounts\n\nIf you’re configuring SSO for multiple Stripe accounts, first create an\n[organization](https://docs.stripe.com/get-started/account/orgs) to centrally\nconfigure SSO across all of your accounts. You can change the account token at\nthe end of the SSO URL to authenticate against another account. You can find the\nlist of account tokens in the **Accounts** section of your\n[Profile](https://dashboard.stripe.com/settings/user).\n\n**Multiple IdP connections:** If you have multiple Stripe businesses with\nmultiple IdP settings (for example, different SAML endpoints or issuer IDs) but\nshare the same domain, we recommend using login URLs.\n\n## Revoke team member access\n\nYou can revoke a team member’s access using either active or passive methods.\n\n### Actively revoke access with an assertion\n\nSend Stripe an assertion from your identity provider to grant a team member\naccess to specific Stripe accounts. This also lets you revoke a team member’s\naccess. To revoke access for a team member, assign them a role of `none` for the\nStripe account’s access you want to revoke. For example:\n\n```\n<saml2:attribute name=\"Stripe-Role-STRIPE-ACCOUNT-ID\"\nNameFormat=\"urn:oasis:names:tc:SAML:2.0:attrname-format:basic\">\n <saml2:attributevalue>none\n </saml2:attributevalue>\n</saml2:attribute>\n```\n\n#### Caution\n\nYou can’t revoke access for the owner of a Stripe account.\n\n### Passively revoke access with enforcement mode\n\nWhen **enforcement mode** is set to **required**, only team members who can\nauthenticate with your identity provider can access your Stripe account. In\n**required** mode, you can revoke a team member’s access to a Stripe account by\npreventing your identity provider from authenticating them. In the Stripe\nDashboard, set SSO to **required** in [User\nauthentication](https://dashboard.stripe.com/account/user_authentication).\n\n## See also\n\n- [Troubleshoot\nSSO](https://docs.stripe.com/get-started/account/sso/troubleshooting)\n\n## Links\n\n- [organization](https://docs.stripe.com/get-started/account/orgs/sso)\n- [User\nauthentication](https://dashboard.stripe.com/settings/security/authentication)\n- [organization](https://docs.stripe.com/get-started/account/orgs)\n- [Stripe support](https://support.stripe.com/)\n- [User roles supported by\nStripe](https://docs.stripe.com/get-started/account/teams/roles)\n- [Profile](https://dashboard.stripe.com/settings/user)\n- [organization-level\nroles](https://docs.stripe.com/get-started/account/orgs/team#organization-level-and-account-level-roles)\n- [User\nauthentication](https://dashboard.stripe.com/account/user_authentication)\n- [Troubleshoot\nSSO](https://docs.stripe.com/get-started/account/sso/troubleshooting)\n- [Stripe sign in page](https://dashboard.stripe.com/login)",
  "metadata": {
    "title": "Single sign-on with Okta | Stripe Documentation",
    "description": "Learn how to setup single sign-on in the Dashboard with Okta.",
    "sourceURL": "https://docs.stripe.com/get-started/account/sso/okta"
  }
}