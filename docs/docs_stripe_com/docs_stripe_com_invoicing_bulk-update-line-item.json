{
  "content": "# Manage bulk invoice line itemsPublic preview\n\n## Add, update and remove multiple invoice line items with the Invoices API.\n\nYou can edit multiple line items on an invoice by bulk adding, updating, and\nremoving line items with the [Invoices\nAPI](https://docs.stripe.com/api/invoices).\n\n## Create an invoice\n\nTo update an invoice, you need to create one first. You can [create an invoice\nin the Dashboard](https://docs.stripe.com/invoicing/dashboard#create-invoice)or\nwith the [Invoices API](https://docs.stripe.com/api/invoices/create). You can\nonly update invoices in a [draft\nstate](https://docs.stripe.com/invoicing/overview#invoice-lifecycle).\n\n## Add line items\n\nTo create multiple line items on the same invoice, reference the [invoice\nID](https://docs.stripe.com/api/invoices/object#invoice_object-). You can also\nassign a preexisting unassigned invoice item with the [invoice item\nID](https://docs.stripe.com/api/invoiceitems/object#invoiceitem_object-). Here’s\nhow to create two new line items and assign an existing invoice item to this\ninvoice.\n\n```\ncurl https://api.stripe.com/v1/invoices/{{INVOICE_ID}}/add_lines \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d \"lines[0][amount]\"=7500 \\\n -d \"lines[0][currency]\"=\"usd\" \\\n -d \"lines[1][price]\"={{PRICE_ID}} \\\n -d \"lines[1][description]\"=\"New line item\" \\\n -d \"lines[2][invoice_item]\"={{INVOICE_ITEM_1}}\n```\n\n#### Common mistake\n\nEnsure that you are using the invoice item ID, using a line item ID here will\nresult in an error.\n\n## Update line items\n\nFrom here, you can update multiple line items on the same invoice based on the\ninvoice ID and line item IDs like the following:\n\n```\ncurl https://api.stripe.com/v1/invoices/{{INVOICE_ID}}/update_lines \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d \"lines[0][id]\"={{LINE_ITEM_1}} \\\n -d \"lines[0][description]\"=\"New description\" \\\n -d \"lines[0][metadata][key]\"=\"new value\" \\\n -d \"lines[1][id]\"={{LINE_ITEM_2}} \\\n -d \"lines[1][price]\"={{PRICE_ID}} \\\n -d \"lines[2][id]\"={{LINE_ITEM_3}} \\\n -d \"lines[2][discountable]\"=true\n```\n\nThe example above updates the description and metadata for line item 1, the\nprice for line item 2, and whether it’s discountable for line item 3.\n\n## Remove line items\n\nYou can delete or unassign multiple line items on the same invoice by\nreferencing the invoice ID and line item IDs and distinguishing between\ndifferent removal types with the `behavior` key. Here’s how to permanently\ndelete `LINE_ITEM_1` and unassign `LINE_ITEM_2`. You can reassign `LINE_ITEM_2`\nto another invoice in another request.\n\n```\ncurl https://api.stripe.com/v1/invoices/{{INVOICE_ID}}/remove_lines \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d \"lines[0][id]\"={{LINE_ITEM_1}} \\\n -d \"lines[0][behavior]\"=\"delete\" \\\n -d \"lines[1][id]\"={{LINE_ITEM_2}} \\\n -d \"lines[1][behavior]\"=\"unassign\"\n```\n\n## Restrictions\n\nThere are some restrictions when using this feature\n\n- The invoice must still be in a draft state\n- There are two [types of invoice line\nitems](https://docs.stripe.com/api/invoices/line_item#invoice_line_item_object-type)-\n`type: invoiceitem`: Generated when an [invoice\nitem](https://docs.stripe.com/api/invoiceitems) is added to an invoice.\n- `type: subscription`: Automatically generated for a subscription invoice from\neach subscription item. This is the [full list of fields that are\navailable](https://docs.stripe.com/api/invoices/update_lines#bulk_update_lines-lines)\nto update for each line item. While all fields are supported for `invoiceitem`\nline items, you can only update a small subset for `subscription` line items.\nFields that are supported for `subscription` line items are `tax_rates`, or\n`discounts`.\n- You can update a maximum of 50 line items in one API call. This limit is\nsubject to change and might increase or decrease.\n\n## Invoice metadata\n\nYou can set invoice metadata in the same request for any of the above endpoints.\nHere’s an example calling [update_lines](https://docs.stripe.com/api/invoices).\n\n```\ncurl https://api.stripe.com/v1/invoices/{{INVOICE_ID}}/update_lines \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d \"lines[0][id]\"={{LINE_ITEM_1}} \\\n -d \"lines[0][description]\"=\"New description\" \\\n -d \"lines[1][id]\"={{LINE_ITEM_1}} \\\n -d \"lines[2][description]\"=\"Another description\" \\\n -d \"invoice_metadata[is_processed]\"=\"true\"\n```\n\n## Links\n\n- [Invoices API](https://docs.stripe.com/api/invoices)\n- [create an invoice in the\nDashboard](https://docs.stripe.com/invoicing/dashboard#create-invoice)\n- [Invoices API](https://docs.stripe.com/api/invoices/create)\n- [draft state](https://docs.stripe.com/invoicing/overview#invoice-lifecycle)\n- [invoice ID](https://docs.stripe.com/api/invoices/object#invoice_object-)\n- [invoice item\nID](https://docs.stripe.com/api/invoiceitems/object#invoiceitem_object-)\n- [types of invoice line\nitems](https://docs.stripe.com/api/invoices/line_item#invoice_line_item_object-type)\n- [invoice item](https://docs.stripe.com/api/invoiceitems)\n- [full list of fields that are\navailable](https://docs.stripe.com/api/invoices/update_lines#bulk_update_lines-lines)",
  "metadata": {
    "title": "Manage bulk invoice line items | Stripe Documentation",
    "description": "Add, update and remove multiple invoice line items with the Invoices API.",
    "sourceURL": "https://docs.stripe.com/invoicing/bulk-update-line-item"
  }
}