{
  "content": "# Create payment links with Connect\n\n## With Connect, you can create payment links for connected accounts, optionally taking fees in the process.\n\nYou can create [payment links](https://docs.stripe.com/payment-links) for\nconnected accounts, which support [several\napproaches](https://docs.stripe.com/connect/charges) for collecting payments.\nYou can use [direct charges](https://docs.stripe.com/connect/direct-charges) to\ncreate them directly on the connected account. Alternatively, you can create\npayment links on the platform with transfers to the connected account by using\n[destination charges](https://docs.stripe.com/connect/destination-charges). You\ncan also take an application fee on these payment links.\n\n## Create a payment link using direct charges\n\nTo create an payment link that directly charges on a connected account, [create\na payment link](https://docs.stripe.com/api#create_payment_link) while\n[authenticated](https://docs.stripe.com/connect/authentication#stripe-account-header)\nas the connected account. For this to work, you must also create the\n[product](https://docs.stripe.com/api#create_product) and the\n[price](https://docs.stripe.com/api#create_price) on the connected account.\n\n```\ncurl https://api.stripe.com/v1/payment_links \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d \"line_items[0][price]\"={{PRICE_ID}} \\\n -d \"line_items[0][quantity]\"=1\n```\n\nWhen you use direct charges, the connected account is responsible for the cost\nof the Stripe fees, refunds, and chargebacks.\n\n## Create a payment link using destination charges\n\nTo create a payment link that charges on the platform and creates automatic\ntransfers to a connected account, [create a payment\nlink](https://docs.stripe.com/api#create_payment_link) while providing the\nconnected account ID as the `transfer_data[destination]`\n[value](https://docs.stripe.com/api/payment_links/payment_links/object#payment_link_object-transfer_data).\n\n```\ncurl https://api.stripe.com/v1/payment_links \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d \"line_items[0][price]\"={{PRICE_ID}} \\\n -d \"line_items[0][quantity]\"=1 \\\n -d \"transfer_data[destination]\"={{CONNECTED_ACCOUNT_ID}}\n```\n\nFor this to work, you must also create the\n[product](https://docs.stripe.com/api#create_product) and the\n[price](https://docs.stripe.com/api#create_price) on the platform account. When\nusing automatic transfers, the platform is the business of record.\n\nWhen performing destination charges, Payment Links uses the brand settings of\nyour platform account for the payment page. See the [Customize\nbranding](https://docs.stripe.com/connect/payment-links#customize-branding)\nsection for more information.\n\n## Create a payment link using destination charges and on_behalf_of\n\nYou can also create a destination charge with the `on_behalf_of` parameter set\nto the connected account ID (by default, it is the platform). The `on_behalf_of`\nparameter determines the settlement merchant, which affects:\n\n- Whose statement descriptor the end user sees\n- Whose address and phone number the end user sees\n- The settlement currency of the charge\n- The payment page branding the customer sees\n\n```\ncurl https://api.stripe.com/v1/payment_links \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d \"line_items[0][price]\"={{PRICE_ID}} \\\n -d \"line_items[0][quantity]\"=1 \\\n -d on_behalf_of={{CONNECTED_ACCOUNT_ID}} \\\n -d \"transfer_data[destination]\"={{CONNECTED_ACCOUNT_ID}}\n```\n\n## Fulfill orders placed through payment links\n\nAfter an end user pays through a payment link you need to enable your connected\naccounts to handle any fulfillment necessary.\n\nConfigure a [webhook](https://docs.stripe.com/webhooks) endpoint [in the\nDashboard](https://dashboard.stripe.com/account/webhooks).\n\n![Webhooks page in the Stripe\nDashboard](https://b.stripecdn.com/docs-statics-srv/assets/account_webhooks.03b71cec87ef2093fe0caa92e5bfce44.png)\n\nThen create an HTTP endpoint on your server to monitor for completed payments.\nMake sure to replace the endpoint secret key (`whsec_...`) in the example with\nyour key.\n\n```\n# Using Sinatra.\nrequire 'sinatra'\nrequire 'stripe'\n\nset :port, 4242\n\n# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https://dashboard.stripe.com/apikeys\nStripe.api_key = 'sk_test_BQokikJOvBiI2HlWgH4olfQ2'\n\n# If you are testing your webhook locally with the Stripe CLI you\n# can find the endpoint's secret by running `stripe listen`\n# Otherwise, find your endpoint's secret in your webhook settings in\n# the Developer Dashboard\nendpoint_secret = 'whsec_...'\n\npost '/webhook' do\n payload = request.body.read\n sig_header = request.env['HTTP_STRIPE_SIGNATURE']\n\n event = nil\n\n # Verify webhook signature and extract the event.\n # See https://stripe.com/docs/webhooks#verify-events for more information.\n begin\n event = Stripe::Webhook.construct_event(\n payload, sig_header, endpoint_secret\n )\n rescue JSON::ParserError => e\n # Invalid payload.\n status 400\n return\n rescue Stripe::SignatureVerificationError => e\n # Invalid Signature.\n status 400\n return\n end\n\n if event['type'] == 'checkout.session.completed'\n session = event['data']['object']\n connected_account_id = event['account']\n handle_completed_checkout_session(connected_account_id, session)\n end\n\n status 200\nend\n\ndef handle_completed_checkout_session(connected_account_id, session)\n # Fulfill the purchase\n puts 'Connected account ID: ' + connected_account_id\n puts session.to_s\nend\n```\n\nLearn more in our [fulfillment\nguide](https://docs.stripe.com/checkout/fulfillment).\n\n[OptionalCollect application\nfees](https://docs.stripe.com/connect/payment-links#collecting-fees)[OptionalCustomize\nbranding](https://docs.stripe.com/connect/payment-links#customize-branding)[OptionalIntegrate\ntax calculation and\ncollection](https://docs.stripe.com/connect/payment-links#connect-tax)\n\n## Links\n\n- [Connect](https://docs.stripe.com/connect)\n- [payment links](https://docs.stripe.com/payment-links)\n- [several approaches](https://docs.stripe.com/connect/charges)\n- [direct charges](https://docs.stripe.com/connect/direct-charges)\n- [destination charges](https://docs.stripe.com/connect/destination-charges)\n- [create a payment link](https://docs.stripe.com/api#create_payment_link)\n-\n[authenticated](https://docs.stripe.com/connect/authentication#stripe-account-header)\n- [product](https://docs.stripe.com/api#create_product)\n- [price](https://docs.stripe.com/api#create_price)\n-\n[value](https://docs.stripe.com/api/payment_links/payment_links/object#payment_link_object-transfer_data)\n- [Customize\nbranding](https://docs.stripe.com/connect/payment-links#customize-branding)\n- [webhook](https://docs.stripe.com/webhooks)\n- [in the Dashboard](https://dashboard.stripe.com/account/webhooks)\n- [https://dashboard.stripe.com/apikeys](https://dashboard.stripe.com/apikeys)\n-\n[https://stripe.com/docs/webhooks#verify-events](https://stripe.com/docs/webhooks#verify-events)\n- [fulfillment guide](https://docs.stripe.com/checkout/fulfillment)",
  "metadata": {
    "title": "Create payment links with Connect | Stripe Documentation",
    "description": "With Connect, you can create payment links for connected accounts, optionally taking fees in the process.",
    "sourceURL": "https://docs.stripe.com/connect/payment-links"
  }
}