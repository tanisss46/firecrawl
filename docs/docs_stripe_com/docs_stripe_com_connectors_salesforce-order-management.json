{
  "content": "# Stripe Connector for Salesforce Order ManagementDeprecated\n\n## Learn about the Stripe Connector for Salesforce Order Management.\n\n#### Note\n\nFor integrating with Salesforce CRM, Core, and Platform, we recommend using the\n[Stripe Connector for Salesforce\nPlatform](https://docs.stripe.com/connectors/stripe-connector-for-salesforce/overview).\n\nThe Stripe Connector for Salesforce Order Management is a managed package that\nyou install on top of Order Management to enable payment capture and refund for\nthe order servicing supported use cases. It comes with both an asynchronous and\nsynchronous adapter to handle payments and refunds.\n\n## Before you begin\n\n- A storefront hosted on Salesforce B2C Commerce Cloud and Salesforce Order\nManagement on the Salesforce Core Platform.\n- Salesforce Commerce Cloud cartridge for collecting payments with Stripe *or*\nSalesforce payments on Commerce Cloud.\n- An integration enabled between SalesforceB2C Commerce Cloud and Salesforce\nOrder Management.\n- Access to CommercePayments API enabled by the PaymentPlatform org permission.\n- Salesforce CommercePayments is only available for orgs with API version 49.0\nand later. Commerce Payments is only available in the Lightning Experience.\n\n## Core concepts\n\n### PaymentIntent\n\nA PaymentIntent is a Stripe term that refers to a transaction created at Stripe\nto track a payment from creation through the checkout process, which might\ntrigger additional authentication steps. You do this by implementing the\n[Payment Intents API](https://docs.stripe.com/payments/payment-intents). Locate\nthe payment intent in Salesforce Order Management by locating the Gateway\nReference Number (`GatewayRefNumber`) field against the payment authorization\nrecord for an order summary.\n\n### Payment authorization\n\nA payment authorization is relevant to both Stripe and the Salesforce OMS. An\nauthorized amount is a sum that a business transmits to a credit or debit card\nprocessor to make sure a customer has sufficient funds to complete a\npurchase—the approved amount of money to be charged.\n\nThere are two [capture\nmodes](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-capture_method)\nin the Stripe LINK cartridge for Salesforce B2C Commerce Cloud—authorize and\ncapture. If the LINK cartridge is set up to authorize a payment during checkout,\nthen Salesforce Order Management creates a payment authorization record. You can\nview the payment authorization against an order summary using this route:\n\n**Order Summary Record > Order Payment Summary Record > Payment Authorizations\nin Related Tab**\n\nIf you don’t see `Refunds` in the **Related** tab, contact your Salesforce\nadministrator and include the payment authorization related list in the page\nlayout (as shown):\n\n!\n\nThe PaymentIntent ID (pi_XXXXXX) at Stripe is stored in the Gateway Reference\nNumber (`GatewayRefNumber`) field of the payment authorization record. The\nProcessing Mode (`ProcessingMode`) is set as `External`, which implies that the\npayment authorization was processed outside the Salesforce payment platform.\n\n### Payment\n\nIf the capture mode in the Stripe LINK cartridge is set to `Capture`, then the\npayment is captured from the customer. In this case, a payment record is created\nin Salesforce Order Management. You can view the payment against an order\nsummary using this route:\n\n**Order Summary Record > Order Payment Summary Record > Payments in Related\nTab**\n\nIf you don’t see `Refunds` in the **Related** tab, contact your Salesforce\nadministrator and include the payments related list in the page layout (as\nshown):\n\n!\n\n### Balance Transaction ID\n\nThe Balance Transaction ID (`txn_XXXXXXXXX`) against the PaymentIntent\n(`pi_XXXXXX`) at Stripe is stored in the Gateway Reference Number\n(`GatewayRefNumber`) field. The Processing Mode (`ProcessingMode`) field value\nis set as `External`, which means the payment was processed outside the\nSalesforce payment platform. In the event the payment was authorized in\nSalesforce B2C Commerce Cloud Storefront, and the amount was captured in\nSalesforce OMS later, the payment record is represented as shown:\n\n!\n\nThe Salesforce Payment Gateway ID (`SFXXXXX`) against the Payment Intent\n(`pi_XXXXXX`) at Stripe is stored in the Gateway Reference Number\n(`GatewayRefNumber`) field. The Processing Mode (`ProcessingMode`) field value\nis set as `Salesforce`, which implies that the payment was processed by the\nSalesforce payment platform.\n\n### Refund\n\nIf a refund is initiated from Salesforce OMS, you can trace it to a Refund\nrecord by following this route:\n\n**Order Summary Record > Order Payment Summary Record > Refunds (in the Related\ntab)**\n\nIf you don’t see `Refunds` in the **Related** tab, contact your Salesforce\nadministrator and include the Refunds related list in the page layout (as\nshown):\n\n!\n\nThe Salesforce Payment Gateway ID (`SFXXXXX`) is stored in the Gateway Reference\nNumber (`GatewayRefNumber`) field. The Processing Mode (ProcessingMode) is set\nas `Salesforce`, which implies that the refund was processed by the Salesforce\npayment platform.\n\n### Payment gateway logs\n\nYou can view logs for the transactions made with the Salesforce Platform by\nnavigating to **Order Summary Record > Order Payment Summary Record > Gateway\nLogs** in the **Related** tab. If you don’t see the gateway logs in the\n**Related** tab, contact your Salesforce administrator and include the gateway\nlogs in the related page layout, or execute this SOQL in Developer Console or\nSOQL Builder in VS Code:\n\n```\nSELECT Id, OrderPaymentSummaryId, ReferencedEntityId, Request, Response,\nSfRefNumber, SfResultCode, GatewayRefNumber, GatewayAuthCode, GatewayDate,\nGatewayMessage, GatewayResultCode, GatewayResultCodeDescription,\nInteractionStatus FROM PaymentGatewayLog\n```\n\n## See also\n\n- [Component\nOverview](https://docs.stripe.com/connectors/salesforce-order-management/overview)\n- [Installation\nGuide](https://docs.stripe.com/connectors/salesforce-order-management/installation)\n- [Operations and\nMaintenance](https://docs.stripe.com/connectors/salesforce-order-management/operations-and-maintenance)\n-\n[Testing](https://docs.stripe.com/connectors/salesforce-order-management/testing)\n\n## Links\n\n- [Stripe Connector for Salesforce\nPlatform](https://docs.stripe.com/connectors/stripe-connector-for-salesforce/overview)\n- [Payment Intents API](https://docs.stripe.com/payments/payment-intents)\n- [capture\nmodes](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-capture_method)\n- [Component\nOverview](https://docs.stripe.com/connectors/salesforce-order-management/overview)\n- [Installation\nGuide](https://docs.stripe.com/connectors/salesforce-order-management/installation)\n- [Operations and\nMaintenance](https://docs.stripe.com/connectors/salesforce-order-management/operations-and-maintenance)\n-\n[Testing](https://docs.stripe.com/connectors/salesforce-order-management/testing)",
  "metadata": {
    "title": "Stripe Connector for Salesforce Order Management | Stripe Documentation",
    "description": "Learn about the Stripe Connector for Salesforce Order Management.",
    "sourceURL": "https://docs.stripe.com/connectors/salesforce-order-management"
  }
}