{
  "content": "# Add external payment methods to the payment form\n\n## Display non-Stripe payment methods inside the PaymentElement.\n\nThe Stripe PaymentElement can display a number of [external payment\nmethods](https://docs.stripe.com/payments/external-payment-methods?platform=web#available-external-payment-methods).\nWe define an external payment method as one that isn’t integrated with your\nStripe Dashboard. Instead, you redirect your customer to an external URL for\npayment collection. All transactions happen outside Stripe, without any\nknowledge about their amount, currency, status, and so on. These payments don’t\ndisplay anywhere in your Stripe Dashboard. Stripe collects no payment fees when\nsuch a transaction takes place.\n\nWhen payments are collected externally, no reconciliation happens between the\nMagento order and the external payment. The order remains in Pending Payment\nstatus and without and payment status details. This means that you also need to\nimplement some reconciliation as well.\n\nStripe doesn’t provide any guidelines on how to reconcile external payments with\nMagento orders. To implement reconciliation, contact the external payment\nmethod’s support team for their specific integration guides.\n\nIn this guide, we only describe how to enable external payment methods and\ndisplay them on your checkout page. When the customer clicks the Place Order\nbutton, they’re redirected to an external URL which you specify for the external\npayment method.\n\n## Create a new module\n\nCreate a new module with the following directory structure. Replace `Vendor`\nwith your preferred vendor name.\n\n```\napp/code/Vendor/StripeCustomizations/\n├── etc/\n│ ├── module.xml\n│ └── di.xml\n├── Plugin/\n│ └── Helper/\n│ └── PaymentMethodPlugin.php\n├── registration.php\n\n```\n\nInside `registration.php`, register your module with Magento.\n\n```\n<?php\n\\Magento\\Framework\\Component\\ComponentRegistrar::register(\n \\Magento\\Framework\\Component\\ComponentRegistrar::MODULE,\n 'Vendor_StripeCustomizations',\n __DIR__\n);\n```\n\nInside `etc/module.xml`, define the module and set up dependencies to make sure\nit loads after the Stripe module.\n\n```\n<?xml version=\"1.0\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:noNamespaceSchemaLocation=\"urn:magento:framework:Module/etc/module.xsd\">\n <module name=\"Vendor_StripeCustomizations\" setup_version=\"1.0.0\">\n <sequence>\n <module name=\"StripeIntegration_Payments\"/>\n </sequence>\n </module>\n</config>\n```\n\nInside `etc/di.xml`, define the following plugin:\n\n```\n<?xml version=\"1.0\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:noNamespaceSchemaLocation=\"urn:magento:framework:ObjectManager/etc/config.xsd\">\n <type name=\"StripeIntegration\\Payments\\Helper\\PaymentMethod\">\n <plugin\n name=\"vendor_stripecustomizations_helper_paymentmethod_plugin\"\n type=\"Vendor\\StripeCustomizations\\Plugin\\Helper\\PaymentMethodPlugin\"\n sortOrder=\"10\"\n disabled=\"false\" />\n </type>\n</config>\n```\n\nInside `Plugin/Helper/PaymentMethodPlugin.php`, create the an afterMethod\ninterceptor:\n\n```\n<?php\n\nnamespace Vendor\\Module\\Plugin;\n\nclass PaymentMethodPlugin\n{\n public function afterGetExternalPaymentMethods(\n \\StripeIntegration\\Payments\\Helper\\PaymentMethod $subject,\n array $result,\n $quote\n ): array {\n // Add custom payment method to the array\n $result[] = [\n 'code' => 'external_payment_method_code',\n'redirect_url' =>\n\"https://example.com/checkout?merchant=stripeintegration&amount=\" .\n$quote->getGrandTotal() * 100\n ];\n\n return $result;\n }\n}\n```\n\nEnable the module:\n\n```\nphp bin/magento module:enable Vendor_StripeCustomizations\nphp bin/magento setup:upgrade\nphp bin/magento cache:clean\nphp bin/magento cache:flush\n\n```\n\n## Links\n\n- [external payment\nmethods](https://docs.stripe.com/payments/external-payment-methods?platform=web#available-external-payment-methods)\n-\n[http://www.w3.org/2001/XMLSchema-instance](http://www.w3.org/2001/XMLSchema-instance)\n-\n[https://example.com/checkout?merchant=stripeintegration&amount=](https://example.com/checkout?merchant=stripeintegration&amount=)",
  "metadata": {
    "title": "Add external payment methods to the payment form | Stripe Documentation",
    "description": "Display non-Stripe payment methods inside the PaymentElement.",
    "sourceURL": "https://docs.stripe.com/connectors/adobe-commerce/cookbooks/external-payment-methods"
  }
}