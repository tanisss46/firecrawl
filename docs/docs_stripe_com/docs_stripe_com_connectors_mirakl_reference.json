{
  "content": "# Mirakl reference\n\n## Default settings for Miraki connector events.\n\n## Scheduled jobs\n\n### Onboarding\n\n```\nphp bin/console connector:sync:onboarding -q 2>&1\n```\n\n- Default setting: every minute.\n- Recommended setting: as often as possible.\n- Description: fetch newly created Mirakl shops and add the onboarding link to\ntheir Mirakl back office.\n- Documentation: [Onboarding\nworkflow](https://docs.stripe.com/connectors/mirakl/onboarding-sellers).\n\n### Payment validation\n\n```\nphp bin/console connector:validate:pending-debit -q 2>&1\n```\n\n- Default setting: every 5 minutes.\n- Recommended setting: < 1 hour.\n- Description: fetch newly accepted Mirakl orders, validate the payment on\nMirakl, and capture it on Stripe.\n- Documentation: [Payment validation\nworkflow](https://docs.stripe.com/connectors/mirakl/payments#payment-validation).\n\n### Payment split\n\n```\nphp bin/console connector:dispatch:process-transfer -q 2>&1\n```\n\n- Default setting: every 5 minutes.\n- Recommended setting: < 1 hour.\n- Description: fetch newly debited Mirakl orders and create Stripe Transfers\nfrom the operator to the seller.\n- Documentation: [Payment split\nworkflow](https://docs.stripe.com/connectors/mirakl/payments#payment-split).\n\n### Payment refund\n\n```\nphp bin/console connector:dispatch:process-refund -q 2>&1\n```\n\n- Default setting: every 5 minutes.\n- Recommended setting: < 1 hour.\n- Description: fetch pending Mirakl refunds, create the refund on Stripe,\nvalidate it on Mirakl, and reverse the initial transfer.\n- Documentation: [Payment refund\nworkflow](https://docs.stripe.com/connectors/mirakl/payments#payment-refund).\n\n### Payout\n\n```\nphp bin/console connector:dispatch:process-payout -q 2>&1\n```\n\n- Default setting: every day at 1am.\n- Recommended setting: synchronized with your Mirakl billing cycles.\n- Description: fetch newly created Mirakl\n[invoices](https://docs.stripe.com/api/invoices) and create Stripe Transfers and\n[Payouts](https://docs.stripe.com/payouts).\n- Documentation: [Payouts\nworkflow](https://docs.stripe.com/connectors/mirakl/payouts#seller-settlement).\n\n### Alerting\n\n```\nphp bin/console connector:notify:failed-operation -q 2>&1\n```\n\n- Default setting: every day at 8am.\n- Recommended setting: according to your preference.\n- Description: if\n[enabled](https://docs.stripe.com/connectors/mirakl/configuration#alerting),\nsend an email with all the failed transfers, refunds, and payouts.\n\n## Notification\n\nIf [enabled](https://docs.stripe.com/connectors/mirakl/configuration#alerting),\nthe connector sends server to server notifications in the following events.\n\n#### Note\n\nIf your endpoint is unreachable or returns an error, an email is sent to your\n`TECHNICAL_ALERT_EMAIL`.\n\n### Account updated\n\nA Stripe connected account was updated by the seller or Stripe.\n\n```\n{\n \"type\": \"account.updated\",\n \"payload\": {\n \"miraklShopId\": 2000,\n \"stripeUserId\": \"acct_1032D82eZvKYlo2C\"\n }\n}\n```\n\n### Transfer failed\n\nA transfer failed during the [payment split\njob](https://docs.stripe.com/connectors/mirakl/reference#payment-split) or the\n[payout job](https://docs.stripe.com/connectors/mirakl/reference#payout).\n\n```\n{\n \"type\": \"transfer.failed\",\n \"payload\": {\n \"internalId\": 5,\n \"miraklId\": 123,\n \"type\": \"TRANSFER_ORDER\",\n \"stripeAccountId\": \"acct_1032D82eZvKYlo2C\",\n \"miraklShopId\": 2003,\n \"transferId\": null,\n \"transactionId\": null,\n \"amount\": 3400,\n \"status\": \"TRANSFER_FAILED\",\n \"failedReason\": \"Reason message\",\n \"currency\": \"EUR\"\n }\n}\n```\n\n### Refund failed\n\nA refund failed during the [payment refund\njob](https://docs.stripe.com/connectors/mirakl/reference#payment-refund) job.\n\n```\n{\n \"type\": \"refund.failed\",\n \"payload\": {\n \"internalId\": 5,\n \"miraklOrderId\": \"order_refunded_5\",\n \"miraklRefundId\": \"1100\",\n \"stripeRefundId\": null,\n \"stripeReversalId\": \"trr_10\",\n \"amount\": 3400,\n \"status\": \"REFUND_FAILED\",\n \"failedReason\": \"Reason message\",\n \"currency\": \"EUR\"\n }\n}\n```\n\n### Payout failed\n\nA payout failed during the [payout\njob](https://docs.stripe.com/connectors/mirakl/reference#payout).\n\n```\n{\n \"type\": \"payout.failed\",\n \"payload\": {\n \"internalId\": 12,\n \"amount\": 2300,\n \"currency\": \"EUR\",\n \"miraklInvoiceId\": 2000,\n \"stripePayoutId\": null,\n \"status\": \"PAYOUT_FAILED\",\n \"failedReason\": \"Reason message\",\n }\n}\n```\n\n## Links\n\n- [Onboarding\nworkflow](https://docs.stripe.com/connectors/mirakl/onboarding-sellers)\n- [Payment validation\nworkflow](https://docs.stripe.com/connectors/mirakl/payments#payment-validation)\n- [Payment split\nworkflow](https://docs.stripe.com/connectors/mirakl/payments#payment-split)\n- [Payment refund\nworkflow](https://docs.stripe.com/connectors/mirakl/payments#payment-refund)\n- [invoices](https://docs.stripe.com/api/invoices)\n- [Payouts](https://docs.stripe.com/payouts)\n- [Payouts\nworkflow](https://docs.stripe.com/connectors/mirakl/payouts#seller-settlement)\n- [enabled](https://docs.stripe.com/connectors/mirakl/configuration#alerting)",
  "metadata": {
    "title": "Mirakl reference | Stripe Documentation",
    "description": "Default settings for Miraki connector events.",
    "sourceURL": "https://docs.stripe.com/connectors/mirakl/reference"
  }
}