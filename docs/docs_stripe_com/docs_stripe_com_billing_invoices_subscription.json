{
  "content": "# Subscription invoices\n\n## Learn how to manage subscription invoices.\n\n[Invoices](https://docs.stripe.com/api/invoices) are core resources in Stripe,\nrepresenting the amount a customer owes. Stripe generates an invoice for every\nperiod in a\n[subscription](https://docs.stripe.com/billing/subscriptions/creating) billing\ncycle period. You can also manually generate invoices through the Dashboard or\nAPI for off-cycle or one-time payments. Read the guides to learn more about the\nlifecycle for [standalone\ninvoices](https://docs.stripe.com/invoicing/overview#invoice-lifecycle) and\n[subscription-generated\ninvoices](https://docs.stripe.com/billing/subscriptions/overview#invoice-lifecycle).\n\n## Subscription invoice lifecycle\n\nThe following sections describe how Stripe handles an invoice throughout a\nsubscription lifecycle.\n\n### New subscription invoices\n\nWhen you subscribe a customer, Stripe:\n\n- Creates an invoice.\n-\n[Finalizes](https://docs.stripe.com/invoicing/integration/workflow-transitions#finalized)\nthe invoice.\n\nIf the payment succeeds on a subscription’s first invoice or the invoice doesn’t\nrequire payment, the invoice transitions to\n[status=paid](https://docs.stripe.com/api/invoices/object#invoice_object-status),\nand the subscription becomes active.\n\nUntil the payment succeeds, the invoice\n[status](https://docs.stripe.com/api/invoices/object#invoice_object-status)\nremains `open` and\n[auto_advance](https://docs.stripe.com/invoicing/integration/automatic-advancement-collection#toggle-auto-advance)\nremains `false`. The subscription\n[status](https://docs.stripe.com/api/subscriptions/object#subscription_object-status)\nremains `incomplete`. Learn how to resolve payment failures for new subscription\ninvoices that [require a payment\nmethod](https://docs.stripe.com/billing/subscriptions/overview#requires-payment-method).\n\nIn some cases, upgrading or downgrading the subscription also creates a new\ninvoice. We turn off\n[auto_advance](https://docs.stripe.com/invoicing/integration/automatic-advancement-collection#toggle-auto-advance)\nfor these invoices from the outset.\n\nWith a finalized invoice, you can’t add invoice items or make other\nmodifications that affect the amount due. However, you can still add invoice\nitems to the customer. The added items apply to the next invoice.\n\n### Subscription renewal invoices\n\nWhen subscriptions renew, Stripe:\n\n- Creates an invoice.\n- Leaves the invoice in a `draft` state for about an hour.\n- Attempts to finalize and pay the invoice with the default payment method.\n- Changes the invoice status to `paid` if payment succeeds.\n\nWhen Stripe creates an invoice, you receive an `invoice.created` event at your\nconfigured [webhook\nendpoint](https://docs.stripe.com/billing/subscriptions/webhooks). In this case,\nthe attribute of the invoice\n[status](https://docs.stripe.com/api/invoices/object#invoice_object-status) is\n`draft`, which means that its invoice items are open for modification.\n\n### Collect payment\n\nWhen an invoice is due, Stripe tries to collect payment by either [automatically\ncharging](https://docs.stripe.com/invoicing/automatic-charging) the [payment\nmethod](https://docs.stripe.com/payments/payment-methods/integration-options) on\nfile, or [emailing the\ninvoice](https://docs.stripe.com/invoicing/integration#accept-invoice-payment)\nto customers.\n\n#### Retry payments\n\nStripe offers several options for dealing with [failed\npayments](https://docs.stripe.com/invoicing/automatic-collection), including\nmachine-learning powered [Smart\nRetries](https://docs.stripe.com/invoicing/automatic-collection#smart-retries).\n\n## Manage subscription invoices\n\nDashboardAPI\nThe following sections describe how to perform basic actions on invoices in the\nDashboard. For more options around using invoices, see [Managing\ninvoices](https://docs.stripe.com/invoicing/dashboard/manage-invoices).\n\n### Create an invoice\n\nStripe automatically creates an invoice for subscriptions at the end of each\nbilling cycle.\n\nLearn how to [create a one-off\ninvoice](https://docs.stripe.com/invoicing/dashboard#create-invoice).\n\nStripe finalizes and sends the invoice in 1 hour. Before the invoice is\nfinalized, you can edit it. Read more about making changes in the [Invoice\ndetails\npage](https://docs.stripe.com/invoicing/dashboard/manage-invoices#invoice-details-page).\n\n### Preview upcoming invoices\n\nThe [Retrieve an invoice](https://docs.stripe.com/api#retrieve_invoice) API\nprovides a mechanism for viewing an existing invoice. Stripe also provides an\nendpoint for [retrieving an upcoming\ninvoice](https://docs.stripe.com/api#upcoming_invoice). This preview reflects\nthe base price, pending invoice items, discounts, and any existing customer\ncredit balance.\n\nWhen fetching the preview, you can also model what the invoice would look like\nif you changed the subscription in one of these ways:\n\n- Swapping the underlying price.\n- Altering the quantity.\n- Applying a trial period.\n- Adding a coupon.\n\n## Update the first invoice of a subscription\n\nHow you edit the first invoice of a subscription depends on the setting for the\ncustomer’s payment method for the subscription. If unsure, you can check the\npayment method setting using the API or the Dashboard.\n\nTo check subscription payment method using the API, check the value of\n[collection_method](https://docs.stripe.com/api/subscriptions/object#subscription_object-collection_method)\non the `Subscriptions` object for the customer. A value of `send_invoice` means\nStripe emails the customer their invoice. A value of `charge_automatically`\nmeans Stripe charges the customer on your behalf using their default payment\nmethod.\n\nTo check subscription payment method in the Dashboard, open the [Subscriptions\npage](https://dashboard.stripe.com/subscriptions). Then, click the subscription\nyou want to check to open it’s detailed view. In the **Subscription details**\nsection, the **Billing method** field value defines the payment method: **Charge\ndefault payment method** or **Send invoice**.\n\nSend invoiceCharge default payment method\nFor customers that receive invoices, you have a one hour period after creation\nbefore Stripe finalizes the subscription. Within this timeframe you can make\nnecessary changes to the subscription, like changing amount or line items,\nadding a description or metadata, and so on.\n\nAfter the initial hour, you can no longer make updates. Stripe emails the\ninvoice to the customer to collect subscription payment.\n\n## Customize invoices\n\nYou can customize invoices in several ways, including:\n\n- [Add extra items to a future\ninvoice](https://docs.stripe.com/billing/invoices/subscription#adding-upcoming-invoice-items)\n- [Increase the frequency of\ninvoices](https://docs.stripe.com/billing/invoices/subscription#pending-items-frequently)\n- [Add items to a customer’s first\ninvoice](https://docs.stripe.com/billing/invoices/subscription#first-invoice-extra)\n- [Add items to a draft subscription\ninvoice](https://docs.stripe.com/billing/invoices/subscription#adding-draft-invoice-items)\n- [Generate an invoice outside of the subscription\ncycle](https://docs.stripe.com/billing/invoices/subscription#generating-invoices)\n- [Pause a subscription invoice for\nreview](https://docs.stripe.com/billing/invoices/subscription#holding-review)\n- [Issue a subscription invoice with configurable item\nprices](https://docs.stripe.com/billing/invoices/subscription#invoice-item-prices)\n\n### Add extra invoice items to a future invoice\n\nYou can add up to 250 invoice items to an invoice. To [add extra invoice\nitems](https://docs.stripe.com/api/invoiceitems/create) to the next invoice in\nthe cycle:\n\n```\ncurl https://api.stripe.com/v1/invoiceitems \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d price=price_CBb6IXqvTLXp3f \\\n -d customer=cus_4fdAW5ftNQow1a\n```\n\nThese one-off items are added to the next invoice created for this customer. To\nmake sure this is added to a specific subscription, use the optional\n`subscription` parameter to apply it to that subscription.\n\n#### Invoice pending items more frequently\n\nOther than [changing the billing\ncycle](https://docs.stripe.com/billing/subscriptions/billing-cycle), there are a\nfew ways to invoice these items without adjusting the normal subscription cycle:\n\n- Create a [one-off invoice](https://docs.stripe.com/invoicing/dashboard) for\nthe customer.\n- Charge a subscription whenever the amount due reaches a\n[threshold](https://docs.stripe.com/billing/subscriptions/usage-based/alerts-and-thresholds#billing-thresholds).\n- Use\n[pending_invoice_item_interval](https://docs.stripe.com/api/subscriptions/object#subscription_object-pending_invoice_item_interval)\nto specify an interval for how often to bill for any pending invoice items. This\nis equivalent to having Stripe create a [one-off\ninvoice](https://docs.stripe.com/invoicing/dashboard) for the subscription on a\nrecurring basis.\n\n### Add an extra charge on a subscription’s first invoice\n\nInclude a one-time charge to the first subscription invoice using\n`add_invoice_items`:\n\n```\ncurl https://api.stripe.com/v1/subscriptions \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d \"items[0][price]\"={{RECURRING_PRICE_ID}} \\\n -d \"add_invoice_items[0][price]\"={{PRICE_ID}} \\\n -d payment_behavior=default_incomplete\n```\n\n#### Caution\n\nIf you’re using [Checkout](https://docs.stripe.com/payments/checkout) to create\nsubscriptions, add extra charges by specifying\n[line_items](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-line_items)\nwith the [client and server\nintegration](https://docs.stripe.com/billing/subscriptions/build-subscriptions).\n\n### Add invoice items to a draft subscription invoice\n\nWhen a subscription renews and creates an invoice, Stripe sends the\n`invoice.created` [webhook](https://docs.stripe.com/webhooks) event. Stripe\n[waits approximately one\nhour](https://docs.stripe.com/billing/subscriptions/webhooks#understand) before\nfinalizing the invoice and attempting payment, or sending an email.\n\nDuring that delay, the invoice is a\n[draft](https://docs.stripe.com/api/invoices/object#invoice_object-status) and\nis editable. You can [create invoice\nitems](https://docs.stripe.com/api/invoiceitems/create) on that invoice. Make\nsure to provide the\n[invoice](https://docs.stripe.com/api/invoiceitems/create#create_invoiceitem-invoice)\nparameter when you create these invoice items. Otherwise, they’re added as\npending items and are included in the next subscription period.\n\nThese invoice items behave slightly differently than invoice items automatically\ngenerated by Stripe:\n\n- Pending invoice items are always charged when the billing period ends for any\ncanceled subscription. Canceling a customer’s subscription prevents them from\nbeing billed again *if no invoice items exist*.\n- Pending invoice items aren’t prorated when a customer’s subscription changes.\n\nIf pending invoice items remain after a subscription cancels, Stripe generates\nan invoice and attempts to bill the customer for them at the end of the next\nbilling period. These invoice items are (similarly) not prorated when a\nsubscription changes.\n\n#### Manage pending invoice items\n\nYou can see a customer’s pending invoice items by navigating to the [Customers\npage](https://dashboard.stripe.com/customers), and clicking on their name. If\nthe customer has a pending invoice item, it appears under **Pending invoice\nitems**. An invoice item appears as pending if it’s not attached to any invoice.\n\nUnder **Pending invoice items**, you can also choose to create a new invoice\nitem, or instantly invoice everything listed. When you click **Invoice now**, a\ndialog appears that lets you select whether to charge the default source or\nemail the invoice to the customer. Additionally, the dialog gives you the option\nto calculate tax automatically.\n\n### Generate an invoice for subscription items outside the billing cycle\n\nYou can invoice pending invoice items outside of the regular billing cycle by\n[generating a one-off invoice](https://docs.stripe.com/invoicing/dashboard).\nGenerating a one-off invoice pulls in any pending invoice items that would have\nbeen added to the regularly scheduled invoice.\n\n#### Caution\n\nWhen you manually generate an invoice, Stripe does not apply the [tax\nrates](https://docs.stripe.com/billing/taxes) you may have established on the\nsubscription. If taxes should apply, you must explicitly [add the tax\nrates](https://docs.stripe.com/invoicing/taxes/tax-rates) to the invoice.\n\n### Pause a subscription invoice for review\n\nRather than automatically attempting payment at the end of a billing period, you\ncan pause the invoice for review or corrections. To pause an invoice:\n\n- Pause automatic collection within one hour of receiving the `invoice.created`\nevent. You can do this by setting `auto_advance=false` in the API, or by going\nto [Subscriptions and\nemails](https://dashboard.stripe.com/settings/billing/automatic) in the\nDashboard. Locate the pause payment section, and click **Set up** to make\nchanges. This feature prevents Stripe from automatically attempting payment from\nyour customer for the invoice amount, and from emailing the invoice.\n- Review the invoice.\n- After you’re ready to charge the customer, resume automatic collection. You\ncan this by either setting\n[auto_advance=true](https://docs.stripe.com/api/invoices/update#update_invoice-auto_advance),\nor by updating the pause payment options in the Dashboard.\n\n### Issue a subscription invoice with configurable item prices\n\nYou can issue invoices with line item prices that exclude inclusive tax.\nTax-exclusive prices are only shown in the invoice PDF. That means, when using\ninclusive tax, the Hosted Invoice Page and invoice emails show tax-inclusive\nprices. You can define the settings for net prices in the Dashboard or API.\n\n- **Include inclusive tax**—The invoice PDF displays line item prices including\nthe inclusive tax. (This is the default.)\n- **Exclude tax**—The invoice PDF displays line item prices excluding tax.\n\n#### Order precedence\n\nIf you set a default for line item prices at the customer level, it takes\nprecedence over account-level settings.\n\n## Subscription metadata\n\nAfter a subscription creates an invoice, it includes the subscription’s\n`metadata` in the following ways:\n\n- The invoice’s\n[subscription_details.metadata](https://docs.stripe.com/api/invoices/object#invoice_object-subscription_details-metadata)\nattribute always contains the subscription’s `metadata` at the time of invoice\ncreation, even if the subscription `metadata` is later modified.\n- The\n[metadata](https://docs.stripe.com/api/invoice/line_item#invoice_line_item_object-metadata)\nattribute of [invoice line\nitems](https://docs.stripe.com/api/invoices/line_item) with\n[type=“subscription”](https://docs.stripe.com/api/invoices/line_item#invoice_line_item_object-type)\nreflects the most recent subscription `metadata` at the time of retrieving the\ninvoice, meaning it might differ from the `metadata` at the time of invoice\ncreation.\n- Invoice line items with\n[type=“invoiceitem”](https://docs.stripe.com/api/invoices/line_item#invoice_line_item_object-type)\ndon’t contain the subscription’s `metadata`.\n\nWhen you modify a subscription invoice line item’s `metadata` directly, either\nwith the [invoice line update](https://docs.stripe.com/api/invoices/update_line)\nor the [bulk invoice line\nupdate](https://docs.stripe.com/invoicing/bulk-update-line-item) endpoint, the\nupdate request declares the invoice line item `metadata`. Any “inherited”\nSubscription `metadata` isn’t preserved implicitly.\n\n[Subscription item\nmetadata](https://docs.stripe.com/api/subscriptions/object#subscription_object-items-data-metadata)\nisn’t automatically propagated to any other Stripe objects.\n\n## Links\n\n- [Invoices](https://docs.stripe.com/api/invoices)\n- [subscription](https://docs.stripe.com/billing/subscriptions/creating)\n- [standalone\ninvoices](https://docs.stripe.com/invoicing/overview#invoice-lifecycle)\n- [subscription-generated\ninvoices](https://docs.stripe.com/billing/subscriptions/overview#invoice-lifecycle)\n-\n[Finalizes](https://docs.stripe.com/invoicing/integration/workflow-transitions#finalized)\n-\n[status=paid](https://docs.stripe.com/api/invoices/object#invoice_object-status)\n-\n[auto_advance](https://docs.stripe.com/invoicing/integration/automatic-advancement-collection#toggle-auto-advance)\n-\n[status](https://docs.stripe.com/api/subscriptions/object#subscription_object-status)\n- [require a payment\nmethod](https://docs.stripe.com/billing/subscriptions/overview#requires-payment-method)\n- [webhook endpoint](https://docs.stripe.com/billing/subscriptions/webhooks)\n- [automatically charging](https://docs.stripe.com/invoicing/automatic-charging)\n- [payment\nmethod](https://docs.stripe.com/payments/payment-methods/integration-options)\n- [emailing the\ninvoice](https://docs.stripe.com/invoicing/integration#accept-invoice-payment)\n- [failed payments](https://docs.stripe.com/invoicing/automatic-collection)\n- [Smart\nRetries](https://docs.stripe.com/invoicing/automatic-collection#smart-retries)\n- [Managing\ninvoices](https://docs.stripe.com/invoicing/dashboard/manage-invoices)\n- [create a one-off\ninvoice](https://docs.stripe.com/invoicing/dashboard#create-invoice)\n- [Invoice details\npage](https://docs.stripe.com/invoicing/dashboard/manage-invoices#invoice-details-page)\n- [Retrieve an invoice](https://docs.stripe.com/api#retrieve_invoice)\n- [retrieving an upcoming invoice](https://docs.stripe.com/api#upcoming_invoice)\n-\n[collection_method](https://docs.stripe.com/api/subscriptions/object#subscription_object-collection_method)\n- [Subscriptions page](https://dashboard.stripe.com/subscriptions)\n- [add extra invoice items](https://docs.stripe.com/api/invoiceitems/create)\n- [changing the billing\ncycle](https://docs.stripe.com/billing/subscriptions/billing-cycle)\n- [one-off invoice](https://docs.stripe.com/invoicing/dashboard)\n-\n[threshold](https://docs.stripe.com/billing/subscriptions/usage-based/alerts-and-thresholds#billing-thresholds)\n-\n[pending_invoice_item_interval](https://docs.stripe.com/api/subscriptions/object#subscription_object-pending_invoice_item_interval)\n- [Checkout](https://docs.stripe.com/payments/checkout)\n-\n[line_items](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-line_items)\n- [client and server\nintegration](https://docs.stripe.com/billing/subscriptions/build-subscriptions)\n- [webhook](https://docs.stripe.com/webhooks)\n- [waits approximately one\nhour](https://docs.stripe.com/billing/subscriptions/webhooks#understand)\n-\n[invoice](https://docs.stripe.com/api/invoiceitems/create#create_invoiceitem-invoice)\n- [Customers page](https://dashboard.stripe.com/customers)\n- [tax rates](https://docs.stripe.com/billing/taxes)\n- [add the tax rates](https://docs.stripe.com/invoicing/taxes/tax-rates)\n- [Subscriptions and\nemails](https://dashboard.stripe.com/settings/billing/automatic)\n-\n[auto_advance=true](https://docs.stripe.com/api/invoices/update#update_invoice-auto_advance)\n-\n[subscription_details.metadata](https://docs.stripe.com/api/invoices/object#invoice_object-subscription_details-metadata)\n-\n[metadata](https://docs.stripe.com/api/invoice/line_item#invoice_line_item_object-metadata)\n- [invoice line items](https://docs.stripe.com/api/invoices/line_item)\n-\n[type=“subscription”](https://docs.stripe.com/api/invoices/line_item#invoice_line_item_object-type)\n- [invoice line update](https://docs.stripe.com/api/invoices/update_line)\n- [bulk invoice line\nupdate](https://docs.stripe.com/invoicing/bulk-update-line-item)\n- [Subscription item\nmetadata](https://docs.stripe.com/api/subscriptions/object#subscription_object-items-data-metadata)",
  "metadata": {
    "title": "Subscription invoices | Stripe Documentation",
    "description": "Learn how to manage subscription invoices.",
    "sourceURL": "https://docs.stripe.com/billing/invoices/subscription"
  }
}