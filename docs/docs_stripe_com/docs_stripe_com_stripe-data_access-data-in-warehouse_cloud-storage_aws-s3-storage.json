{
  "content": "# Export data to Amazon S3\n\n## Automate recurring data exports from Stripe to your AWS S3 Storage bucket.\n\nData pipeline can deliver copies of all your Stripe data as Parquet files into\nyour Amazon S3 storage bucket. It includes a directory of files for each table\nthat’s delivered and updated every 6 hours.\n\n[Prerequisites](https://docs.stripe.com/stripe-data/access-data-in-warehouse/cloud-storage/aws-s3-storage#prerequisites)\nBefore starting the integration, make sure you have an active AWS account and\npermission to:\n\n- Create an Amazon S3 bucket.\n- Create an IAM role enabling Stripe to create objects in the provisioned\nbucket.\n- Access the Stripe Dashboard with an admin or developer role.\n[Create a\nbucket](https://docs.stripe.com/stripe-data/access-data-in-warehouse/cloud-storage/aws-s3-storage#create-bucket)-\nNavigate to your [Amazon S3 console](https://s3.console.aws.amazon.com/) in your\nchosen account region.\n- If needed, create a new storage bucket.- If you don’t currently have an S3\nbucket, follow the [AWS guidelines for creating your first\nbucket](https://docs.aws.amazon.com/AmazonS3/latest/userguide/creating-bucket.html).\nWe recommend including “stripe” in the name, such as “<name>-stripe-data.”\n- Take note of this bucket name and the region because you’ll need them for\nfuture steps.\n[Start the onboarding\nprocess](https://docs.stripe.com/stripe-data/access-data-in-warehouse/cloud-storage/aws-s3-storage#start-onboarding)-\nVisit the [Data Pipeline\nDashboard](https://dashboard.stripe.com/settings/stripe-data-pipeline).\n- Click **Get started**.\n- Select the Amazon S3 logo and click **Next**.\n- On this permissions step, you see code blocks that you can use to create the\nIAM role and trust policy.\n[Create a new permission\npolicy](https://docs.stripe.com/stripe-data/access-data-in-warehouse/cloud-storage/aws-s3-storage#create-permission-polcy)\nTo create a new permission policy:\n\n- In your [AWS IAM console](https://console.aws.amazon.com/iam/), click\n**Policies** > **Create policy** > **JSON**.\n- Paste in the supplied JSON snippet from the Stripe onboarding step.\n- In the Resource section of the JSON snippet, replace `BUCKET_RESOURCE` with\nthe bucket name you set.\n- Provide a name for the new policy (for example,\n`stripe-data-pipeline-policy`).\n[Create a new trust role using a custom\npolicy](https://docs.stripe.com/stripe-data/access-data-in-warehouse/cloud-storage/aws-s3-storage#create-trust-role)\nTo create a new role using a custom policy:\n\n- In your [AWS IAM console](https://console.aws.amazon.com/iam/), click\n**Roles** > **Create role** > **Custom Trust Policy**.\n- Paste in the supplied JSON snippet from the Stripe onboarding step.\n- Click **Next** on the permissions page, then add the new role to your new\npolicy.\n- Select the newly created policy name (for example,\n`stripe-data-pipeline-policy`).\n- Save the role with the following name: **stripe-data-pipeline-s3-role**. You\nmust use this exact name.\n[Establishing your AWS S3\nconnection](https://docs.stripe.com/stripe-data/access-data-in-warehouse/cloud-storage/aws-s3-storage#establish-connection)-\nReturn to the Stripe Data Pipeline onboarding process.\n- Enter the AWS Account ID, bucket name and region generated in the previous\nstep.\n- Select your data encryption option. If you chose to use a customer managed\nkey, upload your public key. Check the step to [generate encryptions\nkeys](https://docs.stripe.com/stripe-data/access-data-in-warehouse/cloud-storage/aws-s3-storage#generate-encryption-keys)\nto see how to create one.\n- Click **Next**. Clicking **Next** sends test data to the bucket you provided,\nbut not production data.\n- When you confirm test data delivery, go to your [S3\nbucket](https://s3.console.aws.amazon.com/).\n- Open the bucket, navigate to the `penny_test` directory, and open the acct_\nprefixed sub-directory to locate the delivered `account_validation.csv` test\nfile.\n- Download the `account_validation.csv` file.\n- Upload this test file in your data pipeline onboarding step.\n- Click **Confirm value**.\n- When you confirm the test value, click **Subscribe**. This subscribes you to\nthe product and schedules the initial full load of data for delivery to your\nAmazon S3 bucket, a process that can take 6-12 hours.\n[OptionalGenerate encryption\nkeys](https://docs.stripe.com/stripe-data/access-data-in-warehouse/cloud-storage/aws-s3-storage#generate-encryption-keys)\n\n## Links\n\n- [Amazon S3 console](https://s3.console.aws.amazon.com/)\n- [AWS guidelines for creating your first\nbucket](https://docs.aws.amazon.com/AmazonS3/latest/userguide/creating-bucket.html)\n- [Data Pipeline\nDashboard](https://dashboard.stripe.com/settings/stripe-data-pipeline)\n- [AWS IAM console](https://console.aws.amazon.com/iam/)",
  "metadata": {
    "title": "Export data to Amazon S3 | Stripe Documentation",
    "description": "Automate recurring data exports from Stripe to your AWS S3 Storage bucket.",
    "sourceURL": "https://docs.stripe.com/stripe-data/access-data-in-warehouse/cloud-storage/aws-s3-storage"
  }
}