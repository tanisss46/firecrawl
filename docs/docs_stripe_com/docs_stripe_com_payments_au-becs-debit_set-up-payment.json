{
  "content": "# Save Australia BECS Direct Debit details for future payments\n\n## Use the Setup Intents API to save payment method details for future Australia BECS Direct Debit payments.\n\nAdvanced integrationiOSAndroidReact Native\nUse [Stripe Elements](https://docs.stripe.com/payments/elements), our prebuilt\nUI components, to create a payment form that lets you securely collect bank\ndetails without handling the sensitive data. You can use the [Setup Intents\nAPI](https://docs.stripe.com/payments/setup-intents) to collect BECS Direct\nDebit payment method details in advance, and determine the final amount or\npayment date later. Use it to:\n\n- Save payment methods to a wallet to streamline future purchases\n- Collect surcharges after fulfilling a service\n- [Start a free trial for a\nsubscription](https://docs.stripe.com/billing/subscriptions/trials)\n[Set up\nStripeServer-side](https://docs.stripe.com/payments/au-becs-debit/set-up-payment#web-set-up-stripe)\nFirst, you need a Stripe account. [Register\nnow](https://dashboard.stripe.com/register).\n\nUse our official libraries for access to the Stripe API from your application:\n\n```\n# Available as a gem\nsudo gem install stripe\n```\n\n```\n# If you use bundler, you can add this line to your Gemfile\ngem 'stripe'\n```\n\n[Create or retrieve a\nCustomerServer-side](https://docs.stripe.com/payments/au-becs-debit/set-up-payment#web-create-customer)\nTo reuse a BECS Direct Debit account for future payments, you must attach it to\na [Customer](https://docs.stripe.com/api/customers).\n\nCreate a Customer object when your customer creates an account with your\nbusiness. Associating the ID of the Customer object with your own internal\nrepresentation of them enables you to retrieve and use the stored payment method\ndetails later.\n\nCreate a new Customer or retrieve an existing Customer to associate with this\npayment. Include the following code on your server to create a new Customer.\n\n```\ncurl -X POST https://api.stripe.com/v1/customers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\"\n```\n\n[Create a\nSetupIntentServer-side](https://docs.stripe.com/payments/au-becs-debit/set-up-payment#web-create-setup-intent)\nA [SetupIntent](https://docs.stripe.com/api/setup_intents) is an object that\nrepresents your intent to set up a customer’s payment method for future\npayments. The `SetupIntent` will track the steps of this set-up process. For\nBECS Direct Debit, this includes collecting a mandate from the customer and\ntracking its validity throughout its lifecycle.\n\nCreate a [SetupIntent](https://docs.stripe.com/api/setup_intents) on your server\nwith\n[payment_method_types](https://docs.stripe.com/api/setup_intents/create#create_setup_intent-payment_method_types)\nset to `au_becs_debit` and specify the\n[Customer](https://docs.stripe.com/api/customers)’s\n[id](https://docs.stripe.com/api/customers/object#customer_object-id):\n\n```\ncurl https://api.stripe.com/v1/setup_intents \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d \"payment_method_types[]\"=\"au_becs_debit\" \\\n -d \"customer\"=\"{{CUSTOMER_ID}}\"\n```\n\nAfter creating a `SetupIntent` on your server, you can associate the\n`SetupIntent` ID with the current session’s customer in your application’s data\nmodel. Doing so allows you to retrieve the information after you have\nsuccessfully collected a payment method.\n\nThe returned `SetupIntent` object contains a `client_secret` property. Pass the\nclient secret to the client-side application to continue with the setup process.\n\n[Collect payment method details and mandate\nacknowledgmentClient-side](https://docs.stripe.com/payments/au-becs-debit/set-up-payment#web-collect-payment-method-details)\nYou’re ready to collect payment information on the client with [Stripe\nElements](https://docs.stripe.com/payments/elements). Elements is a set of\nprebuilt UI components for collecting payment details.\n\nA Stripe Element contains an iframe that securely sends the payment information\nto Stripe over an HTTPS connection. The checkout page address must also start\nwith https:// rather than http:// for your integration to work.\n\nYou can test your integration without using HTTPS. [Enable\nit](https://docs.stripe.com/security/guide#tls) when you’re ready to accept live\npayments.\n\n### Set up Stripe Elements\n\nHTML + JSReact\nStripe Elements is automatically available as a feature of Stripe.js. Include\nthe Stripe.js script on your payment page by adding it to the `head` of your\nHTML file. Always load Stripe.js directly from js.stripe.com to remain PCI\ncompliant. Don’t include the script in a bundle or host a copy of it yourself.\n\n```\n<head>\n <title>Payment Setup</title>\n <script src=\"https://js.stripe.com/v3/\"></script>\n</head>\n```\n\nCreate an instance of [Elements](https://docs.stripe.com/js#stripe-elements)\nwith the following JavaScript on your payment page:\n\n```\nconst stripe = Stripe('pk_test_TYooMQauvdEDq54NiTphI7jx');\nconst elements = stripe.elements();\n```\n\n### Direct Debit Requests\n\nBefore you can create a BECS Direct Debit payment, your customer must agree with\nthe Direct Debit Request Service Agreement. They do so by submitting a completed\nDirect Debit Request (DDR). The approval gives you a mandate to debit their\naccount. The `Mandate` is a record of the permission to debit a payment method.\n\nFor online mandate acceptance, you can create a form to collect the necessary\ninformation. Serve the form over\n[HTTPS](https://docs.stripe.com/security/guide#tls) and capture the following\ninformation:\n\nInformationDescriptionAccount nameThe full name of the account holderBSB\nnumberThe Bank-State-Branch number of the bank account (for example,\n`123-456`)Account numberThe bank account number (for example, `87654321`)\nWhen collecting a Direct Debit Request, follow our [BECS Direct Debit\nTerms](https://stripe.com/au-becs/legal) and as part of your checkout form:\n\n- Display the exact terms of [Stripe’s DDR service\nagreement](https://stripe.com/au-becs-dd-service-agreement/legal) either inline\non the form, or on a page linked from the form, and identifying it as the “DDR\nservice agreement.”\n- Make sure the accepted DDR and its accompanying [DDR service\nagreement](https://stripe.com/au-becs-dd-service-agreement/legal) can be shared\nwith your customer at all times, either as a printed or non-changeable\nelectronic copy (such as email). Stripe hosts this for you.\n- Display the following standard authorization text for your customer to accept\nthe BECS DDR, where you replace *Rocketship Inc* with your company name. Their\nacceptance authorizes you to initiate BECS Direct Debit payments from their bank\naccount.\n\n#### Note\n\nBy providing your bank account details, you agree to this Direct Debit Request\nand the [Direct Debit Request service\nagreement](https://stripe.com/au-becs-dd-service-agreement/legal), and authorize\nStripe Payments Australia Pty Ltd ACN 160 180 343 Direct Debit User ID number\n507156 (“Stripe”) to debit your account through the Bulk Electronic Clearing\nSystem (BECS) on behalf of *Rocketship Inc* (the “Merchant”) for any amounts\nseparately communicated to you by the Merchant. You certify that you’re either\nan account holder or an authorized signatory on the account listed above.\n\nThe details of the accepted mandate are generated when setting up a\n[PaymentMethod](https://docs.stripe.com/payments/payment-methods) or confirming\na `PaymentIntent`. At all times, you should be able to share this mandate—the\naccepted DDR and its accompanying DDR service agreement—with your customer,\neither in print or as a non-changeable electronic copy (such as email). Stripe\nhosts this for you under the `url` property of the `Mandate` object linked to\nthe `PaymentMethod`.\n\n### Add and configure an Australia Bank Account Element\n\nThe Australia Bank Account Element will help you collect and validate both the\nBSB number and the account number. It needs a place to live in your payment\nform. Create empty DOM nodes (containers) with unique IDs in your payment form.\nAdditionally, your customer must read and accept the [Direct Debit Request\nservice agreement](https://stripe.com/au-becs-dd-service-agreement/legal).\n\n```\n<form action=\"/setup\" method=\"post\" id=\"setup-form\">\n <div class=\"form-row inline\">\n <div class=\"col\">\n <label for=\"accountholder-name\">\n Name\n </label>\n <input\n id=\"accountholder-name\"\n name=\"accountholder-name\"\n placeholder=\"John Smith\"\n required\n />\n </div>\n <div class=\"col\">\n <label for=\"email\">\n Email Address\n </label>\n <input\n id=\"email\"\n name=\"email\"\n type=\"email\"\n placeholder=\"john.smith@example.com\"\n required\n />\n </div>\n </div>\n\n <div class=\"form-row\">\n <!--\n Using a label with a for attribute that matches the ID of the\n Element container enables the Element to automatically gain focus\n when the customer clicks on the label.\n -->\n <label for=\"au-bank-account-element\">\n Bank Account\n </label>\n <div id=\"au-bank-account-element\">\n <!-- A Stripe Element will be inserted here. -->\n </div>\n </div>\n\n <!-- Used to display bank (branch) name associated with the entered BSB -->\n <div id=\"bank-name\"></div>\n\n <!-- Used to display form errors. -->\n <div id=\"error-message\" role=\"alert\"></div>\n\n <!-- Display mandate acceptance text. -->\n <div class=\"col\" id=\"mandate-acceptance\">\nBy providing your bank account details, you agree to this Direct Debit Request\nand the <a href=\"stripe.com/au-becs-dd-service-agreement/legal\">Direct Debit\nRequest service agreement</a>,\n and authorise Stripe Payments Australia Pty Ltd ACN 160 180 343\n Direct Debit User ID number 507156 (“Stripe”) to debit your account\n through the Bulk Electronic Clearing System (BECS) on behalf of\n Rocket Rides (the \"Merchant\") for any amounts separately\n communicated to you by the Merchant. You certify that you are either\n an account holder or an authorised signatory on the account listed above.\n </div>\n \n <!-- Add the client_secret from the SetupIntent as a data attribute -->\n<button id=\"submit-button\" data-secret=\"{{CLIENT_SECRET}}\">Set up BECS Direct\nDebit</button>\n\n</form>\n```\n\nWhen the form loads, you can [create an\ninstance](https://docs.stripe.com/js/elements_object/create_element?type=au_bank_account)\nof the Australia Bank Account Element and mount it to the Element container:\n\n```\n// Custom styling can be passed to options when creating an Element\nconst style = {\n base: {\n color: '#32325d',\n fontSize: '16px',\n '::placeholder': {\n color: '#aab7c4'\n },\n ':-webkit-autofill': {\n color: '#32325d',\n },\n },\n invalid: {\n color: '#fa755a',\n iconColor: '#fa755a',\n ':-webkit-autofill': {\n color: '#fa755a',\n },\n }\n};\n\nconst options = {\n style: style,\n disabled: false,\n hideIcon: false,\n iconStyle: \"default\", // or \"solid\"\n}\n\n// Create an instance of the auBankAccount Element.\nconst auBankAccount = elements.create('auBankAccount', options);\n\n// Add an instance of the auBankAccount Element into\n// the `au-bank-account-element` <div>.\nauBankAccount.mount('#au-bank-account-element');\n```\n\n[Submit the payment method details to\nStripeClient-side](https://docs.stripe.com/payments/au-becs-debit/set-up-payment#web-submit-payment-method)\nRather than sending the entire `SetupIntent` object to the client, use its\n[client\nsecret](https://docs.stripe.com/api/setup_intents/object#setup_intent_object-client_secret)\nfrom [step\n2](https://docs.stripe.com/payments/au-becs-debit/set-up-payment#web-create-setup-intent).\nThis is different from your API keys that authenticate Stripe API requests.\n\nThe client secret should be handled carefully because it can complete the setup.\nDo not log it, embed it in URLs, or expose it to anyone but the customer.\n\nHTML + JSReact\nUse\n[stripe.confirmAuBecsDebitSetup](https://docs.stripe.com/js/setup_intents/confirm_au_becs_debit_setup)\nto complete the setup when the user submits the form. A successful setup returns\na `succeeded` value for the SetupIntent’s `status` property. If the setup isn’t\nsuccessful, inspect the returned `error` to determine the cause.\n\nAs\n[customer](https://docs.stripe.com/api/setup_intents/create#create_setup_intent-customer)\nwas set, the [PaymentMethod](https://docs.stripe.com/api/payment_methods) is\nattached to the provided `Customer` object after a successful setup. At this\npoint, you can associate the ID of the `Customer` object with your internal\nrepresentation of a customer. This allows you to use the stored `PaymentMethod`\nto collect future payments without prompting for your customer’s payment method\ndetails.\n\n```\nconst form = document.getElementById('setup-form');\nconst accountholderName = document.getElementById('accountholder-name');\nconst email = document.getElementById('email');\nconst submitButton = document.getElementById('submit-button');\nconst clientSecret = submitButton.dataset.secret;\n\nform.addEventListener('submit', async (event) => {\n event.preventDefault();\n stripe.confirmAuBecsDebitSetup(\n clientSecret,\n {\n payment_method: {\n au_becs_debit: auBankAccount,\n billing_details: {\n name: accountholderName.value,\n email: email.value\n }\n }\n }\n );\n});\n```\n\nAfter successfully confirming the `SetupIntent`, you should share the [mandate\nURL](https://docs.stripe.com/api/mandates/object#mandate_object-payment_method_details-au_becs_debit-url)\nfrom the [Mandate object](https://docs.stripe.com/api/mandates) with your\ncustomer. We also recommend including the following details to your customer\nwhen you confirm their mandate has been established:\n\n- an explicit confirmation message that indicates a Direct Debit arrangement has\nbeen set up\n- the [business\nname](https://docs.stripe.com/payments/au-becs-debit/set-up-payment#statement-descriptors)\nthat will appear on the customer’s bank statement whenever their account gets\ndebited\n- the payment amount and schedule (if applicable)\n- a link to the generated DDR mandate URL\n\nThe `Mandate` object’s ID is accessible from the `mandate` on the SetupIntent\nobject, which is sent as part of the `setup_intent.succeeded` event sent after\nconfirmation, but can also be [retrieved through the\nAPI](https://docs.stripe.com/api/setup_intents/retrieve).\n\n```\ncurl https://api.stripe.com/v1/setup_intents/{{SETUP_INTENT_ID}} \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d \"expand[]\"=mandate\n```\n\n[Test the\nintegration](https://docs.stripe.com/payments/au-becs-debit/set-up-payment#web-test-integration)\nYou can test your form using the test BSB number `000-000` and one of the test\naccount numbers below with your\n[confirmAuBecsDebitSetup](https://docs.stripe.com/js/setup_intents/confirm_au_becs_debit_setup)\nrequest.\n\nBSB NumberAccount NumberDescription`000-000``000123456`The PaymentIntent created\nwith the resulting PaymentMethod transitions from `processing` to `succeeded`.\nThe mandate status remains `active`.`000-000``900123456`The PaymentIntent\ncreated with the resulting PaymentMethod transitions from `processing` to\n`succeeded` (with a three-minute delay). The mandate status remains\n`active`.`000-000``111111113`The PaymentIntent created with the resulting\nPaymentMethod transitions from `processing` to `requires_payment_method` with an\n`account_closed` failure code. The mandate status becomes `inactive` at that\npoint.`000-000``111111116`The PaymentIntent created with the resulting\nPaymentMethod transitions from `processing` to `requires_payment_method` with a\n`no_account` failure code. The mandate status becomes `inactive` at that\npoint.`000-000``222222227`The PaymentIntent created with the resulting\nPaymentMethod transitions from `processing` to `requires_payment_method` with a\n`refer_to_customer` failure code. The mandate status remains\n`active`.`000-000``922222227`The PaymentIntent created with the resulting\nPaymentMethod transitions from `processing` to `requires_payment_method` with a\n`refer_to_customer` failure code (with a three-minute delay). The mandate status\nremains `active`.`000-000``333333335`The PaymentIntent created with the\nresulting PaymentMethod transitions from `processing` to\n`requires_payment_method` with a `debit_not_authorized` failure code. The\nmandate status becomes `inactive` at that point.`000-000``666666660`The\nPaymentIntent created with the resulting PaymentMethod transitions from\n`processing` to `succeeded`, but a dispute is immediately\ncreated.`000-000``343434343`The PaymentIntent that was created with the\nresulting PaymentMethod fails with a `charge_exceeds_source_limit` error due to\nthe payment amount causing the account to exceed its weekly payment volume\nlimit.`000-000``121212121`The PaymentIntent that was created with the resulting\nPaymentMethod fails with a `charge_exceeds_transaction_limit` error due to the\npayment amount exceeding the account’s transaction volume\nlimit.[OptionalValidate the Australia Bank Account\nElementClient-side](https://docs.stripe.com/payments/au-becs-debit/set-up-payment#web-validate-element)[OptionalAccepting\nfuture\npaymentsClient-side](https://docs.stripe.com/payments/au-becs-debit/set-up-payment#web-future-payments)\n## See also\n\n- [Accept an Australia BECS Direct Debit\npayment](https://docs.stripe.com/payments/au-becs-debit/accept-a-payment)\n- [Connect payments](https://docs.stripe.com/connect/charges)\n\n## Links\n\n- [Stripe Elements](https://docs.stripe.com/payments/elements)\n- [Setup Intents API](https://docs.stripe.com/payments/setup-intents)\n- [Start a free trial for a\nsubscription](https://docs.stripe.com/billing/subscriptions/trials)\n- [Register now](https://dashboard.stripe.com/register)\n- [Customer](https://docs.stripe.com/api/customers)\n- [SetupIntent](https://docs.stripe.com/api/setup_intents)\n-\n[payment_method_types](https://docs.stripe.com/api/setup_intents/create#create_setup_intent-payment_method_types)\n- [id](https://docs.stripe.com/api/customers/object#customer_object-id)\n- [Enable it](https://docs.stripe.com/security/guide#tls)\n- [https://js.stripe.com/v3/](https://js.stripe.com/v3/)\n- [Elements](https://docs.stripe.com/js#stripe-elements)\n- [BECS Direct Debit Terms](https://stripe.com/au-becs/legal)\n- [Stripe’s DDR service\nagreement](https://stripe.com/au-becs-dd-service-agreement/legal)\n- [PaymentMethod](https://docs.stripe.com/payments/payment-methods)\n- [create an\ninstance](https://docs.stripe.com/js/elements_object/create_element?type=au_bank_account)\n- [client\nsecret](https://docs.stripe.com/api/setup_intents/object#setup_intent_object-client_secret)\n-\n[stripe.confirmAuBecsDebitSetup](https://docs.stripe.com/js/setup_intents/confirm_au_becs_debit_setup)\n-\n[customer](https://docs.stripe.com/api/setup_intents/create#create_setup_intent-customer)\n- [PaymentMethod](https://docs.stripe.com/api/payment_methods)\n- [mandate\nURL](https://docs.stripe.com/api/mandates/object#mandate_object-payment_method_details-au_becs_debit-url)\n- [Mandate object](https://docs.stripe.com/api/mandates)\n- [retrieved through the\nAPI](https://docs.stripe.com/api/setup_intents/retrieve)\n- [Accept an Australia BECS Direct Debit\npayment](https://docs.stripe.com/payments/au-becs-debit/accept-a-payment)\n- [Connect payments](https://docs.stripe.com/connect/charges)",
  "metadata": {
    "title": "Save Australia BECS Direct Debit details for future payments | Stripe Documentation",
    "description": "Use the Setup Intents API to save payment method details for future Australia BECS Direct Debit payments.",
    "sourceURL": "https://docs.stripe.com/payments/au-becs-debit/set-up-payment"
  }
}