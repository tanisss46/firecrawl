{
  "content": "# Save details for future payments with ACH Direct Debit\n\n## Learn how to save payment method details for future ACH Direct Debit payments.\n\nStripe-hosted pageAdvanced integrationiOSAndroidReact Native\nYou can use Checkout in [setup\nmode](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-mode)\nto collect payment method details in advance, with the final amount or payment\ndate determined later. This is useful for:\n\n- Saving payment methods to a wallet to streamline future purchases\n- Collecting surcharges after fulfilling a service\n- Starting a free trial for a\n[subscription](https://docs.stripe.com/billing/subscriptions/creating)\n\n#### Note\n\nACH Direct Debit is a [delayed\nnotification](https://docs.stripe.com/payments/payment-methods#payment-notification)\npayment method, which means that funds aren’t immediately available after\npayment. A payment typically takes 4 business days to arrive in your account.\n\n## Before you begin\n\nThis guide shows you how to extend the foundational [set up future\npayments](https://docs.stripe.com/payments/save-and-reuse?platform=web&ui=stripe-hosted)\nCheckout integration to add support for ACH Direct Debit payments.\n\n[Create or retrieve a\ncustomerRecommendedServer-side](https://docs.stripe.com/payments/ach-direct-debit/set-up-payment#web-create-customer)\nCreate a [Customer](https://docs.stripe.com/api/customers) object when your user\ncreates an account with your business, or retrieve an existing Customer\nassociated with this user. Associating the ID of the Customer object with your\nown internal representation of a customer enables you to retrieve and use the\nstored payment method details later. Include an email address on the Customer to\nenable Financial Connections’ [return user\noptimization](https://docs.stripe.com/financial-connections/fundamentals#return-user-optimization).\n\n```\ncurl https://api.stripe.com/v1/customers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d email={{CUSTOMER_EMAIL}}\n```\n\n[Enable ACH Direct Debit as a payment\nmethod](https://docs.stripe.com/payments/ach-direct-debit/set-up-payment#setup-a-payment)\nWhen creating a new [Checkout\nSession](https://docs.stripe.com/api/checkout/sessions), you need to:\n\n- Add `us_bank_account` to the list of `payment_method_types`.\n- Make sure all your `line_items` use the `usd` currency.\n- Set the `permissions` parameter to include `payment_method`.\n\n```\ncurl https://api.stripe.com/v1/checkout/sessions \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d mode=setup \\\n -d customer={{CUSTOMER_ID}} \\\n -d \"payment_method_types[]\"=card \\\n -d \"payment_method_types[]\"=us_bank_account \\\n --data-urlencode success_url=\"https://example.com/success\" \\\n --data-urlencode cancel_url=\"https://example.com/cancel\"\n```\n\nBy default, collecting bank account payment information uses [Financial\nConnections](https://docs.stripe.com/financial-connections) to instantly verify\nyour customer’s account, with a fallback option of manual account number entry\nand microdeposit verification. See the [Financial Connections\ndocs](https://docs.stripe.com/financial-connections/ach-direct-debit-payments)\nto learn how to configure Financial Connections and access additional account\ndata to optimize your ACH integration. For example, you can use Financial\nConnections to check an account’s balance before initiating the ACH payment.\n\n#### Note\n\nTo expand access to additional data after a customer authenticates their\naccount, they must re-link their account with expanded permissions.\n\nDuring the Checkout session, the customer sees a dialog that gives them the\noption to use instant verification or provide bank account details for\nmicrodeposit verification.\n\nIf the customer opts for microdeposit verification, Stripe automatically sends\ntwo small deposits to the provided bank account. These deposits can take 1-2\nbusiness days to appear on the customer’s online bank statement. When the\ndeposits arrive, the customer receives an email with a link to confirm these\namounts and verify the bank account with Stripe. After verification completes,\nthe payment begins processing.\n\n[Test your\nintegration](https://docs.stripe.com/payments/ach-direct-debit/set-up-payment#test-integration)\nLearn how to test scenarios with instant verifications using [Financial\nConnections](https://docs.stripe.com/financial-connections/testing#web-how-to-use-test-accounts).\n\n### Send transaction emails in test mode\n\nAfter you collect the bank account details and accept a mandate, send the\nmandate confirmation and microdeposit verification emails in test mode. To do\nthis, provide an email in the `payment_method_data.billing_details[email]` field\nin the form of `{any-prefix}+test_email@{any_domain}` when you collect the\n[payment method\ndetails](https://docs.stripe.com/payments/ach-direct-debit/set-up-payment#web-collect-details).\n\n#### Common mistake\n\nYou need to [activate your Stripe\naccount](https://docs.stripe.com/get-started/account/activate) before you can\ntrigger these emails in Test mode.\n\n### Test account numbers\n\nStripe provides several test account numbers and corresponding tokens you can\nuse to make sure your integration for manually-entered bank accounts is ready\nfor production.\n\nAccount numberTokenRouting\nnumberBehavior`000123456789``pm_usBankAccount_success``110000000`The payment\nsucceeds.`000111111113``pm_usBankAccount_accountClosed``110000000`The payment\nfails because the account is\nclosed.`000111111116``pm_usBankAccount_noAccount``110000000`The payment fails\nbecause no account is\nfound.`000222222227``pm_usBankAccount_insufficientFunds``110000000`The payment\nfails due to insufficient\nfunds.`000333333335``pm_usBankAccount_debitNotAuthorized``110000000`The payment\nfails because debits aren’t\nauthorized.`000444444440``pm_usBankAccount_invalidCurrency``110000000`The\npayment fails due to invalid\ncurrency.`000666666661``pm_usBankAccount_failMicrodeposits``110000000`The\npayment fails to send\nmicrodeposits.`000555555559``pm_usBankAccount_dispute``110000000`The payment\ntriggers a dispute.`000000000009``pm_usBankAccount_processing``110000000`The\npayment stays in processing indefinitely. Useful for testing [PaymentIntent\ncancellation](https://docs.stripe.com/api/payment_intents/cancel).`000777777771``pm_usBankAccount_weeklyLimitExceeded``110000000`The\npayment fails due to payment amount causing the account to exceed its weekly\npayment volume limit.\nBefore test transactions can complete, you need to verify all test accounts that\nautomatically succeed or fail the payment. To do so, use the test microdeposit\namounts or descriptor codes below.\n\n### Test microdeposit amounts and descriptor codes\n\nTo mimic different scenarios, use these microdeposit amounts *or* 0.01\ndescriptor code values.\n\nMicrodeposit values0.01 descriptor code valuesScenario`32` and\n`45`SM11AASimulates verifying the account.`10` and `11`SM33CCSimulates exceeding\nthe number of allowed verification attempts.`40` and `41`SM44DDSimulates a\nmicrodeposit timeout.[Use the payment\nmethod](https://docs.stripe.com/payments/ach-direct-debit/set-up-payment#use-the-payment-method)\nAfter completing the Checkout Session, you can\n[collect](https://docs.stripe.com/payments/checkout/save-and-reuse?payment-ui=stripe-hosted#retrieve-checkout-session)\nthe [PaymentMethod](https://docs.stripe.com/api/payment_methods) ID. You can use\nthese PaymentMethod IDs to initiate future payments without having to prompt the\ncustomer for their bank account a second time.\n\nWhen [creating a\nPaymentIntent](https://docs.stripe.com/api/payment_intents/create), provide the\n`payment_method` and customer IDs to charge your customer using their saved bank\naccount information.\n\n[OptionalInstant only\nverification](https://docs.stripe.com/payments/ach-direct-debit/set-up-payment#instant-only-verification)[OptionalAccess\ndata on a Financial Connections bank\naccount](https://docs.stripe.com/payments/ach-direct-debit/set-up-payment#access-data-on-a-financial-connections-bank-account)[OptionalUpdating\nthe default payment\nmethod](https://docs.stripe.com/payments/ach-direct-debit/set-up-payment#update-default-payment-method)\n\n## Links\n\n- [setup\nmode](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-mode)\n- [subscription](https://docs.stripe.com/billing/subscriptions/creating)\n- [delayed\nnotification](https://docs.stripe.com/payments/payment-methods#payment-notification)\n- [set up future\npayments](https://docs.stripe.com/payments/save-and-reuse?platform=web&ui=stripe-hosted)\n- [Customer](https://docs.stripe.com/api/customers)\n- [return user\noptimization](https://docs.stripe.com/financial-connections/fundamentals#return-user-optimization)\n- [Checkout Session](https://docs.stripe.com/api/checkout/sessions)\n- [pricing details](https://stripe.com/financial-connections#pricing)\n- [Financial Connections](https://docs.stripe.com/financial-connections)\n- [Financial Connections\ndocs](https://docs.stripe.com/financial-connections/ach-direct-debit-payments)\n- [Financial\nConnections](https://docs.stripe.com/financial-connections/testing#web-how-to-use-test-accounts)\n- [activate your Stripe\naccount](https://docs.stripe.com/get-started/account/activate)\n- [PaymentIntent\ncancellation](https://docs.stripe.com/api/payment_intents/cancel)\n-\n[collect](https://docs.stripe.com/payments/checkout/save-and-reuse?payment-ui=stripe-hosted#retrieve-checkout-session)\n- [PaymentMethod](https://docs.stripe.com/api/payment_methods)\n- [creating a PaymentIntent](https://docs.stripe.com/api/payment_intents/create)",
  "metadata": {
    "title": "Save details for future payments with ACH Direct Debit | Stripe Documentation",
    "description": "Learn how to save payment method details for future ACH Direct Debit payments.",
    "sourceURL": "https://docs.stripe.com/payments/ach-direct-debit/set-up-payment"
  }
}