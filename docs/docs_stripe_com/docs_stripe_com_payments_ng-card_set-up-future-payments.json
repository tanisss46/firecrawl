{
  "content": "# Set up future payments with Naira cardPrivate preview\n\n## Learn how to save Naira card to charge customers later.\n\nStripe-hosted pageDirect API\nSave Naira card payment details using\n[Checkout](https://docs.stripe.com/payments/checkout), our fully hosted checkout\npage.\n\nLearn how to [set up a subscription with Naira\ncard](https://docs.stripe.com/billing/subscriptions/ng-card) to create recurring\npayments after saving a payment method in Checkout.\n\n[Set up\nStripeServer-side](https://docs.stripe.com/payments/ng-card/set-up-future-payments#web-set-up-stripe)\nFirst, you need a Stripe account. [Register\nnow](https://dashboard.stripe.com/register).\n\nAccess the Stripe API from your application using our official libraries:\n\n```\n# Available as a gem\nsudo gem install stripe\n```\n\n```\n# If you use bundler, you can add this line to your Gemfile\ngem 'stripe'\n```\n\n[Getting permission to save a payment\nmethodServer-side](https://docs.stripe.com/payments/ng-card/set-up-future-payments#web-permissions)\nYou need the customer’s permission to save their payment method for future use.\nCreating an agreement (sometimes called a mandate) up front allows you to save\nthe customer’s payment details and charge them when they’re not actively using\nyour website or app.\n\nAdd terms to your website or app that state how you plan to save the customer’s\npayment method details, and let them opt in. If you plan to charge the customer\nwhen they’re offline, make sure that your terms also include the following:\n\n- The customer’s permission for you to initiate a payment or a series of\npayments on their behalf for specified transactions\n- The anticipated frequency (one-time or recurring) and timing of payments\n- How you determine the payment amount\n- Your cancellation policy, if you’re setting up the payment method for a\nsubscription service\n\nMake sure that you keep a record of the customer’s written agreement to these\nterms.\n\n[Create or retrieve a\nCustomerServer-side](https://docs.stripe.com/payments/ng-card/set-up-future-payments#web-create-customer)\nTo save a Naira card payment method for future payments, attach it to a\n[Customer](https://docs.stripe.com/api/customers).\n\nCreate a [Customer object](https://docs.stripe.com/api/customers) when the\ncustomer creates an account with your business, and associate the ID of the\nCustomer object with your own internal representation of that customer.\nAlternatively, you can create a new Customer before saving a payment method for\nfuture payments.\n\nCreate a new Customer or retrieve an existing Customer to associate with this\npayment. Include the following code on your server to create a new Customer:\n\n```\ncurl https://api.stripe.com/v1/customers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n --data-urlencode description=\"My First Test Customer (created for API docs)\"\n```\n\n[Create a Checkout\nSessionServer-side](https://docs.stripe.com/payments/ng-card/set-up-future-payments#web-create-checkout-session)\nThe customer must authorize the use of the local merchant of record service\nprovider for future payments.\n\nAdd a checkout button to your website that calls a server-side endpoint to\ncreate a [Checkout Session](https://docs.stripe.com/api/checkout/sessions).\n\n```\n<html>\n <head>\n <title>Checkout</title>\n </head>\n <body>\n <form action=\"/create-checkout-session\" method=\"POST\">\n <button type=\"submit\">Checkout</button>\n </form>\n </body>\n</html>\n```\n\nCreate a Checkout Session in `setup` mode to collect the required information.\nAfter creating the Checkout Session, redirect the customer to the [Checkout\nsession\nURL](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-url)\nthat the response returns.\n\n```\nStripe::Checkout::Session.create({\n mode: 'setup',\n payment_method_types: ['card'],\n payment_method_types: ['card', 'ng_card'],\n customer: customer.id,\n success_url: 'https://example.com/success',\n cancel_url: 'https://example.com/cancel',\n})\n```\n\n[Test your\nintegration](https://docs.stripe.com/payments/ng-card/set-up-future-payments#web-test-integration)\nSelect Naira card as the payment method, then click **Continue to Naira card**.\nTest the setup by authenticating the SetupIntent on the redirect page. If the\nSetupIntent transitions from `requires_action` to `succeeded`, the setup is\ncorrect.\n\n## Links\n\n- [Checkout](https://docs.stripe.com/payments/checkout)\n- [set up a subscription with Naira\ncard](https://docs.stripe.com/billing/subscriptions/ng-card)\n- [Register now](https://dashboard.stripe.com/register)\n- [Customer](https://docs.stripe.com/api/customers)\n- [Checkout Session](https://docs.stripe.com/api/checkout/sessions)\n- [Checkout session\nURL](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-url)\n- [https://example.com/success](https://example.com/success)\n- [https://example.com/cancel](https://example.com/cancel)",
  "metadata": {
    "title": "Set up future payments with Naira card | Stripe Documentation",
    "description": "Learn how to save Naira card to charge customers later.",
    "sourceURL": "https://docs.stripe.com/payments/ng-card/set-up-future-payments"
  }
}