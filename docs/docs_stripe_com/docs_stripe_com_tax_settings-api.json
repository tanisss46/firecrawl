{
  "content": "# Use the Settings API to configure Stripe Tax\n\n## Learn how to configure tax settings, and check whether an account is ready to perform tax calculations.\n\nThe [Stripe Tax Settings API](https://docs.stripe.com/api/tax/settings) lets you\nretrieve and configure the settings required to calculate tax without relying on\nthe [Stripe Dashboard](https://docs.stripe.com/tax/set-up).\n\n- **Connect platform**: As a platform, you can use this API to set up your\nconnected accounts to use Stripe Tax, or to validate whether an account is\nalready set up appropriately.\n- **Direct usage**: You can use this API to set up Stripe Tax, or to validate\nwhether you’re already set up appropriately.\nConnect platformDirect usage\n## Check if the connected account is ready to use Stripe Tax\n\nComplete this check when the Standard account configures Stripe Tax through the\nStripe Dashboard but your platform needs to assess if Stripe Tax can be enabled.\n\nUse our official libraries for access to the Stripe API from your application.\nTo check the Stripe Tax settings on the connected account, [retrieve the\ntax.settings object](https://docs.stripe.com/api/tax/settings/retrieve) using\nthe `Stripe-Account` header with a value of the connected account ID:\n\n```\ncurl https://api.stripe.com/v1/tax/settings \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\"\n```\n\nYou can also listen to the\n[tax.settings.updated](https://docs.stripe.com/api/events/types#event_types-tax.settings.updated)\nwebhook event which triggers when accounts update their tax settings or when new\nrequired tax settings are introduced. See [take webhooks\nlive](https://docs.stripe.com/webhooks#register-webhook) to learn how to add a\nwebhook endpoint, and make sure you select **Listen to events on Connected\naccounts** in the Dashboard.\n\nAn account is ready to use Stripe Tax if the response `tax.settings` object\nretrieved by the API or webhook event returns `\"active\"` for `status`. The\n`defaults.tax_code` and `defaults.tax_behavior` settings are only required if\nnot provided in the product or price on each API call.\n\n```\n{\n \"object\": \"tax.settings\",\n \"defaults\": {\n \"tax_code\": null,\n \"tax_behavior\": null\n },\n \"head_office\": {\n \"address\": {\n \"country\": \"DE\"\n }\n },\n \"livemode\": false,\n \"status\": \"active\",\n \"status_details\": {\n \"active\": {}\n }\n}\n```\n\nAn account isn’t ready to use Stripe Tax if the response `tax.settings` object\nreturns `\"pending\"` for `status`. The\n[status_details[pending][missing_fields]](https://docs.stripe.com/api/tax/settings/object#tax_settings_object-status_details-pending-missing_fields)\nhas a list of all required missing fields.\n\n```\n{\n \"object\": \"tax.settings\",\n \"defaults\": {\n \"tax_code\": null,\n \"tax_behavior\": null\n },\n \"head_office\": null,\n \"livemode\": false,\n \"status\": \"pending\",\n \"status_details\": {\n \"pending\": {\n \"missing_fields\": [\"head_office\"]\n }\n }\n}\n```\n\n## Configure connected account settings\n\nComplete this step when you manage all Stripe Tax configuration through an\ninterface on your platform.\n\nYou can modify the connected account settings through an [update\nsettings](https://docs.stripe.com/api/tax/settings/update) call. Perform a call\nproviding the head office location, the preset tax code, and the tax behavior by\nusing the `Stripe-Account` header with a value of the connected account ID.\n\n```\ncurl https://api.stripe.com/v1/tax/settings \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d \"defaults[tax_code]\"=txcd_10000000 \\\n -d \"defaults[tax_behavior]\"=inclusive \\\n -d \"head_office[address][country]\"=DE\n```\n\nThe updated `tax.settings` object now has a head office, a preset tax code, and\na default tax behavior, which allows you to enable Stripe Tax for this connected\naccount.\n\n```\n{\n \"object\": \"tax.settings\",\n \"defaults\": {\n \"tax_code\": \"txcd_10000000\",\n \"tax_behavior\": \"inclusive\"\n },\n \"head_office\": {\n \"address\": {\n \"country\": \"DE\"\n }\n },\n \"livemode\": false,\n \"status\": \"active\",\n \"status_details\": {\n \"active\": {}\n }\n}\n```\n\n### Validations and errors\n\nThe tax codes must refer to [available tax\ncodes](https://docs.stripe.com/tax/tax-codes) and the [tax\nbehavior](https://docs.stripe.com/tax/products-prices-tax-codes-tax-behavior#tax-behavior)\nmust be set as `inclusive`, `exclusive`, or `inferred_by_currency` (after being\nset, it can’t be set to null). The `head_office` must include a supported\naddress.\n\nThe `head_office[address]` has the fields `line1`, `line2`, `city`, `state`,\n`postal_code`, and `country`. The tables below describe the supported address\nformats.\n\nUnited StatesCanadaUkraineEverywhere elseExample addresses ExplanationSupported\n- `line1`: 27 Fredrick Ave\n- `city`: Brothers\n- `state`: OR\n- `postal_code`: 97712\n- `country`: US\n\n**Full address**\n\nA full address includes at least a line1 (street address or PO Box), city,\nstate, postal code, and country.\n\nThe address is matched to the closest address or street in the US Postal Service\naddress database. If a match isn’t found, we use the geographical center\n(average location of addresses) of the 5-digit postal code as a fallback.\n\n9-digit postal code:\n\n- `postal_code`: 97712-4918\n- `country`: US\n\n5-digit postal code:\n\n- `postal_code`: 97712\n- `country`: US\n\n**Country and postal code**\n\nIf you provide a 5-digit or 9-digit postal code, our system only uses the\ninitial 5 digits for tax calculations. The tax is calculated at the geographical\ncenter, which reflects the average location of addresses within the 5-digit\npostal code area. Check that this is [suitable for your\nbusiness](https://docs.stripe.com/tax/customer-locations#us-postal-codes).\n\n- `state`: OR\n- `country`: US\n\n**Country and state**\n\nWe can’t calculate tax for US customers with only an ISO [country\ncode](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes) and [state\ncode](https://en.wikipedia.org/wiki/ISO_3166-2).\n\n- `country`: US\n\n**Country**\n\nWe can’t calculate tax for US customers with only an [ISO country\ncode](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes).\n\nUse one of the above address formats to make sure that we can consistently\nrecognize your connected account’s head office location. The country field must\nalways be a valid [ISO country code](https://en.wikipedia.org/wiki/ISO_3166-1).\n\n#### Note\n\nThe validation and errors listed here are part of the setup phase. You can still\nsee other errors when trying to [call the API on your Stripe\nintegration](https://docs.stripe.com/tax/set-up#integrate).\n\n## See also\n\n- [Use the Registrations API to manage tax\nregistrations](https://docs.stripe.com/tax/registrations-api)\n- [Use Stripe Tax with Connect](https://docs.stripe.com/tax/connect)\n\n## Links\n\n- [Stripe Tax Settings API](https://docs.stripe.com/api/tax/settings)\n- [Stripe Dashboard](https://docs.stripe.com/tax/set-up)\n- [retrieve the tax.settings\nobject](https://docs.stripe.com/api/tax/settings/retrieve)\n-\n[tax.settings.updated](https://docs.stripe.com/api/events/types#event_types-tax.settings.updated)\n- [take webhooks live](https://docs.stripe.com/webhooks#register-webhook)\n-\n[status_details[pending][missing_fields]](https://docs.stripe.com/api/tax/settings/object#tax_settings_object-status_details-pending-missing_fields)\n- [update settings](https://docs.stripe.com/api/tax/settings/update)\n- [available tax codes](https://docs.stripe.com/tax/tax-codes)\n- [tax\nbehavior](https://docs.stripe.com/tax/products-prices-tax-codes-tax-behavior#tax-behavior)\n- [suitable for your\nbusiness](https://docs.stripe.com/tax/customer-locations#us-postal-codes)\n- [country code](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes)\n- [state code](https://en.wikipedia.org/wiki/ISO_3166-2)\n- [ISO country code](https://en.wikipedia.org/wiki/ISO_3166-1)\n- [call the API on your Stripe\nintegration](https://docs.stripe.com/tax/set-up#integrate)\n- [Use the Registrations API to manage tax\nregistrations](https://docs.stripe.com/tax/registrations-api)\n- [Use Stripe Tax with Connect](https://docs.stripe.com/tax/connect)",
  "metadata": {
    "title": "Use the Settings API to configure Stripe Tax | Stripe Documentation",
    "description": "Use the Tax Settings API to configure and validate tax settings. You can use the API to enable tax calculation for connected accounts.",
    "sourceURL": "https://docs.stripe.com/tax/settings-api"
  }
}