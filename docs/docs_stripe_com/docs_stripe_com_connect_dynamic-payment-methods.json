{
  "content": "# Update to use dynamic payment methods\n\n## Add dynamic payment methods to your existing platform.\n\nThis guide provides instructions for existing platforms to integrate dynamic\npayment methods. If you’re setting up a new platform, start with the [Connect\nintegration guide](https://docs.stripe.com/connect/design-an-integration).\n\n## Integration instructions for dynamic payment methods\n\nUse the following form to select your integration. If you need help determining\nyour platform setup, including checkout solution, connected account types, and\ncharge types, refer to [Create a\ncharge](https://docs.stripe.com/connect/charges).\n\nPayments integration:Stripe CheckoutCheckout is a Stripe-hosted payment\nform.Payment ElementPayment Element (for web and mobile) is a UI component that\nyou embed into your website or app.Charge type:Direct chargesDestination\nchargesSeparate charges and transfersDashboard access:StripeExpressNone[Enable\npayment methods for connected\naccountsRecommended](https://docs.stripe.com/connect/dynamic-payment-methods#enable-payment-methods-connected-accounts)\nIf necessary, consult the following resources for payment method information:\n\n- [A guide to payment\nmethods](https://stripe.com/payments/payment-methods-guide#choosing-the-right-payment-methods-for-your-business)\nfor help in choosing the right payment methods for your platform.\n- [Account capabilities](https://docs.stripe.com/connect/account-capabilities)\nto make sure your chosen payment methods work for your connected accounts.\n- [Payment method and product\nsupport](https://docs.stripe.com/payments/payment-methods/payment-method-support#product-support)\ntable to make sure your chosen payment methods work for your Stripe products and\npayments flows.\n\nStripe enables certain payment methods for your connected accounts by default.\nVisit the [Manage payment methods for your connected\naccounts](https://dashboard.stripe.com/settings/payment_methods/connected_accounts)\npage in your Dashboard to configure which payment methods your connected\naccounts accept. Changes to default settings apply to all new and existing\nconnected accounts.\n\nFor each payment method, you can select one of the following dropdown options:\n\nOn by defaultYour connected accounts accept this payment method during checkout.\nSome payment methods can only be off or blocked, this is because the owners of\nyour platform’s connected accounts must activate them in their Dashboard\nsettings page.Off by defaultYour connected accounts don’t accept this payment\nmethod during checkout. If you allow the owners of your platform’s connected\naccounts to manage their own payment methods in their Dashboard, however, they\nhave the ability to turn it on.BlockedYour connected accounts don’t accept this\npayment method during checkout. If you allow the owners of your platform’s\nconnected accounts to manage their own payment methods in their Dashboard, they\ndon’t have the option to turn it on.\n\n![Dropdown options for payment methods, each showing an available option\n(blocked, on by default, off by\ndefault)](https://b.stripecdn.com/docs-statics-srv/assets/dropdowns.ef651d721d5939d81521dd34dde4577f.png)\n\nPayment method options\n\nIf you make a change to a payment method, you must click **Review changes** in\nthe bottom bar of your screen and **Save and apply** to update your connected\naccounts.\n\n![Dialog that shows after clicking Save button with a list of what the user\nchanged](https://b.stripecdn.com/docs-statics-srv/assets/dialog.a56ea7716f60db9778706790320d13be.png)\n\nSave dialog\n\n[Allow your connected accounts to manage their payment\nmethodsRecommended](https://docs.stripe.com/connect/dynamic-payment-methods#allow-connected-accounts-manage)\nStripe recommends that you allow the owners of your platform’s connected\naccounts to customize their own payment methods from the Dashboard. If you\nenable this option, then each connected account with Stripe Dashboard access can\nlog in to their Dashboard and view their [Payment\nmethods](https://dashboard.stripe.com/settings/payment_methods) page. The\nDashboard displays the set of payment method defaults you applied to all new and\nexisting connected accounts. The owners of your platform’s connected accounts\ncan override these defaults, excluding payment methods you have blocked.\n\nCheck the **Account customization** checkbox to enable this option. You must\nclick **Review changes** in the bottom bar of your screen and then select **Save\nand apply** to update this setting.\n\n![Screenshot of the checkbox to select when allowing connected owners to\ncustomize payment\nmethods](https://b.stripecdn.com/docs-statics-srv/assets/checkbox.275bd35d2a025272f03af029a144e577.png)\n\nAccount customization checkbox\n\n[Integrate Checkout using dynamic payment\nmethodsRequired](https://docs.stripe.com/connect/dynamic-payment-methods#integrate)\nPreviously, you might have used the `payment_method_types` parameter when\ndefining your Checkout session to accept different payment methods. To begin\nmanaging your payment methods in the Dashboard, remove this parameter from your\nintegration.\n\nAfter you remove the `payment_method_types` parameter from your integration,\nsome payment methods turn on automatically, including cards and wallets. The\n`currency` parameter restricts the payment methods that are shown to the\ncustomer during the checkout session.\n\n```\nStripe::Checkout::Session.create({\nmode: 'payment',\n# Remove the payment_method_types parameter\n# to manage payment methods in the Dashboard\npayment_method_types: ['card'],\nline_items: [{\n price_data: {\n # The currency parameter determines which\n # payment methods are used in the Checkout Session.\n currency: 'eur',\n product_data: {\n name: 'T-shirt',\n },\n unit_amount: 2000,\n },\n quantity: 1,\n }],\n success_url: 'https://example.com/success',\n cancel_url: 'https://example.com/cancel',\n})\n```\n\n[Enable shipping address collection in\nCheckoutRecommended](https://docs.stripe.com/connect/dynamic-payment-methods#collect-shipping-address)\nIf you collect [shipping\naddresses](https://docs.stripe.com/payments/collect-addresses?payment-ui=checkout),\nyou need to define which countries you can ship to when you create the Checkout\nsession. Specify the two-letter ISO country codes in the\n`shipping_address_collection.allowed_countries`\n[parameter](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-shipping_address_collection-allowed_countries).\n\nYou can optionally add shipping rates with the `shipping_options`\n[parameter](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-shipping_options).\n\nIf you use Afterpay or Clearpay, you must collect shipping addresses, but you\ndon’t need to specify shipping rates for those payment methods.\n\n#### Note\n\nShipping address collection is required to use Afterpay or Clearpay as a payment\nmethod in Checkout, but shipping rates aren’t.\n\n[Handle delayed notification payment methods, if\napplicableRecommended](https://docs.stripe.com/connect/dynamic-payment-methods#delayed)\nFollow the steps in our [Manage payment methods in the\nDashboard](https://docs.stripe.com/payments/dashboard-payment-methods#delayed-notifications)\nguide on how to [handle delayed notification payment\nmethods](https://docs.stripe.com/payments/dashboard-payment-methods#delayed-notifications).\n\n[Test your\nintegrationRecommended](https://docs.stripe.com/connect/dynamic-payment-methods#test)\n[Test your\nintegration](https://docs.stripe.com/payments/dashboard-payment-methods#testing)\nto ensure it performs as you expect. Log in to one of your test accounts and\nnavigate to **Payment methods** settings to view your settings for your\nconnected accounts. Test your checkout flow with your test API key and a test\naccount. If a payment method you expect to be available is not available, check\nthe [payment method product support\ntable](https://docs.stripe.com/connect/account-capabilities#payment-methods) to\nmake sure your products and merchants are in a compatible currency and country.\n\n[Have your connected accounts with Stripe Dashboard access enable any payment\nmethods that require setup\nstepsOptional](https://docs.stripe.com/connect/dynamic-payment-methods#auto-payment)\nYour connected accounts with Stripe Dashboard access are able to use most\npayment methods by default; however, some payment methods (such as Alipay and\nWeChat Pay) require your users to manually activate the payment method in their\nDashboard. Confirm which payment methods require manual activation using the\n[payment method\ncapabilities](https://docs.stripe.com/connect/account-capabilities#payment-methods)\ntable. If the **Available by default** column reads **no**, the payment method\nrequires manual activation.\n\nIf you allow the owners of your platform’s connected accounts to manage payment\nmethods, then instruct them to enable these payment methods from their\n[Dashboard](https://dashboard.stripe.com/settings/payment_methods).\n\n![Screenshot of connected account payment method customization through Dashboard\nshowing available payment methods as on and\navailable.](https://b.stripecdn.com/docs-statics-srv/assets/turn-on-payments.afef26196ebae8f5564d328d6ba73b92.png)\n\nPayment method customization\n\nIf you don’t allow the owners of your platform’s connected accounts to customize\npayment methods, then instruct them to visit their [manual settings\npage](https://dashboard.stripe.com/settings/payment_methods).\n\n![Screenshot of manual settings page with payment methods listed with the option\nto request access, request invite, or\nconfigure.](https://b.stripecdn.com/docs-statics-srv/assets/manual-settings.db0a0c2abebb94e197e1bef683ea7db9.png)\n\nManual settings for payment methods\n\n#### Private preview\n\nThe **embedded payment method settings component** allows connected accounts to\nconfigure the payment methods they offer at checkout without the need to access\nthe Stripe Dashboard. [Request\naccess](https://docs.stripe.com/connect/supported-embedded-components/payment-method-settings#request-access)\nand learn how to [integrate with Payment Method\nConfigurations](https://docs.stripe.com/connect/supported-embedded-components/payment-method-settings#integration).\n\n## See also\n\n- [Connect integration guide](https://docs.stripe.com/connect/charges)\n- [Payment method configurations\nAPI](https://docs.stripe.com/connect/payment-method-configurations)\n- [Multiple payment method\nconfigurations](https://docs.stripe.com/connect/multiple-payment-method-configurations)\n- [Add payment method\ncapabilities](https://docs.stripe.com/connect/payment-methods)\n\n## Links\n\n- [Connect integration\nguide](https://docs.stripe.com/connect/design-an-integration)\n- [Create a charge](https://docs.stripe.com/connect/charges)\n- [A guide to payment\nmethods](https://stripe.com/payments/payment-methods-guide#choosing-the-right-payment-methods-for-your-business)\n- [Account capabilities](https://docs.stripe.com/connect/account-capabilities)\n- [Payment method and product\nsupport](https://docs.stripe.com/payments/payment-methods/payment-method-support#product-support)\n- [Manage payment methods for your connected\naccounts](https://dashboard.stripe.com/settings/payment_methods/connected_accounts)\n- [Payment methods](https://dashboard.stripe.com/settings/payment_methods)\n- [https://example.com/success](https://example.com/success)\n- [https://example.com/cancel](https://example.com/cancel)\n- [shipping\naddresses](https://docs.stripe.com/payments/collect-addresses?payment-ui=checkout)\n-\n[parameter](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-shipping_address_collection-allowed_countries)\n-\n[parameter](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-shipping_options)\n- [Manage payment methods in the\nDashboard](https://docs.stripe.com/payments/dashboard-payment-methods#delayed-notifications)\n- [Test your\nintegration](https://docs.stripe.com/payments/dashboard-payment-methods#testing)\n- [payment method product support\ntable](https://docs.stripe.com/connect/account-capabilities#payment-methods)\n- [Request\naccess](https://docs.stripe.com/connect/supported-embedded-components/payment-method-settings#request-access)\n- [integrate with Payment Method\nConfigurations](https://docs.stripe.com/connect/supported-embedded-components/payment-method-settings#integration)\n- [Payment method configurations\nAPI](https://docs.stripe.com/connect/payment-method-configurations)\n- [Multiple payment method\nconfigurations](https://docs.stripe.com/connect/multiple-payment-method-configurations)\n- [Add payment method\ncapabilities](https://docs.stripe.com/connect/payment-methods)",
  "metadata": {
    "title": "Update to use dynamic payment methods | Stripe Documentation",
    "description": "Add dynamic payment methods to your existing platform.",
    "sourceURL": "https://docs.stripe.com/connect/dynamic-payment-methods"
  }
}