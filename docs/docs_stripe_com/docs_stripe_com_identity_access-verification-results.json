{
  "content": "# Access verification results\n\n## Learn how to access sensitive verification results.\n\nYou wrote code to [display a modal to collect identity\ndocuments](https://docs.stripe.com/identity/verify-identity-documents) and\n[handle verification\noutcomes](https://docs.stripe.com/identity/handle-verification-outcomes). Now\nyou might need access to the sensitive verification results such as your user’s\ndate of birth or pictures of the collected document.\n\nFirst, consider using the [Identity\nDashboard](https://dashboard.stripe.com/identity) to access sensitive\nverification results. If needed, [give team members controlled\naccess](https://docs.stripe.com/get-started/account/teams) to your Stripe\naccount. This saves you development time and ensures the sensitive verification\ndata is kept\n[securely](https://support.stripe.com/questions/managing-your-id-verification-information)\non Stripe.\n\nYou can [access most verification details\nprogrammatically](https://docs.stripe.com/identity/verification-sessions#results),\nsuch as the result of a verification check or the user’s name and address using\nyour [secret key](https://docs.stripe.com/keys). Access to more sensitive fields\nrequire the use of [restricted API\nkeys](https://docs.stripe.com/keys#limit-access).\n\nVerification resultAvailable in DashboardSecret key accessRestricted API key\naccessRecommended Verification Session fieldExpand\npropertyAddress`verified_outputs.address``verified_outputs`Document\ntype`last_verification_report.document.type``last_verification_report`First and\nlast names`verified_outputs.first_name and\nverified_outputs.last_name``last_verification_report`Issuing country of the\ndocument`last_verification_report.document.issuing_country``last_verification_report`Result\nof the verification check`status`Expand not requiredIssued date of the\ndocument`last_verification_report.document.issued_date``last_verification_report`Type\nof ID\nnumber`last_verification_report.document.id_number.type``last_verification_report`Email\naddress`verified_outputs.email``verified_outputs`Phone\nnumber`verified_outputs.phone``verified_outputs`Expiration date of the\ndocument`last_verification_report.document.expiration_date``last_verification_report.document.expiration_date`Date\nof birth`verified_outputs.dob``verified_outputs.dob`Document ID\nnumber`last_verification_report.document.number``last_verification_report.document.number`Document\nimages`last_verification_report.document.files``last_verification_report`Face\nimages`last_verification_report.selfie.selfie``last_verification_report`ID\nnumber`verified_outputs.id_number``verified_outputs.id_number`\nRestricted API keys allow access based on the security measures associated with\nit:\n\n- **Restricted keys** — Allow access to sensitive verification results for\nverifications processed in the last 48 hours.\n- **IP restricted keys** - Allow access to sensitive verification results for\nall verifications.\n\nIn this guide, you’ll learn how to:\n\n- Consider your sensitive data access requirements carefully.\n- Create restricted API keys.\n- Make API requests to obtain sensitive verification results.\n- Roll your keys if they’re compromised.\n- Communicate your sensitive verification results and security measures to your\nusers.\n- Add IP restrictions to your key for long-term access to sensitive verification\nresults.\n- Consider your sensitive data access requirements carefully.\n- Create restricted API keys.\n- Make API requests to obtain sensitive verification results.\n- Roll your keys if they’re compromised.\n- Communicate your sensitive verification results and security measures to your\nusers.\n[Consider your sensitive data access requirements\ncarefully](https://docs.stripe.com/identity/access-verification-results#decide-access-requirements)\nTo build an integration with Stripe Identity that prioritizes your user’s\nprivacy, you must first decide the minimum amount of PII that you need access\nto. If you don’t need access to the most sensitive data (that requires\nauthentication with a restricted API key), then your integration can\nauthenticate using your secret key only.\n\nTo access PII resulting from a verification, you can retrieve a\nVerificationSession and [expand](https://docs.stripe.com/api/expanding_objects)\neither the\n[verified_outputs](https://docs.stripe.com/api/identity/verification_sessions/object#identity_verification_session_object-verified_outputs)\nfield or - if you need more granular detail on the verification result - the\n[last_verification_report](https://docs.stripe.com/api/identity/verification_sessions/object#identity_verification_session_object-last_verification_report).\nExpanding either of these fields automatically includes all of the PII fields\nthey contain that only require a secret key.\n\nHere is an example of how to expand the `verified_outputs` field to retrieve a\nuser’s name that was verified by Stripe Identity.\n\n```\n// Set your secret key. Remember to switch to your live secret key in\nproduction.\n// See your keys here: https://dashboard.stripe.com/apikeys\nconst stripe = require('stripe')('sk_test_BQokikJOvBiI2HlWgH4olfQ2');\n\nconst verificationSession = await stripe.identity.verificationSessions.retrieve(\n '{{SESSION_ID}}',\n {\n expand: [\n 'verified_outputs',\n ],\n }\n);\n\nconst firstName = verificationSession.verified_outputs.first_name;\n```\n\nIf you do need to access sensitive PII that requires a restricted key, follow\nthe steps in this guide.\n\n[Create a restricted API\nkeyDashboard](https://docs.stripe.com/identity/access-verification-results#create-restricted-key)\nYou can use your account’s secret API keys to perform any API request without\nrestriction. Accessing sensitive verification results requires [restricted\nkeys](https://docs.stripe.com/keys#limit-access), which are more secure.\n\nTo create a new restricted key,\n\n- Go to the [API keys page](https://dashboard.stripe.com/apikeys) in the\nDashboard and click [Create restricted\nkey](https://dashboard.stripe.com/apikeys/create).\n- Name your key.\n- Make sure the Identity **Verification Sessions and Reports** and **Access\nrecent sensitive verification results** permissions are set to **Read**.\n- (optional) If you need to access collected images, add the Files **Write**\npermission.\n- Click **Create key**.\n- Store the key securely. [Learn more about keeping your keys\nsafe](https://docs.stripe.com/keys#safe-keys).\n\n!\n\n[Make API requests to obtain sensitive verification\nresultsServer-side](https://docs.stripe.com/identity/access-verification-results#api-request)\n\n[VerificationReports](https://docs.stripe.com/api/identity/verification_reports)\ncontain all the collected data and verification results from a submitted\nsession. VerificationReports are created when all verification checks for a\nsession are processed. They allow you to understand why a verification check\nfailed and what data was successfully verified.\n\nYou can [expand](https://docs.stripe.com/expand) the\n[last_verification_report](https://docs.stripe.com/api/identity/verification_sessions/object#identity_verification_session_object-last_verification_report)\nsession field to retrieve the associated VerificationReport.\n\nBy default, VerificationReports don’t include sensitive verification results. To\naccess these, you’ll need to:\n\n- Authenticate using the restricted API key created in step 1.\n- [Expand](https://docs.stripe.com/api/expanding_objects) the fields you want to\naccess.\n\nHere’s an example of accessing the extracted date of birth, ID number, and\ndocument number from a [document\ncheck](https://docs.stripe.com/identity/verification-checks?type=document):\n\n```\n// Set your restricted key. Remember to switch to a live restricted key in\nproduction.\n// See your keys here: https://dashboard.stripe.com/apikeys\nconst stripe = require('stripe')('rk_test_...');\n\nconst verificationSession = await stripe.identity.verificationSessions.retrieve(\n '{{SESSION_ID}}',\n {\n expand: [\n 'verified_outputs.dob',\n 'verified_outputs.id_number',\n 'last_verification_report.document.number',\n 'last_verification_report.document.expiration_date',\n ],\n }\n);\n\nconst dateOfBirth = verificationSession.verified_outputs.dob;\nconst idNumber = verificationSession.verified_outputs.id_number;\nconst documentNumber =\nverificationSession.last_verification_report.document.number;\nconst documentExpirationDate =\nverificationSession.last_verification_report.document.expiration_date;\n```\n\n## Accessing collected images\n\nYou can retrieve identity document and face images that you collect as part of a\nsession using the [File Upload API](https://docs.stripe.com/file-upload). The\nfollowing fields on a VerificationReport can hold a reference to a\n[File](https://docs.stripe.com/api/files) resource in the Stripe API:\n\n-\n[document.files](https://docs.stripe.com/api/identity/verification_reports/object#identity_verification_report_object-document-front)\n- images of the identity document\n-\n[selfie.document](https://docs.stripe.com/api/identity/verification_reports/object#identity_verification_report_object-selfie-document)\n- image of the photo ID front\n-\n[selfie.selfie](https://docs.stripe.com/api/identity/verification_reports/object#identity_verification_report_object-selfie-selfie)\n- image of the user’s face\n\n#### Note\n\nDocument and face images are very sensitive and some countries, such as Germany,\nhave laws prohibiting ID Document images from being shared or kept longer than\nnecessary. As much as possible, access image content with short-lived FileLinks,\ndon’t make copies of the file contents, and [redact\nsessions](https://docs.stripe.com/identity/verification-sessions#redact) and\ncollected images when you’re done using them for the purpose collected.\n\nTo access the contents of the file, you need to authenticate using the\npreviously created restricted key and [Create a\nFileLink](https://docs.stripe.com/api/file_links/create) with a short expiration\nand send the\n[url](https://docs.stripe.com/api/file_links/object#file_link_object-url) to the\nclient:\n\n```\n// Set your restricted key. Remember to switch to a live restricted key in\nproduction.\n// See your keys here: https://dashboard.stripe.com/apikeys\nconst stripe = require('stripe')('rk_test_...');\n\n// Get the VerificationReport\nconst session = await stripe.identity.verificationSessions.retrieve(\n '{{SESSION_ID}}',\n {\n expand: ['last_verification_report'],\n }\n);\n\n// Retrieve the File id\nconst report = session.last_verification_report;\nconst documentFrontFile = report.document.files[0];\n\n// Create a short-lived FileLink\nconst fileLink = await stripe.fileLinks.create({\n file: documentFrontFile,\n expires_at: Math.floor(Date.now() / 1000) + 30, // link expires in 30 seconds\n});\n\n// Access the FileLink URL to download file contents\nconst fileUrl = fileLink.url;\n```\n\n#### Note\n\nFileLinks for document and selfie files must expire within 30 seconds. We\nrecommend not downloading the file contents on your server, instead send the\nFileLink URL to the client to display the image.\n\nIf you believe an attacker has accessed sensitive data collected by Identity,\nplease [reach out to support](https://support.stripe.com/contact).\n\n[Roll your keys if they’re\ncompromisedDashboard](https://docs.stripe.com/identity/access-verification-results#roll-keys)\nUsing restricted API keys that only have Identity permissions allows you to roll\nthe keys in case of emergency without affecting other Stripe product\nintegrations.\n\nWe recommend that you regularly monitor your restricted key usage to ensure that\nno one has gained access to them. In the\n[Dashboard](https://dashboard.stripe.com/apikeys), you can use the overflow menu\n(**…**) to view request logs for a specific API key to view all the requests\nmade from that key.\n\nIf an API key is compromised, roll the key in the\n[Dashboard](https://dashboard.stripe.com/apikeys) to block it and generate a new\none. Make sure to expire it immediately to prevent bad actors from retrieving\nsensitive information.\n\n#### Warning\n\nRolling blocks the API key and generates a new one. We recommend reviewing your\n[security history](https://dashboard.stripe.com/security_history) for events\nrelated to this key. Any webhook endpoints created with this key will stay\nactive, even after the key is rolled.\n\nIf you believe an attacker has accessed sensitive data collected by Identity,\nplease [reach out to support](https://support.stripe.com/contact).\n\n[Communicate your sensitive data use and security\nmeasures](https://docs.stripe.com/identity/access-verification-results#tell-users)\nMake sure your privacy policy includes information on your use of sensitive\nverification results. It may also help if you provide information about your\nsecurity practices.\n\n**See also**\n\n- [Privacy considerations for handling ID verification data as a\nbusiness](https://support.stripe.com/questions/privacy-considerations-for-handling-id-verification-data-as-a-business)\n- [FAQs to provide to your\nusers](https://docs.stripe.com/identity/explaining-identity)\n[OptionalAdd IP restrictions for long-term access to\nresultsDashboard](https://docs.stripe.com/identity/access-verification-results#ip-allowlist)\n## See also\n\n- [Expanding responses](https://docs.stripe.com/api/expanding_objects)\n- [API Keys](https://docs.stripe.com/keys)\n- [Security at Stripe](https://docs.stripe.com/security)\n\n## Links\n\n- [display a modal to collect identity\ndocuments](https://docs.stripe.com/identity/verify-identity-documents)\n- [handle verification\noutcomes](https://docs.stripe.com/identity/handle-verification-outcomes)\n- [Identity Dashboard](https://dashboard.stripe.com/identity)\n- [give team members controlled\naccess](https://docs.stripe.com/get-started/account/teams)\n-\n[securely](https://support.stripe.com/questions/managing-your-id-verification-information)\n- [access most verification details\nprogrammatically](https://docs.stripe.com/identity/verification-sessions#results)\n- [secret key](https://docs.stripe.com/keys)\n- [restricted API keys](https://docs.stripe.com/keys#limit-access)\n- [expand](https://docs.stripe.com/api/expanding_objects)\n-\n[verified_outputs](https://docs.stripe.com/api/identity/verification_sessions/object#identity_verification_session_object-verified_outputs)\n-\n[last_verification_report](https://docs.stripe.com/api/identity/verification_sessions/object#identity_verification_session_object-last_verification_report)\n- [https://dashboard.stripe.com/apikeys](https://dashboard.stripe.com/apikeys)\n- [Create restricted key](https://dashboard.stripe.com/apikeys/create)\n- [Learn more about keeping your keys\nsafe](https://docs.stripe.com/keys#safe-keys)\n-\n[VerificationReports](https://docs.stripe.com/api/identity/verification_reports)\n- [expand](https://docs.stripe.com/expand)\n- [document\ncheck](https://docs.stripe.com/identity/verification-checks?type=document)\n- [File Upload API](https://docs.stripe.com/file-upload)\n- [File](https://docs.stripe.com/api/files)\n-\n[document.files](https://docs.stripe.com/api/identity/verification_reports/object#identity_verification_report_object-document-front)\n-\n[selfie.document](https://docs.stripe.com/api/identity/verification_reports/object#identity_verification_report_object-selfie-document)\n-\n[selfie.selfie](https://docs.stripe.com/api/identity/verification_reports/object#identity_verification_report_object-selfie-selfie)\n- [redact\nsessions](https://docs.stripe.com/identity/verification-sessions#redact)\n- [Create a FileLink](https://docs.stripe.com/api/file_links/create)\n- [url](https://docs.stripe.com/api/file_links/object#file_link_object-url)\n- [reach out to support](https://support.stripe.com/contact)\n- [security history](https://dashboard.stripe.com/security_history)\n- [Privacy considerations for handling ID verification data as a\nbusiness](https://support.stripe.com/questions/privacy-considerations-for-handling-id-verification-data-as-a-business)\n- [FAQs to provide to your\nusers](https://docs.stripe.com/identity/explaining-identity)\n- [Security at Stripe](https://docs.stripe.com/security)",
  "metadata": {
    "title": "Access verification results | Stripe Documentation",
    "description": "Learn how to access sensitive verification results.",
    "sourceURL": "https://docs.stripe.com/identity/access-verification-results"
  }
}