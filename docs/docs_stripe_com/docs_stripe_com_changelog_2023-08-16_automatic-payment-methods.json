{
  "content": "# Enables automatic payment methods by default for PaymentIntents and SetupIntentsBreaking changes\n\n## What’s new\n\n[PaymentIntents](https://docs.stripe.com/api/payment_intents) and\n[SetupIntents](https://docs.stripe.com/api/setup_intents) now have\n`automatic_payment_methods` enabled by default, which allows you to configure\npayment method settings from the\n[Dashboard](https://dashboard.stripe.com/settings/payment_methods). The previous\ndefault was to accept only card payments when both `payment_method_types` and\n`automatic_payment_methods` were not specified. For more information, see the\n[upgrade guide](https://docs.stripe.com/upgrades/manage-payment-methods).\n\n- When confirming a PaymentIntent, you’re now required to provide a\n`return_url`, unless `off_session=true`.\n- When confirming a PaymentIntent, you can’t use `error_on_requires_action`. Use\n`payment_method_types` with `error_on_requires_action` if you want to fail\npayment attempts when PaymentIntents transition into `requires_action`.\n- When confirming a SetupIntent, you’re now required to provide a `return_url`.\n- You can bypass the `return_url` requirement using\n`automatic_payment_methods[allow_redirects]=never`, this will automatically\nfilter payment methods that [require\nredirect](https://docs.stripe.com/payments/payment-methods/payment-method-support#additional-api-supportability)\neven if they’re enabled in the Dashboard.\n\n## Impact\n\nPaymentIntents and SetupIntents now use automatic payment methods by default,\nallowing for configuration through the Stripe Dashboard.\n\n## Upgrade\n\n- [View your current API\nversion](https://docs.stripe.com/upgrades#view-your-api-version-and-the-latest-available-upgrade-in-workbench)\nin Workbench.\n- If you use an SDK, upgrade to the corresponding SDK version for this API\nversion.- If you don’t use an SDK, update your [API\nrequests](https://docs.stripe.com/api/versioning) to include `Stripe-Version:\n2023-08-16`\n- Upgrade the API version used for [webhook\nendpoints](https://docs.stripe.com/webhooks/versioning).\n- [Test your integration](https://docs.stripe.com/testing) against the new\nversion.\n- If you use Connect, [test your Connect\nintegration](https://docs.stripe.com/connect/testing).\n- In Workbench, [perform the\nupgrade](https://docs.stripe.com/upgrades#perform-the-upgrade). You can [roll\nback the version](https://docs.stripe.com/upgrades#roll-back-your-api-version)\nfor 72 hours.\n\nLearn more about [Stripe API upgrades](https://docs.stripe.com/upgrades).\n\n## Links\n\n- [PaymentIntents](https://docs.stripe.com/api/payment_intents)\n- [SetupIntents](https://docs.stripe.com/api/setup_intents)\n- [Dashboard](https://dashboard.stripe.com/settings/payment_methods)\n- [upgrade guide](https://docs.stripe.com/upgrades/manage-payment-methods)\n- [require\nredirect](https://docs.stripe.com/payments/payment-methods/payment-method-support#additional-api-supportability)\n- [View your current API\nversion](https://docs.stripe.com/upgrades#view-your-api-version-and-the-latest-available-upgrade-in-workbench)\n- [API requests](https://docs.stripe.com/api/versioning)\n- [webhook endpoints](https://docs.stripe.com/webhooks/versioning)\n- [Test your integration](https://docs.stripe.com/testing)\n- [test your Connect integration](https://docs.stripe.com/connect/testing)\n- [perform the upgrade](https://docs.stripe.com/upgrades#perform-the-upgrade)\n- [roll back the\nversion](https://docs.stripe.com/upgrades#roll-back-your-api-version)\n- [Stripe API upgrades](https://docs.stripe.com/upgrades)",
  "metadata": {
    "title": "Enables automatic payment methods by default for PaymentIntents and SetupIntents | Stripe Documentation",
    "description": "",
    "sourceURL": "https://docs.stripe.com/changelog/2023-08-16/automatic-payment-methods"
  }
}