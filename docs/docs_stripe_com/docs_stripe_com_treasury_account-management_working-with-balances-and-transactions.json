{
  "content": "# Working with balances and transactions\n\n## Learn about Treasury account balances and the effect transactions have on them.\n\n[Financial\naccounts](https://docs.stripe.com/treasury/account-management/financial-accounts)\nhave their own balance separate from the balance of the account they’re attached\nto (platform account or connected account). `Balance` objects record the amount\nof funds in a financial account and their state of availability. `Transaction`\nand `TransactionEntry` objects debit or credit the funds in that balance.\n\n## Balances\n\nA financial account has a balance of funds. The sum total of the balance isn’t\nalways available for spending, however, as it might include pending transactions\ninto or out of the financial account. The financial account balance contains\nthree properties that define the availability of its funds:\n\n- `cash`—funds the user can spend right now.\n- `inbound_pending`—funds not spendable yet, but that will become available at a\nlater time. The `inbound_pending` property is reserved for future functionality\nand always has a value of 0.\n- `outbound_pending`—funds in the account, but not spendable because they’re\nbeing held for pending outbound flows.\n\nUse `GET /v1/treasury/financial_accounts/{{FINANCIAL_ACCOUNT_ID}}` to retrieve\nthe balance details of a financial account with the associated ID. Provide the\n`Stripe-Account` header if the financial account is attached to one of your\nconnected accounts. If the financial account is attached to your platform\naccount, don’t include the `Stripe-Account` header.\n\n```\ncurl\nhttps://api.stripe.com/v1/treasury/financial_accounts/{{FINANCIAL_ACCOUNT_ID}} \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\"\n```\n\nIf successful, the response is a\n[FinancialAccount](https://docs.stripe.com/api/treasury/financial_accounts)\nobject with a `balance` hash that details the funds and their availability.\n\n```\n{\n \"object\": \"treasury.financial_account\",\n \"id\": \"{{FINANCIAL_ACCOUNT_ID}}\",\n ...\n \"balance\": {\n // $90 is currently available for use,\n // with an additional $10 held in the outbound_pending sub-balance\n \"cash\": {\"usd\": 9000},\n \"inbound_pending\": {\"usd\": 0},\n \"outbound_pending\": {\"usd\": 1000}\n }\n}\n```\n\n### Negative balances and overdrafts\n\nIf your connected account has a negative balance (for example, if your financial\naccount receives an ACH credit that gets reversed), you’re responsible for\nrestoring it to 0 USD. After 180 days of staying negative, Stripe debits your\nplatform. We also contact you if individual or aggregate balances exceed our\nrisk limits.\n\nWe recommend that you monitor your connected accounts to retrieve funds for\ntheir negative balances. You can top up funds into your financial account using\n[Inbound\nTransfers](https://docs.stripe.com/treasury/moving-money/financial-accounts/into/inbound-transfers)\nor [Stripe Payouts](https://docs.stripe.com/treasury/moving-money/payouts). Make\nsure that you regularly monitor your connected account balances and reach out\npromptly.\n\nAfter a financial account has been negative for 180 days, Stripe debits funds\nfrom your platform’s financial account and emails you ahead of time. If the\ntransfer fails due to insufficient funds, Stripe contacts you with next steps.\n\n## Transactions\n\nAll changes to a balance have a corresponding\n[Transaction](https://docs.stripe.com/api/treasury/transactions) object that\ndetails money movements. Transactions affect only one balance and are in only\none currency (currently, Stripe Treasury supports only USD).\n\nEach transaction points to the balance-affecting money movement object, such as\nan [OutboundTransfer](https://docs.stripe.com/api/treasury/outbound_transfers),\n[ReceivedCredit](https://docs.stripe.com/api/treasury/received_credits), or\n[ReceivedDebit](https://docs.stripe.com/api/treasury/received_debits).\n\n### Transaction state machine\n\nStatusState appliedDescriptionTransitions to`open`initialThis is the initial\nstate for all transactions. The transaction results in updates to the\nsub-balance amounts, but the current balance isn’t affected until the\ntransaction posts.`posted` or `void``posted`terminalFunds have successfully\nentered or left the account. The current balance was\naffected.N/A`void`terminalThe transaction never impacted the balance. For\nexample, a transaction enters this state if an outbound payment was initiated\nbut then canceled before the funds left the account.N/A\nThe available `Transaction` endpoints enable you to retrieve specific\ntransactions and list or filter transactions affecting a financial account.\nThere are no webhooks available for transactions, but webhooks are available for\nthe associated money movement objects (for example, `OutboundPayments`).\n\n## Retrieve a transaction\n\nUse `GET/v1/treasury/transactions/{{TRANSACTION_ID}}` to retrieve the\ntransaction with the associated ID.\n\n```\ncurl https://api.stripe.com/v1/treasury/transactions/txn_123 \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\"\n```\n\nIf successful, the response returns the `Transaction` object.\n\n```\n{\n \"id\": \"{{TRANSACTION_ID}}\",\n \"object\": \"treasury.transaction\",\n \"created\": \"{{Timestamp}}\",\n \"livemode\": false,\n // The FinancialAccount this Transaction impacts\n \"financial_account\": \"{{FINANCIAL_ACCOUNT_ID}}\",\n // The flow responsible for this Transaction. Each Transaction is created\n // synchronously (that is, in the same API request for initiated objects) with\n // its flow.\n```\n\nSee all 75 lines\n### List Transactions\n\nUse `GET /v1/treasury/transactions` to list transactions for a financial\naccount. Set the required `financial_account` parameter in the body to the value\nof the financial account ID to retrieve transactions for. Include additional\nparameters to filter the results returned.\n\nIn addition to the [standard set of list\nparameters](https://docs.stripe.com/api/pagination), you can filter transactions\nby the following.\n\n- `status`\n- `flow`\n- Either `created` or `posted_at`, but not both\n\n```\n{\n // Standard list parameters\n limit, starting_after, ending_before,\n // Filter by FinancialAccount, required\n financial_account: \"{{FINANCIAL_ACCOUNT_ID}}\"\n // Filter by status\n status: \"open\" | \"posted\" | \"void\",\n // Filter by flow\n flow: \"{{FLOW_OBJECT_ID}}\",\n// Order the results by the created or posted_at timestamps, default is\n`created`.\n // For order_by=posted_at, setting status='posted' is required\n order_by: \"created\" | \"posted_at\",\n // created can only be specified with order_by = 'created'\n created: {gt, gte, lt, lte},\n status_transitions: {\n// status_transitions.posted_at can only be specified with order_by =\n'posted_at' and status = 'posted'\n posted_at: {gt, gte, lt, lte}\n }\n}\n\n```\n\nThe following request retrieves the three most recent transactions created on\nthe financial account that have a `status` of `posted`.\n\n```\ncurl -G https://api.stripe.com/v1/treasury/transactions \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d financial_account={{FINANCIAL_ACCOUNT_ID}} \\\n -d limit=3 \\\n -d status=posted \\\n -d order_by=created\n```\n\n### Webhooks\n\nThere are no webhooks for transactions because the various money movements that\ninitiate a transaction have their own webhooks.\n\n## Transaction entries\n\n[TransactionEntry](https://docs.stripe.com/api/treasury/transaction_entries)\nobjects are the most granular view of money movements that affect a financial\naccount balance. A single flow of money comprises multiple individual money\nmovements, each represented by a transaction. Transactions, in turn, are an\naggregation of transaction entries. For example, when initiating an outbound\npayment of 10 USD at time T, funds are moved from the `cash` sub-balance to the\n`outbound_pending` sub-balance. The following `Transaction` object response\ndemonstrates this initial event.\n\n```\n{\n \"id\": \"{{TRANSACTION_ID}}\",\n \"object\": \"treasury.transaction\",\n \"created\": \"{{T}}\",\n ...\n \"flow\": \"{{OUTBOUND_PAYMENT_ID}}\",\n \"flow_type\": \"outbound_payment\",\n \"status\": \"open\",\n \"amount\": -1000,\n \"currency\": \"usd\",\n```\n\nSee all 36 lines\nAfter the outbound payment posts at time T+1, the funds are deducted from\n`outbound_pending` and a new transaction entry is added to the transaction. The\nfollowing `Transaction` response demonstrates this progression.\n\n```\n{\n \"id\": \"{{TRANSACTION_ID}}\",\n \"object\": \"treasury.transaction\",\n \"created\": \"{{T}}\",\n ...\n \"flow\": \"{{OUTBOUND_PAYMENT_ID}}\",\n \"flow_type\": \"outbound_payment\",\n \"status\": \"posted\",\n \"amount\": -1000,\n \"currency\": \"usd\",\n```\n\nSee all 49 lines\nAs the preceding responses show, a transaction can contain multiple transaction\nentries. The available `TransactionEntry` endpoints enable you to retrieve\nspecific transaction entries and list or filter them for a particular\ntransaction.\n\nA `Transaction` in the `void` status won’t have any new transaction entries\nadded to it. A `Transaction` in the `posted` status where all `balance_impact`\nis to the `cash` sub-balance won’t have any new transaction entries added to it,\neither.\n\n### Retrieve transaction entries\n\nUse `GET /v1/treasury/transaction_entries/{{TRANSACTIONENTRY_ID}}` to retrieve\ndetails for the transaction entry with the associated ID.\n\n```\ncurl\nhttps://api.stripe.com/v1/treasury/transaction_entries/{{TRANSACTION_ENTRY_ID}}\n\\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\"\n```\n\nIf successful, the response returns a `TransactionEntry` object with the\nfollowing form.\n\n```\n{\n \"id\": \"{{TRANSACTION_ENTRY_ID}}\",\n \"object\": \"treasury.transaction_entry\",\n \"created\": \"{{Timestamp}}\",\n \"livemode\": false,\n // The FinancialAccount this transaction entry impacts.\n \"financial_account\": \"{{FINANCIAL_ACCOUNT_ID}}\",\n // The transaction that this transaction entry belongs to.\n \"transaction\": \"{{TRANSACTION_ID}}\",\n // The flow responsible for this transaction entry.\n```\n\nSee all 56 lines\n### List TransactionEntries\n\nUse `GET /v1/treasury/transaction_entries` to list the transaction entries for a\nfinancial account. Set the required `financial_account` parameter in the body to\nthe value of the financial account ID to retrieve transaction entries for.\nInclude additional parameters if you want to filter the list.\n\nIn addition to the [standard set of list\nparameters](https://docs.stripe.com/api/pagination), you can filter transaction\nentries by:\n\n- `transaction`\n- Either `created` or `effective_at`, but not both\n\n```\n{\n // Standard list parameters\n limit, starting_after, ending_before,\n // Filter by FinancialAccount, required\n financial_account: \"fa_123\"\n // Filter by transaction\n transaction: 'trxn_123',\n// Order the results by the created or effective_at timestamps, default is\n`created`.\n order_by: \"created\" | \"effective_at\",\n // created can only be specified with order_by = 'created'\n created: {gt, gte, lt, lte},\n // effective_at can only be specified with order_by = 'effective_at'\n effective_at: {gt, gte, lt, lte},\n}\n\n```\n\nThe following request retrieves the transaction entries created before\n`{{Timestamp}}` and orders them by `created` date.\n\n```\ncurl -G https://api.stripe.com/v1/treasury/transaction_entries \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d financial_account={{FINANCIAL_ACCOUNT_ID}} \\\n -d order_by=created \\\n -d \"created[lt]\"=1234567890\n```\n\n### Webhooks\n\nThere are no webhooks for transaction entries because the various money\nmovements that initiate a transaction entry have their own webhooks.\n\n## Links\n\n- [Financial\naccounts](https://docs.stripe.com/treasury/account-management/financial-accounts)\n- [FinancialAccount](https://docs.stripe.com/api/treasury/financial_accounts)\n- [Inbound\nTransfers](https://docs.stripe.com/treasury/moving-money/financial-accounts/into/inbound-transfers)\n- [Stripe Payouts](https://docs.stripe.com/treasury/moving-money/payouts)\n- [Transaction](https://docs.stripe.com/api/treasury/transactions)\n- [OutboundTransfer](https://docs.stripe.com/api/treasury/outbound_transfers)\n- [ReceivedCredit](https://docs.stripe.com/api/treasury/received_credits)\n- [ReceivedDebit](https://docs.stripe.com/api/treasury/received_debits)\n- [standard set of list parameters](https://docs.stripe.com/api/pagination)\n- [TransactionEntry](https://docs.stripe.com/api/treasury/transaction_entries)",
  "metadata": {
    "title": "Working with balances and transactions | Stripe Documentation",
    "description": "Learn about Treasury account balances and the effect transactions have on them.",
    "sourceURL": "https://docs.stripe.com/treasury/account-management/working-with-balances-and-transactions"
  }
}