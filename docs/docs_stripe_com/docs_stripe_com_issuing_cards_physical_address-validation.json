{
  "content": "# Physical cards address validation\n\n## Enable and manage address validation features for physical cards.\n\nStripe Issuing needs accurate and properly formatted shipping addresses to\nensure successful delivery of physical cards to their intended recipient. Cards\nsent to invalid addresses get returned to Stripe, but the delivery attempt and\nthe eventual return can take over 2 weeks to complete. Returned cards can create\nan operational burden, increase your overall costs, and delay your cardholders’\nreceipt of your physical cards.\n\nTo maximize your delivery success, Stripe’s Cards API has built-in address\nnormalization and validation. Stripe compares the shipping address you provide\nto a third-party address database and identifies or fixes any issues with the\naddress.\n\n## Address normalization\n\nNormalization ensures that your addresses adhere to the standards of the\nshipment’s country while also correcting any obvious errors in your addresses.\n\nExamples of normalization include:\n\n### Address standardization to ensure proper formatting\n\n```\n// Before\n\"shipping\": {\n \"address\": {\n\"line1\": \"354 Oyster Point Blvd South San Francisco, CA 94080\", // incorrectly\nformatted line1\n \"city\": \"South San Francisco\",\n \"postal_code\": \"94080\",\n \"state\": \"CA\",\n \"country\": \"US\"\n }\n}\n\n// After\n\"shipping\": {\n \"address\": {\n \"line1\": \"354 OYSTER POINT BLVD\",\n \"city\": \"SOUTH SAN FRANCISCO\",\n \"postal_code\": \"94080\",\n \"state\": \"CA\",\n \"country\": \"US\"\n }\n}\n```\n\n### Address correction to apply corrections found from matching with an existing validated address\n\n```\n// Before\n\"shipping\": {\n \"address\": {\n \"line1\": \"354 Oyster Point\",\n \"city\": \"South San Francisco\",\n \"postal_code\": \"94080\",\n \"state\": \"NM\", // incorrect state with an available correction\n \"country\": \"US\"\n }\n}\n\n// After\n\"shipping\": {\n \"address\": {\n \"line1\": \"354 OYSTER POINT BLVD\", // added BLVD suffix\n \"city\": \"SOUTH SAN FRANCISCO\",\n \"postal_code\": \"94080\",\n \"state\": \"CA\", // corrected state\n \"country\": \"US\"\n }\n}\n```\n\nThe normalized address is included in the [address\nvalidation](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation)\nhash that is returned after successfully creating a physical card or updating a\ncard’s shipping address with address normalization enabled.\n\n### Sample address validation\n\n```\n\"shipping\": {\n // address supplied during card creation\n \"address\": {\n \"line1\": \"354 Oyster Point Blvd South San Francisco, TX 94080\",\n \"city\": \"South San Francisco\",\n \"postal_code\": \"94080\",\n \"state\": \"TX\",\n \"country\": \"US\"\n },\n // address validation hash\n \"address_validation\": {\n // the normalized address\n \"normalized_address\": {\n \"line1\": \"354 OYSTER POINT BLVD\",\n \"city\": \"SOUTH SAN FRANCISCO\",\n \"state\": \"CA\",\n \"postal_code\": \"94080\",\n \"country\": \"US\"\n },\n \"mode\": \"validation_and_normalization\",\n \"result\": \"likely_deliverable\"\n }\n}\n```\n\n## Address validation\n\nValidation determines whether your address is deliverable by attempting to match\nto an existing, validated address and is done after applying normalization.\n\nThe result of this validation is included in the address validation hash.\nDepending on the [address validation\nmode](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation-mode)\nused this might result in an API error.\n\nResultDescription`likely_deliverable`If a partially matching or fully matching\naddress is found in our third party database, your address is considered likely\ndeliverable.`likely_undeliverable`If no matching or partially matching address\nis found in our third party database, your address is considered likely\nundeliverable.`indeterminate`The deliverability of the address couldn’t be\ndetermined.\nFor example, the previous example showed the validation result of\n`likely_deliverable`.\n\n```\n\"address_validation\": {\n // the normalized address\n \"normalized_address\": {\n \"line1\": \"354 OYSTER POINT BLVD\",\n \"city\": \"SOUTH SAN FRANCISCO\",\n \"state\": \"CA\",\n \"postal_code\": \"94080\",\n \"country\": \"US\"\n },\n \"mode\": \"validation_and_normalization\",\n // the result showing that address was validated to be likely deliverable\n \"result\": \"likely_deliverable\"\n}\n```\n\n## Managing address validation features with address validation modes\n\nThe Cards API supports three address validation modes, which can optionally be\nspecified in the\n[address_validation](https://docs.stripe.com/api/issuing/cards/create#create_issuing_card-shipping-address_validation)\nparameter when creating a physical card or updating a card’s shipment.\n\nModeDescription`validation_and_normalization`Validates and normalizes your\ncard’s shipping address before submitting it for fulfillment. Stripe attempts to\nautomatically apply any appropriate corrections and formatting to your address\nbefore determining deliverability. If the card’s shipping address is likely\nundeliverable, you get an API request error.`normalization_only`Normalizes your\ncard’s shipping address before submitting it for fulfillment, and applies any\nappropriate corrections and formatting to your address. Address deliverability\nisn’t enforced, and you don’t get an API request error.`disabled`Ships your card\nusing the address provided as-is, without applying any normalization or\nvalidating its deliverability. This is only recommended when an address is known\nto be correct or otherwise validated.\nUse `validation_and_normalization` for the address validation mode. We also\nprovide alternate modes depending on your scenario:\n\n- `disabled`: If you believe a card is incorrectly blocked.\n- `normalization only`: If you want to minimize API errors but still gain the\nbenefits of normalization. The default is `normalization_only` if not specified.\n\n### Validation and normalization\n\nYour card is shipped with the validated, normalized address. Address\ndeliverability is enforced, and the API errors if the address is likely\nundeliverable. Stripe strongly recommends using this mode to ensure\ndeliverability for the address.\n\n```\ncurl https://api.stripe.com/v1/issuing/cards \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d cardholder=ich_1Cm3pZIyNTgGDVfzI83rasFP \\\n -d type=physical \\\n -d currency=usd \\\n -d \"shipping[name]\"=\"Jenny Rosen\" \\\n -d \"shipping[address][line1]\"=\"1234 Fake St\" \\\n -d \"shipping[address][city]\"=\"Fake City\" \\\n -d \"shipping[address][state]\"=NY \\\n -d \"shipping[address][country]\"=US \\\n -d \"shipping[address][postal_code]\"=94111 \\\n -d \"shipping[address_validation][mode]\"=validation_and_normalization\n```\n\n```\n\"error\": {\n \"message\": {\n\"The address is undeliverable based on given inputs. Please ensure that the\naddress was inputted correctly and can be delivered to.\"\n }\n}\n```\n\n### Normalization only\n\nYour card will be shipped with the normalized address. Address deliverability\nisn’t enforced, and you don’t get an API request error if the address is likely\nundeliverable.\n\n```\ncurl https://api.stripe.com/v1/issuing/cards \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d cardholder=ich_1Cm3pZIyNTgGDVfzI83rasFP \\\n -d type=physical \\\n -d currency=usd \\\n -d \"shipping[name]\"=\"Jenny Rosen\" \\\n -d \"shipping[address][line1]\"=\"1234 Fake St\" \\\n -d \"shipping[address][city]\"=\"Fake City\" \\\n -d \"shipping[address][state]\"=NY \\\n -d \"shipping[address][country]\"=US \\\n -d \"shipping[address][postal_code]\"=94111 \\\n -d \"shipping[address_validation][mode]\"=normalization_only\n```\n\n```\n# Example response\n{\n \"id\": \"ic_test1CDR9auHsQKan42gGK34\",\n \"object\": \"issuing.card\",\n \"shipping\": {\n // address supplied during card creation\n \"address\": {\n \"line1\": \"1234 Fake Street\",\n \"city\": \"Fake city\",\n \"postal_code\": \"94111\",\n \"state\": \"NY\",\n \"country\": \"US\"\n },\n // address validation information\n \"address_validation\": {\n // the card will be shipped with this address\n \"normalized_address\": {\n \"line1\": \"1234 FAKE ST\",\n \"city\": \"FAKE CITY\",\n \"state\": \"NY\",\n \"postal_code\": \"94111\",\n \"country\": \"US\"\n },\n \"mode\": \"normalization_only\",\n \"result\": \"likely_undeliverable\"\n },\n // other fields...\n },\n // other fields...\n}\n```\n\n### Disabled\n\nThis mode ships your card using the address provided as-is, without applying\nnormalization or validating its deliverability. A normalized address and\nvalidation result will not be returned. This is recommended only when an address\nis known to be correct or otherwise validated.\n\n```\ncurl https://api.stripe.com/v1/issuing/cards \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d cardholder=ich_1Cm3pZIyNTgGDVfzI83rasFP \\\n -d type=physical \\\n -d currency=usd \\\n -d \"shipping[name]\"=\"Jenny Rosen\" \\\n -d \"shipping[address][line1]\"=\"1234 Fake St\" \\\n -d \"shipping[address][city]\"=\"Fake City\" \\\n -d \"shipping[address][state]\"=NY \\\n -d \"shipping[address][country]\"=US \\\n -d \"shipping[address][postal_code]\"=94111 \\\n -d \"shipping[address_validation][mode]\"=disabled\n```\n\n```\n// Example response\n{\n \"id\": \"ic_test1CDR9auHsQKan42gGK34\",\n \"object\": \"issuing.card\",\n \"shipping\": {\n // address supplied during card creation\n \"address\": {\n \"line1\": \"1234 Fake Street\",\n \"city\": \"Fake city\",\n \"postal_code\": \"94111\",\n \"state\": \"NY\",\n \"country\": \"US\"\n },\n // address validation information\n \"address_validation\": {\n \"mode\": \"disabled\"\n },\n // other fields...\n },\n // other fields...\n}\n```\n\n## Integrating address validation into your card creation flow\n\nWe provide several examples on how to integrate your flow with address\nvalidation features below. These examples are not exhaustive, and are only meant\nto serve as ideas to help you with your integration.\n\nSynchronous card creationAsynchronous card creation\n### Strict address validation\n\nThe best way to increase deliverability is to never bypass address validation,\nrequiring your customers to always submit deliverable addresses.\n\nCustomer\n\nYour site\n\nStripe\n\nSubmit shipping details with an undeliverable address to order a card\n\nCreate a [Card](https://docs.stripe.com/api/issuing/cards/create) with\n`validation_and_normalization`\n[mode](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation-mode)\n\nCard shipping address determined to be `likely_undeliverable`\n\nSend error `400` undeliverable shipping address response\n\nPrompt user to correct their invalid address\n\nCorrect and re-submit shipping address\n\nCreate a [Card](https://docs.stripe.com/api/issuing/cards/create) with\n`validation_and_normalization`\n[mode](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation-mode)\n\nCard shipping address determined to be `likely_deliverable`\n\nReturn a [Card](https://docs.stripe.com/api/issuing/cards/object)\n\nStrict address validation flow\n### Address suggestions\n\nPrompting a user to select between a suggested address and the one they provided\nis a common flow that you can build yourself using our address validation\nfeatures.\n\nCustomer\n\nYour site\n\nStripe\n\nSubmit shipping details to order a card\n\nCreate a [Card](https://docs.stripe.com/api/issuing/cards/create) with\n`validation_and_normalization`\n[mode](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation-mode)\n\nCard shipping address is normalized and determined to be `likely_deliverable`\n\nReturn a new [Card](https://docs.stripe.com/api/issuing/cards/object) with\nvalidated and normalized address\n\nSuggest a better address using the card’s\n[normalized_address](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation-normalized_address)\n\nConfirm address selection\n\nIf the original address is selected, update\n[Card](https://docs.stripe.com/api/issuing/cards/update#update_issuing_card-shipping)\nto original address using `disabled`\n[mode](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation-mode)\n\nReturn the updated [Card](https://docs.stripe.com/api/issuing/cards/object)\n\nAddress suggestion flow\n### Relaxed address validation\n\nYou can gracefully handle undeliverable address errors by requiring the user to\nconfirm the address they submitted. By leveraging the `disabled` address\nvalidation mode, you can make sure that your customers are able to order cards\nwithout much friction if their address is known to be correct.\n\nCustomer\n\nYour site\n\nStripe\n\nSubmit shipping details to order a card\n\nCreate a [Card](https://docs.stripe.com/api/issuing/cards/create) with\n`validation_and_normalization`\n[mode](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation-mode)\n\nCard shipping address determined to be `likely_undeliverable`\n\nSend error `400` undeliverable shipping address response\n\nShow prompt asking if provided address is correct\n\nConfirm submitted address is correct\n\nCreate a [Card](https://docs.stripe.com/api/issuing/cards/create) with\n`disabled`\n[mode](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation-mode)\n\nReturn a [Card](https://docs.stripe.com/api/issuing/cards/object)\n\nRelaxed address validation flow\n## Testing address validation\n\nYou can supply a magic value for `line1` to trigger certain validation\nconditions in test mode. You must pass in legitimate values for the `city`,\n`state`, and `postal_code` arguments.\n\nValueType`address_valid`Send a test mode request using a deliverable shipping\naddress.`address_invalid`Send a test mode request using an undeliverable\nshipping address.\n```\ncurl https://api.stripe.com/v1/issuing/cards \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d cardholder=ich_1Cm3pZIyNTgGDVfzI83rasFP \\\n -d type=physical \\\n -d currency=usd \\\n -d \"shipping[name]\"=\"Jenny Rosen\" \\\n -d \"shipping[address][line1]\"=address_invalid \\\n -d \"shipping[address][city]\"=\"San Francisco\" \\\n -d \"shipping[address][state]\"=CA \\\n -d \"shipping[address][country]\"=US \\\n -d \"shipping[address][postal_code]\"=94111 \\\n -d \"shipping[address_validation][mode]\"=validation_and_normalization\n```\n\n## Links\n\n- [address\nvalidation](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation)\n- [address validation\nmode](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation-mode)\n-\n[address_validation](https://docs.stripe.com/api/issuing/cards/create#create_issuing_card-shipping-address_validation)\n- [Card](https://docs.stripe.com/api/issuing/cards/create)\n- [Card](https://docs.stripe.com/api/issuing/cards/object)\n-\n[normalized_address](https://docs.stripe.com/api/issuing/cards/object#issuing_card_object-shipping-address_validation-normalized_address)\n-\n[Card](https://docs.stripe.com/api/issuing/cards/update#update_issuing_card-shipping)",
  "metadata": {
    "title": "Physical cards address validation | Stripe Documentation",
    "description": "Enable and manage address validation features for physical cards.",
    "sourceURL": "https://docs.stripe.com/issuing/cards/physical/address-validation"
  }
}