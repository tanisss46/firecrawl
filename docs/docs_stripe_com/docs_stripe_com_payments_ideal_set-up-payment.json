{
  "content": "# Use iDEAL to set up future SEPA Direct Debit payments\n\n## Learn how to save bank details from an iDEAL payment and charge your customers later with SEPA Direct Debit.\n\n#### Caution\n\nWe recommend that you follow the [Set up future\npayments](https://docs.stripe.com/payments/save-and-reuse) guide. If you’ve\nalready integrated with Elements, see the [Payment Element migration\nguide](https://docs.stripe.com/payments/payment-element/migration).\n\niDEAL is a [single use](https://docs.stripe.com/payments/payment-methods#usage)\npayment method where customers are required to\n[authenticate](https://docs.stripe.com/payments/payment-methods#customer-actions)\neach payment. With this integration, Stripe charges your customer 0.01 EUR\nthrough iDEAL to collect their bank details. After your customer authenticates\nthe payment, Stripe refunds the payment and stores your customer’s\n[IBAN](https://en.wikipedia.org/wiki/International_Bank_Account_Number) in a\n[SEPA Direct Debit](https://docs.stripe.com/payments/sepa-debit) payment method.\nYou can then use the SEPA Direct Debit\n[PaymentMethod](https://docs.stripe.com/api/payment_methods) to [accept\npayments](https://docs.stripe.com/payments/sepa-debit/accept-a-payment) or [set\nup a subscription](https://docs.stripe.com/billing/subscriptions/sepa-debit).\n\n#### Caution\n\nTo use iDEAL to set up SEPA Direct Debit payments, you must activate SEPA Direct\nDebit in the\n[Dashboard](https://dashboard.stripe.com/account/payments/settings). You must\nalso comply with the [iDEAL Terms of Service](https://stripe.com/ideal/legal)\nand [SEPA Direct Debit Terms of\nService](https://stripe.com/sepa-direct-debit/legal).\n\nStripe-hosted pageAdvanced integrationiOSAndroidReact Native\nYou can use [Checkout in setup\nmode](https://docs.stripe.com/payments/save-and-reuse?platform=checkout) to\ncollect payment details and set up future SEPA Direct Debit payments using\niDEAL.\n\n[Create or retrieve a\nCustomerServer-side](https://docs.stripe.com/payments/ideal/set-up-payment#create-retrieve-customer)\nTo set up future SEPA Direct Debit payments using iDEAL, you must attach the\nSEPA Direct Debit payment method to a\n[Customer](https://docs.stripe.com/api/customers).\n\nCreate a `Customer` object when your customer creates an account with your\nbusiness. You can retrieve and use a customer’s stored payment method details\nlater, if you associate the ID of the `Customer` object with your own internal\nrepresentation of the customer.\n\n```\ncurl -X POST https://api.stripe.com/v1/customers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\"\n```\n\n[Set up future\npayments](https://docs.stripe.com/payments/ideal/set-up-payment#setup-a-payment)\nThis guide builds on the foundational [set up future\npayments](https://docs.stripe.com/payments/save-and-reuse?platform=checkout)\nCheckout integration and describes how to enable iDEAL—it shows the differences\nbetween setting up future payments for cards and using iDEAL.\n\n### Enable iDEAL as a payment method\n\nWhen creating a new [Checkout\nSession](https://docs.stripe.com/api/checkout/sessions), you need to add `ideal`\nto the list of `payment_method_types`.\n\n```\nStripe::Checkout::Session.create({\n mode: 'setup',\n payment_method_types: ['card'],\n payment_method_types: ['card', 'ideal'],\n customer: customer.id,\n success_url: 'https://example.com/success',\n cancel_url: 'https://example.com/cancel',\n})\n```\n\n[Charge the SEPA Direct Debit PaymentMethod\nlaterServer-side](https://docs.stripe.com/payments/ideal/set-up-payment#charge-sepa-pm)\nWhen you need to charge your customer again, create a new PaymentIntent. Find\nthe ID of the SEPA Direct Debit payment method by\n[retrieving](https://docs.stripe.com/api/setup_intents/retrieve) the SetupIntent\nand [expanding](https://docs.stripe.com/api/expanding_objects) the\n`latest_attempt` field where you will find the `generated_sepa_debit` ID inside\nof `payment_method_details`.\n\n```\ncurl -G https://api.stripe.com/v1/setup_intents/{{SETUP_INTENT_ID}} \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d \"expand[]\"=latest_attempt\n```\n\nCreate a PaymentIntent with the SEPA Direct Debit and Customer IDs.\n\n```\ncurl https://api.stripe.com/v1/payment_intents \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d \"payment_method_types[]\"=sepa_debit \\\n -d amount=1099 \\\n -d currency=eur \\\n -d customer={{CUSTOMER_ID}} \\\n -d payment_method={{SEPA_DEBIT_PAYMENT_METHOD_ID}} \\\n -d confirm=true\n```\n\n[Test your\nintegration](https://docs.stripe.com/payments/ideal/set-up-payment#testing)\nUsing your [test API keys](https://docs.stripe.com/keys#test-live-modes), select\nany bank from the list. After confirming, you’re redirected to a test page with\noptions to authorize or fail the payment method setup.\n\n- Click **Authorize test payment** to test the case when the setup is\nsuccessful.\n- Click **Fail test payment** to test the case when the customer fails to\nauthenticate.\n\n## See also\n\n- [Accept a SEPA Direct Debit\npayment](https://docs.stripe.com/payments/sepa-debit/accept-a-payment)\n- [Set up a subscription with SEPA Direct Debit in the\nEU](https://docs.stripe.com/billing/subscriptions/sepa-debit)\n\n## Links\n\n- [Save bank details during\npayment](https://docs.stripe.com/payments/ideal/save-during-payment)\n- [Set up future payments](https://docs.stripe.com/payments/save-and-reuse)\n- [Payment Element migration\nguide](https://docs.stripe.com/payments/payment-element/migration)\n- [single use](https://docs.stripe.com/payments/payment-methods#usage)\n-\n[authenticate](https://docs.stripe.com/payments/payment-methods#customer-actions)\n- [IBAN](https://en.wikipedia.org/wiki/International_Bank_Account_Number)\n- [SEPA Direct Debit](https://docs.stripe.com/payments/sepa-debit)\n- [PaymentMethod](https://docs.stripe.com/api/payment_methods)\n- [accept\npayments](https://docs.stripe.com/payments/sepa-debit/accept-a-payment)\n- [set up a\nsubscription](https://docs.stripe.com/billing/subscriptions/sepa-debit)\n- [Dashboard](https://dashboard.stripe.com/account/payments/settings)\n- [iDEAL Terms of Service](https://stripe.com/ideal/legal)\n- [SEPA Direct Debit Terms of\nService](https://stripe.com/sepa-direct-debit/legal)\n- [Checkout in setup\nmode](https://docs.stripe.com/payments/save-and-reuse?platform=checkout)\n- [Customer](https://docs.stripe.com/api/customers)\n- [Checkout Session](https://docs.stripe.com/api/checkout/sessions)\n- [https://example.com/success](https://example.com/success)\n- [https://example.com/cancel](https://example.com/cancel)\n- [retrieving](https://docs.stripe.com/api/setup_intents/retrieve)\n- [expanding](https://docs.stripe.com/api/expanding_objects)\n- [test API keys](https://docs.stripe.com/keys#test-live-modes)",
  "metadata": {
    "title": "Use iDEAL to set up future SEPA Direct Debit payments | Stripe Documentation",
    "description": "Learn how to save bank details from an iDEAL payment and charge your customers later with SEPA Direct Debit.",
    "sourceURL": "https://docs.stripe.com/payments/ideal/set-up-payment"
  }
}