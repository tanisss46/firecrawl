{
  "content": "# Moving money with Treasury using OutboundPayment objects\n\n## Learn how to create outbound payments to move money out of Treasury financial accounts to third parties.\n\n`OutboundPayment` objects represent push-based transfers from your Treasury\nfinancial account to a third-party external account using ACH or wire transfer,\nor another financial account associated with the same platform instantly using\nthe `stripe` network. For example, if you want to send money from your financial\naccount to your vendor’s external US bank account, you create an\n`OutboundPayment` to move the funds. The receiving accounts for an\n`OutboundPayment` are either an external bank account or another financial\naccount.\n\nThe typical transfer time for outbound payments can range from minutes (when\nusing the Stripe network), same day, to 1-2 business days (when using the ACH\nnetwork). For more information, see the [Money movement\ntimelines](https://docs.stripe.com/treasury/money-movement/timelines#outboundpayment-and-outboundtransfer-transactions)\nguide.\n\n## Create an OutboundPayment\n\nUse `POST /v1/treasury/outbound_payments` to create an `OutboundPayment`. Among\nthe request’s possible parameters, the following are required:\n\n- `amount`: Amount in cents to pay.\n- `currency`: Three-letter ISO currency code (only `usd` supported).\n- `financial_account`: The source financial account funds are sent from.\n- `destination_payment_method` or `destination_payment_method_data`: Information\nabout the destination of funds for the payment.- With\n`destination_payment_method`, you must first set up the `PaymentMethod` for\noutbound flows using a [SetupIntent](https://docs.stripe.com/api/setup_intents).\nYou must also specify the customer ID that matches the `Customer` object the\n`PaymentMethod` is attached to. Alternatively, you can use an existing legacy\n[BankAccount](https://docs.stripe.com/payments/ach-direct-debit/migrating-from-charges)\nattached to the `Customer` in place of a `PaymentMethod`.\n- With `destination_payment_method_data`, you can specify payment method details\ninline. You can use this parameter to specify bank account details or when\nyou’re [sending funds to another financial\naccount](https://docs.stripe.com/treasury/moving-money/financial-accounts/out-of/outbound-payments#create-obp-for-fa)\nover the Stripe network.\n\n## Create an OutboundPayment to an external bank account\n\nUse `POST /v1/treasury/outbound_payments` to create an `OutboundPayment` from\nthe financial account identified by the ID in the `financial_account` parameter\nvalue of the body. The following request adds `statement_descriptor` and\n`destination_payment_method_data` information.\n\n```\ncurl https://api.stripe.com/v1/treasury/outbound_payments \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d financial_account={{FINANCIAL_ACCOUNT_ID}} \\\n -d amount=2000 \\\n -d currency=usd \\\n -d statement_descriptor=payment_1 \\\n -d \"destination_payment_method_data[type]\"=us_bank_account \\\n-d\n\"destination_payment_method_data[us_bank_account][account_holder_type]\"=individual\n\\\n-d \"destination_payment_method_data[us_bank_account][routing_number]\"=110000000\n\\\n-d \"destination_payment_method_data[us_bank_account][account_number]\"=1234567890\n\\\n--data-urlencode\n\"destination_payment_method_data[billing_details][email]\"=\"jenny@example.com\" \\\n -d \"destination_payment_method_data[billing_details][phone]\"=7135551212 \\\n -d \"destination_payment_method_data[billing_details][address][city]\"=Alvin \\\n -d \"destination_payment_method_data[billing_details][address][state]\"=TX \\\n-d\n\"destination_payment_method_data[billing_details][address][postal_code]\"=77511 \\\n-d \"destination_payment_method_data[billing_details][address][line1]\"=\"123 Main\nSt.\" \\\n -d \"destination_payment_method_data[billing_details][name]\"=\"Jenny Rosen\"\n```\n\nIf successful, the response returns the newly created `OutboundPayment`.\n\n```\n{\n \"id\": \"{{OUTBOUND_PAYMENT_ID}}\",\n \"object\": \"outbound_payment\",\n // The source FinancialAccount. Funds are pulled from this account.\n \"financial_account\": \"{{FINANCIAL_ACCOUNT_ID}}\",\n // The amount to send. 10.00 USD in this case.\n \"amount\": 1000,\n \"cancelable\": true | false,\n \"currency\": \"usd\",\n// The destination payment method. Either this or\n`destination_payment_method_data`\n```\n\nSee all 73 lines\n### Same-day ACH\n\n#### Private preview\n\nSame-day ACH is currently in preview with limited availability, subject to\nStripe review and approval. To request access, email\n[treasury-support@stripe.com](mailto:treasury-support@stripe.com).\n\nIf you don’t have access, API calls that include same-day ACH features or\nparameters return an error.\n\nUsing same-day ACH enables sending funds that arrive the same business day if\nthe `OutboundPayment` call successfully completes before the [cutoff\ntime](https://docs.stripe.com/treasury/money-movement/timelines#evolve-bank-and-trust--outbound).\nTo use same-day ACH, set the\n`destination_payment_method_options.us_bank_account.network` parameter to `ach`\nand the `destination_payment_method_options.us_bank_account.ach.submission`\nparameter to `same_day`.\n\n### Wire transfer: routing numbers\n\nSome banks might use a separate wire transfer routing number that differs from\nACH. Consequently, you might receive an error during wire creation if the\nrouting number on the payment method doesn’t support wire transfers. If you\nreceive this error, you need to add a new payment method with your bank’s wire\nrouting number.\n\n### Wire transfer: recipient address\n\nWire transfers require ACH metadata plus recipient name and billing address. The\naddress is the address of the account holder receiving the wire, not the address\nof their bank.\n\nWhen entering the `billing_details.address` for a payment method, all address\nfields must be complete. Attempting to send a wire with incomplete fields on the\n`billing_details.address` results in an error.\n\n#### Note\n\nWhen sending a wire using an `OutboundTransfer`, if you don’t fill out any\naddress fields, Stripe defaults to the legal entity of the primary Stripe\naccount holder.\n\n## Create an OutboundPayment to a financial account\n\nTo move money between financial accounts, call `POST\n/v1/treasury/outbound_payments` on the origin account and specify the\ndestination account in the `destination_payment_method_data` parameter. Both\nfinancial accounts must be associated with the same platform, but can’t be\nassociated with the same connected account. To transfer money between financial\naccounts associated with the same connected account, use an\n[OutboundTransfer](https://docs.stripe.com/treasury/moving-money/financial-accounts/out-of/outbound-transfers).\n\n```\ncurl https://api.stripe.com/v1/treasury/outbound_payments \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d financial_account={{SOURCE_FINANCIAL_ACCOUNT_ID}} \\\n -d amount=2000 \\\n -d currency=usd \\\n -d statement_descriptor=\"Test outbound payment to FA\" \\\n -d \"destination_payment_method_data[type]\"=financial_account \\\n-d\n\"destination_payment_method_data[financial_account]\"={{DESTINATION_FINANCIAL_ACCOUNT_ID}}\n```\n\nThe body of your request must be `x-www-form-urlencoded`, but the following JSON\ndefines the data you can send.\n\n```\n{\n // The source FinancialAccount. Funds are pulled from this account.\n \"financial_account\": \"{{SOURCE_FINANCIAL_ACCOUNT_ID}}\",\n // The amount to send.\n \"amount\": 1000,\n \"currency\": \"usd\",\n // The destination payment method. This parameter is the only way to\n // send an OutboundPayment via the `stripe` network.\n \"destination_payment_method_data\": {\n \"type\": \"financial_account\",\n```\n\nSee all 34 lines\n## Retrieve an OutboundPayment\n\nUse `GET /v1/treasury/outbound_payments/{{OUTBOUND_PAYMENT_ID}}` to retrieve\ndetails for the `OutboundPayment` with the associated ID.\n\n```\ncurl\nhttps://api.stripe.com/v1/treasury/outbound_payments/{{OUTBOUND_PAYMENT_ID}} \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\"\n```\n\nIf successful, the response returns the `OutboundPayment` object with the\nassociated ID. Some of the parameters in the response have additional details\nthat are only returned when you add them as values to the `expand[]` parameter.\nThe fields that you can expand have an “Expandable” comment in the following\nresponse example. See [Expanding\nResponses](https://docs.stripe.com/api/expanding_objects) to learn more about\nexpanding object responses.\n\n```\n{\n \"id\": \"{{OUTBOUND_PAYMENT_ID}}\",\n \"object\": \"outbound_payment\",\n \"livemode\": true | false,\n \"created\": \"{{Timestamp}}\",\n \"financial_account\": \"{{FINANCIAL_ACCOUNT_ID}}\", // Expandable\n \"amount\": 1000,\n \"currency\": \"usd\",\n// Will only be set if `destination_payment_method` was used during the creation\nof\n // the OutboundPayment\n```\n\nSee all 122 lines\n## Cancel an OutboundPayment\n\nUse `POST /v1/treasury/outbound_payments/{{OUTBOUND_PAYMENT_ID}}/cancel` to\ncancel the `OutboundPayment` with the associated ID. The `OutboundPayment`\nobject includes a `cancelable` parameter with a Boolean value to indicate\nwhether you can cancel the transfer. After an `OutboundPayment` submits to the\nnetwork, the `cancelable` value becomes `false` and you receive an error from\nthis endpoint for that transfer.\n\n```\ncurl -X POST\nhttps://api.stripe.com/v1/treasury/outbound_payments/{{OUTBOUND_PAYMENT_ID}}/cancel\n\\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\"\n```\n\nIf successful, the response returns the `OutboundPayment` object with the\n`status` value set to `canceled`.\n\n```\n{\n \"id\": \"{{OUTBOUND_PAYMENT_ID}}\",\n \"object\": \"outbound_payment\",\n \"livemode\": false,\n \"created\": 123456,\n \"financial_account\": \"{{FINANCIAL_ACCOUNT_ID}}\",\n \"amount\": 1000,\n \"currency\": \"usd\",\n ...\n \"status\": \"canceled\",\n```\n\nSee all 19 lines\n## List OutboundPayments\n\nUse `GET /v1/treasury/outbound_payments` to list the `OutboundPayments` from the\nfinancial account with the associated ID. You can filter the list with the\nstandard list parameters or by `status` or by `customer`.\n\n```\n{\n // Standard list parameters\n \"limit\", \"starting_after\", \"ending_before\",\n // Filter by status\n \"status\": \"processing\" | \"canceled\" | \"failed\" | \"posted\" | \"returned\",\n // Filter by FinancialAccount (Required)\n \"financial_account\": \"{{FINANCIAL_ACCOUNT_ID}}\",\n // Filter by Customer\n \"customer\": \"{{CUSTOMER_ID}}\",\n}\n\n```\n\nThe following request retrieves the last five [OutboundPayment\nobjects](https://docs.stripe.com/api/treasury/outbound_payments/object) for the\nfinancial account attached to the platform and paid to the identified\n`Customer`.\n\n```\ncurl -G https://api.stripe.com/v1/treasury/outbound_payments \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d financial_account={{FINANCIAL_ACCOUNT_ID}} \\\n -d limit=5 \\\n -d customer={{CUSTOMER_ID}}\n```\n\n## OutboundPayment states\n\nThe following table describes each status and what the possible transition\nstates are.\n\nSTATUSDESCRIPTIONCAN TRANSITION TO STATE`processing`The `OutboundPayment`\nstarting state. Funds are allotted to a pending transaction (but are still part\nof the current balance). The user can cancel the `OutboundPayment` while the\nvalue of the `cancelable` parameter is `true`.`posted`, `canceled`,\n`failed``failed` (terminal)`OutboundPayment` failed to confirm. Stripe voids the\npending transaction and returns the funds to the user.N/A`canceled` (terminal)A\nuser canceled the `OutboundPayment` before posting. Stripe voids the pending\ntransaction and returns the funds to the user.N/A`posted`The `OutboundPayment`\nposted and funds have left the account. The underlying transaction\nposts.`returned``returned` (terminal)`OutboundPayment` failed to successfully\narrive at the destination. Funds return to the user with a transaction\n(`returned_details[transaction]`).N/A\n## Test OutboundPayments\n\nTo test your integration end-to-end, we recommend using the [SetupIntent\nrequests in test\nmode](https://docs.stripe.com/treasury/moving-money/working-with-bankaccount-objects#setupintents)\nto create a `PaymentMethod`, then passing that `PaymentMethod` into an\n`OutboundPayment` creation request using the `destination_payment_method`\nparameter.\n\nStripe also allows test `PaymentMethod` tokens and numbers to trigger specific\nfunctionality:\n\n- By passing in a test `PaymentMethod` token to `destination_payment_method`\n(for `ach` and `us_domestic_wire` networks)- If you’re passing in a test\n`PaymentMethod` token directly into `destination_payment_method`, you must still\npass in a customer ID to the `customer` parameter. For convenience, Stripe\nallows you to pass in any existing test mode customer. This differs from live\nmode, which requires the existing `PaymentMethod` to be attached to a `Customer`\nand that same customer ID passed into the `customer` parameter.\n- By passing in test routing and account numbers to\n`destination_payment_method_data[us_bank_account]` (for `ach` and\n`us_domestic_wire` networks).\n- By passing in the ID of an existing test mode financial account owned by an\nintra-platform account to `destination_payment_method_data[financial_account]`\n(for Stripe network).\n\nIn all cases, the `OutboundPayment` response returns the processing status.\nStripe triggers [webhooks](https://docs.stripe.com/webhooks) for the relevant\nstate transitions, and fetching the `OutboundPayment` after creation returns the\nexpected state.\n\nCREATESDESTINATION_PAYMENT_METHOD (WITH ANY EXISTING TEST MODE\nCUSTOMER)DESTINATION_PAYMENT_METHOD_DATA[US_BANK_ACCOUNT]`OutboundPayment` in\ninitial processing state`pm_usBankAccount_processing`- `routing_number`:\n110000000\n- `account_number`: 000000000009\n`OutboundPayment` that transitions to `posted` (from\n`processing`)`pm_usBankAccount`- `routing_number`: 110000000\n- `account_number`: 000123456789\n`OutboundPayment` that transitions to `posted` (from `processing`), additionally\nadding one day to the original\n`expected_arrival_date``pm_usBankAccount_expectedArrivalDateUpdated`-\n`routing_number`: 110000000\n- `account_number`: 000123457890\n`OutboundPayment` that transitions to `canceled` (from\n`processing`)`pm_usBankAccount_canceledByUser`- `routing_number`: 110000000\n- `account_number`: 000000000123\n`OutboundPayment` that transitions to `failed` (from\n`processing`)`pm_usBankAccount_internalFailure`- `routing_number`: 110000000\n- `account_number`: 000000000234\n`OutboundPayment` that transitions to `returned` due to account closure (from\nprocessing after posted)`pm_usBankAccount_accountClosed`- `routing_number`:\n110000000\n- `account_number`: 000111111113\n`OutboundPayment` that transitions to returned due to no account (from\nprocessing after posted)`pm_usBankAccount_noAccount`- `routing_number`:\n110000000\n- `account_number`: 000111111116\n`OutboundPayment` that transitions to `returned` due to invalid account number\n(from processing after posted)`pm_usBankAccount_invalidAccountNumber`-\n`routing_number`: 110000000\n- `account_number`: 000111111119\n\n### OutboundPayment test helper endpoints\n\nStripe provides endpoints to help you test `OutboundPayments` in different\nstates. Use the test endpoints to move an `OutboundPayment` you create directly\nto a new state of `posted`, `failed`, or `returned`.\n\n- Use the [test post\nendpoint](https://docs.stripe.com/api/treasury/outbound_payments/test_mode_post)\nto move the identified `OutboundPayment` from `processing` to `posted`.\n\n`POST /v1/test_helpers/treasury/outbound_payments/{{OUTBOUND_PAYMENT_ID}}/post`\n- Use the [test fail\nendpoint](https://docs.stripe.com/api/treasury/outbound_payments/test_mode_fail)\nto move the identified `OutboundPayment` from `processing` to `failed`.\n\n`POST /v1/test_helpers/treasury/outbound_payments/{{OUTBOUND_PAYMENT_ID}}/fail`\n- Use the [test return\nendpoint](https://docs.stripe.com/api/treasury/outbound_payments/test_mode_return)\nto move the identified `OutboundPayment` from `processing` to `returned`.\n\n`POST\n/v1/test_helpers/treasury/outbound_payments/{{OUTBOUND_PAYMENT_ID}}/return`\n\nThese endpoints are particularly useful when testing error scenarios, such as\nreturns, which would otherwise require outside action.\n\nFor the `return` endpoint, include the optional `returned_details.code`\nparameter in the body to indicate why the transfer was returned. If not\nprovided, the transfer defaults to the `declined` return code.\n\n```\n{\n \"returned_details\": {\n \"code\": \"account_closed\" |\n \"account_frozen\" |\n \"bank_account_restricted\" |\n \"bank_ownership_changed\" |\n \"could_not_process\" |\n \"invalid_account_number\" |\n \"incorrect_account_holder_name\" |\n \"invalid_currency\" |\n \"no_account\" |\n \"declined\"\n }\n}\n```\n\nWe also provide a [test update\nendpoint](https://docs.stripe.com/api/treasury/outbound_payments/test_mode_update)\nto simulate the posting of tracking details on a test mode `Outbound Payment`.\nThe `tracking_details` field can only be set for test mode objects.\n\nIn all cases, Stripe triggers [webhooks](https://docs.stripe.com/webhooks) for\neach relevant state transition, and fetching the `OutboundPayment` after\ntransition returns the expected state.\n\n## OutboundPayment webhooks\n\nStripe emits the following `OutboundPayment` events to your\n[webhook](https://docs.stripe.com/webhooks) endpoint:\n\n- `treasury.outbound_payment.created` on `OutboundPayment` creation.\n- `treasury.outbound_payment.{{new_status}}` when an `OutboundPayment` changes\nstatus. Available status value options include:-\n`treasury.outbound_payment.posted`\n- `treasury.outbound_payment.failed`\n- `treasury.outbound_payment.canceled`\n- `treasury.outbound_payment.returned`\n- `treasury.outbound_payment.expected_arrival_date_updated` when the\n`expected_arrival_date` of an `OutboundPayment` changes.\n- `treasury.outbound_payment.tracking_details_updated` when the tracking details\nfor an `OutboundPayment` are updated.\n\n## Links\n\n- [Money movement\ntimelines](https://docs.stripe.com/treasury/money-movement/timelines#outboundpayment-and-outboundtransfer-transactions)\n- [SetupIntent](https://docs.stripe.com/api/setup_intents)\n-\n[BankAccount](https://docs.stripe.com/payments/ach-direct-debit/migrating-from-charges)\n- [cutoff\ntime](https://docs.stripe.com/treasury/money-movement/timelines#evolve-bank-and-trust--outbound)\n-\n[OutboundTransfer](https://docs.stripe.com/treasury/moving-money/financial-accounts/out-of/outbound-transfers)\n- [Expanding Responses](https://docs.stripe.com/api/expanding_objects)\n- [OutboundPayment\nobjects](https://docs.stripe.com/api/treasury/outbound_payments/object)\n- [SetupIntent requests in test\nmode](https://docs.stripe.com/treasury/moving-money/working-with-bankaccount-objects#setupintents)\n- [webhooks](https://docs.stripe.com/webhooks)\n- [test post\nendpoint](https://docs.stripe.com/api/treasury/outbound_payments/test_mode_post)\n- [test fail\nendpoint](https://docs.stripe.com/api/treasury/outbound_payments/test_mode_fail)\n- [test return\nendpoint](https://docs.stripe.com/api/treasury/outbound_payments/test_mode_return)\n- [test update\nendpoint](https://docs.stripe.com/api/treasury/outbound_payments/test_mode_update)",
  "metadata": {
    "title": "Moving money with Treasury using OutboundPayment objects | Stripe Documentation",
    "description": "Learn how to create outbound payments to move money out of Treasury financial accounts to third parties.",
    "sourceURL": "https://docs.stripe.com/treasury/moving-money/financial-accounts/out-of/outbound-payments"
  }
}