{
  "content": "# Place an extended hold on an online card payment\n\n## Learn how to use extended authorizations to capture online card payments up to 30 days after authorization.\n\nStripe-hosted pageEmbedded formAdvanced integration\nExtended authorizations have a longer authorization validity period, which\nallows you to hold customer funds for longer than standard authorization\nvalidity windows. For most card networks, the default authorization validity\nperiod is 7 days for online payments and 2 days for in-person\n[Terminal](https://docs.stripe.com/terminal) payments, whereas extended validity\nperiods can go up to 30 days depending on the card network. For more information\nabout authorization validity windows, see [place a hold on a payment\nmethod](https://docs.stripe.com/payments/place-a-hold-on-a-payment-method).\n\n## Availability\n\nWhen you use extended authorizations, there are no regional restrictions.\nHowever, be aware of the following limitations:\n\n- They’re only available with Visa, Mastercard, American Express, and Discover.\n- Certain card brands have merchant category restrictions. Refer to the network\navailability table below.\n- This page describes extended authorizations for online card payments. For\nin-person card payments using extended authorizations, refer to the [Terminal\ndocumentation](https://docs.stripe.com/terminal/features/extended-authorizations).\n-\n[mode](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-mode)\nis set to `payment` and\n[capture_method](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_intent_data-capture_method)\nis set to `manual` on the\n[CheckoutSession](https://docs.stripe.com/api/checkout/sessions/).\n\n#### IC+ Feature\n\nWe offer extended authorizations to users on\n[IC+](https://support.stripe.com/questions/understanding-blended-interchange-pricing)\npricing. If you’re on blended Stripe pricing and want access to this feature,\ncontact us at [support.stripe.com](https://support.stripe.com/).\n\n### Availability by card network and merchant category\n\nEvery card network has different rules that determine which payments have\nextended authorizations available, and how long they’re valid. The following\ntable shows the validity windows and transaction types that extended\nauthorization is available for using Visa, Mastercard, American Express, and\nDiscover. However, we recommend that you rely on the [capture_before\nfield](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-capture_before)\nto confirm the validity window for any given payment because these rules can\nchange without prior notice.\n\nCard brand Merchant category Extended authorization validity window \n**Visa**\n\nHotel, lodging, vehicle rental, and cruise line\n\nAll other merchant categories*\n\n30 days**\n\nMastercard (not including Maestro and Cirrus cards)All merchant categories30\ndaysAmerican ExpressLodging and vehicle rental30 days***DiscoverAirline, bus\ncharter/tour, car rental, cruise line, local/suburban commuter, passenger\ntransportation including ferries, hotel, lodging, and passenger railway30 days\n* For other merchant categories, Stripe charges an additional 0.08% fee per\ntransaction, and the extended window doesn’t apply to transactions with\nmerchants in US or JP. ** The exact extended authorization window for Visa is 29\ndays and 18 hours, to allow time for clearing processes.*** Although your\nvalidity window is extended to 30 days, you must capture the authorized funds no\nlater than the end of your customer’s stay or rental.\n\n### Networks with limited support (beta)\n\n### Recent changes to availability\n\n## Best Practices\n\nCustomers see their funds held longer when you use extended authorizations. Use\nclear [statement\ndescriptors](https://docs.stripe.com/get-started/account/statement-descriptors)\nto avoid increased disputes from unrecognized payments.\n\nYou can use the\n[custom_text](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-custom_text)\nfield when creating a new\n[CheckoutSession](https://docs.stripe.com/api/checkout_sessions) to display\nadditional text on the checkout page to help meet compliance requirements.\n\n#### Compliance\n\nYou’re responsible for your compliance with all applicable laws, regulations,\nand network rules when using extended authorization. Consult the network\nspecifications for the card networks that you plan to accept using this feature\nwith to make sure your sales are compliant with the applicable rules, which vary\nby network. For instance, for many networks extended validity windows are only\nfor cases where you don’t know the final amount that you’ll capture at the time\nof authorization.\n\nThe information provided on this page relating to your compliance with these\nrequirements is for your general guidance, and is not legal, tax, accounting, or\nother professional advice. Consult with a professional if you’re unsure about\nyour obligations.\n\n[Create a\nCheckoutSession](https://docs.stripe.com/payments/extended-authorization#create-and-confirm)\nAdd a checkout button to your website that calls a server-side endpoint to\ncreate a [Checkout\nSession](https://docs.stripe.com/api/checkout/sessions/create).\n\n```\n<html>\n <head>\n <title>Buy cool new product</title>\n </head>\n <body>\n<!-- Use action=\"/create-checkout-session.php\" if your server is PHP based. -->\n <form action=\"/create-checkout-session\" method=\"POST\">\n <button type=\"submit\">Checkout</button>\n </form>\n </body>\n</html>\n```\n\nA Checkout Session is the programmatic representation of what your customer sees\nwhen they’re redirected to the payment form. You can configure it with options\nsuch as:\n\n- [Line\nitems](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-line_items)\nto charge\n- Currencies to use\n\nYou must populate `success_url` with the URL value of a page on your website\nthat Checkout returns your customer to after they complete the payment. You can\noptionally also provide a `cancel_url` value of a page on your website that\nCheckout returns your customer to if they terminate the payment process before\ncompletion.\n\n#### Note\n\nCheckout Sessions expire 24 hours after creation by default.\n\nAfter creating a Checkout Session, redirect your customer to the\n[URL](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-url)\nreturned in the response.\n\nTo enable the extended authorization feature, set\n[request_extended_authorization](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_method_options-card-request_extended_authorization)\nto `if_available`.\n\n```\n# This example sets up an endpoint using the Sinatra framework.\n# Watch this video to get started: https://youtu.be/8aA9Enb8NVc.\n\nrequire 'json'\nrequire 'sinatra'\nrequire 'stripe'\n\n# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https://dashboard.stripe.com/apikeys\nStripe.api_key = 'sk_test_BQokikJOvBiI2HlWgH4olfQ2'\n\npost '/create-checkout-session' do\n session = Stripe::Checkout::Session.create({\n line_items: [{\n price_data: {\n currency: 'usd',\n product_data: {\n name: 'T-shirt',\n },\n unit_amount: 2000,\n },\n quantity: 1,\n }],\n payment_method_options: {\n card: {\n request_extended_authorization: 'if_available',\n },\n },\n mode: 'payment',\n # These placeholder URLs will be replaced in a following step.\n success_url: 'https://example.com/success',\n cancel_url: 'https://example.com/cancel',\n })\n\n redirect session.url, 303\nend\n```\n\nRely on the [capture_before\nfield](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-capture_before)\nto confirm the validity window for a given payment. The validity window won’t\nchange after the CheckoutSession is complete. To determine if the authorization\nis extended after the CheckoutSession is complete, look at the\n[extended_authorization.status\nfield](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-extended_authorization-status)\non the associated charge.\n\n```\n{\n \"id\": \"pi_xxx\",\n \"object\": \"payment_intent\",\n \"amount\": 1000,\n \"amount_capturable\": 1000,\n \"amount_received\": 0,\n \"status\": \"requires_capture\",\n ...\n // if latest_charge is expanded\n \"latest_charge\": {\n \"id\": \"ch_xxx\",\n \"object\": \"charge\",\n \"payment_method_details\": {\n \"card\": {\n \"amount_authorized\": 1000,\n \"capture_before\": 1696524701,\n \"extended_authorization\": {\n \"status\": \"enabled\", // or \"disabled\"\n }\n }\n }\n ...\n }\n ...\n}\n```\n\n[Test your\nintegration](https://docs.stripe.com/payments/extended-authorization#test-your-integration)\nUse any of the below Stripe test cards with any CVC and future expiration date\nto request extended authorizations while in test mode. If extended\nauthorizations are available on payments for a given network in test mode,\nthey’re also available in live mode.\n\nCard brandNumberPayment\nmethodVisa4242424242424242`pm_card_visa`Mastercard5555555555554444`pm_card_mastercard`Amex378282246310005`pm_card_amex`Discover6011111111111117`pm_card_discover`\n## See also\n\n- [Place a hold on a payment\nmethod](https://docs.stripe.com/payments/place-a-hold-on-a-payment-method)\n\n## Links\n\n- [Terminal](https://docs.stripe.com/terminal)\n- [place a hold on a payment\nmethod](https://docs.stripe.com/payments/place-a-hold-on-a-payment-method)\n- [Terminal\ndocumentation](https://docs.stripe.com/terminal/features/extended-authorizations)\n-\n[mode](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-mode)\n-\n[capture_method](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_intent_data-capture_method)\n- [CheckoutSession](https://docs.stripe.com/api/checkout/sessions/)\n-\n[IC+](https://support.stripe.com/questions/understanding-blended-interchange-pricing)\n- [support.stripe.com](https://support.stripe.com/)\n- [capture_before\nfield](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-capture_before)\n- [statement\ndescriptors](https://docs.stripe.com/get-started/account/statement-descriptors)\n-\n[custom_text](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-custom_text)\n- [CheckoutSession](https://docs.stripe.com/api/checkout_sessions)\n- [Checkout Session](https://docs.stripe.com/api/checkout/sessions/create)\n- [Line\nitems](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-line_items)\n-\n[URL](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-url)\n-\n[request_extended_authorization](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_method_options-card-request_extended_authorization)\n- [https://youtu.be/8aA9Enb8NVc.](https://youtu.be/8aA9Enb8NVc)\n- [https://dashboard.stripe.com/apikeys](https://dashboard.stripe.com/apikeys)\n- [https://example.com/success](https://example.com/success)\n- [https://example.com/cancel](https://example.com/cancel)\n- [extended_authorization.status\nfield](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-extended_authorization-status)",
  "metadata": {
    "title": "Place an extended hold on an online card payment | Stripe Documentation",
    "description": "Learn how to use extended authorizations to capture online card payments up to 30 days after authorization.",
    "sourceURL": "https://docs.stripe.com/payments/extended-authorization"
  }
}