{
  "content": "# Enable overcapture\n\n## Capture more than the authorized amount.\n\nOvercapture allows you to capture more than the amount authorized during order\nplacement. The [amount you can\ncapture](https://docs.stripe.com/payments/overcapture?platform=web&ui=stripe-hosted#availability-by-merchant-category)\ndepends on the card network and your country and merchant category.\n\n#### IC+ feature\n\nOvercapture is an\n[IC+](https://support.stripe.com/questions/understanding-blended-interchange-pricing)\nfeature. If you’re on blended Stripe pricing and want access to this feature,\ncontact [Stripe Support](https://support.stripe.com/).\n\nThe Stripe module supports overcapture by default. This guide describes how to\nenable it through a customization.\n\n## Create a new module\n\nCreate a new module with the following directory structure. Replace `Vendor`\nwith your vendor name.\n\n```\napp/code/Vendor/StripeCustomizations/\n├── etc/\n│ ├── module.xml\n│ └── config.xml\n├── registration.php\n\n```\n\nInside `registration.php`, register your module with Magento.\n\n```\n<?php\n\\Magento\\Framework\\Component\\ComponentRegistrar::register(\n \\Magento\\Framework\\Component\\ComponentRegistrar::MODULE,\n 'Vendor_StripeCustomizations',\n __DIR__\n);\n```\n\nInside `etc/module.xml`, define the module and set up dependencies to make sure\nit loads after the Stripe module.\n\n```\n<?xml version=\"1.0\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:noNamespaceSchemaLocation=\"urn:magento:framework:Module/etc/module.xsd\">\n <module name=\"Vendor_StripeCustomizations\" setup_version=\"1.0.0\">\n <sequence>\n <module name=\"StripeIntegration_Payments\"/>\n </sequence>\n </module>\n</config>\n```\n\nInside `etc/config.xml`, override the following settings from the Stripe module:\n\n```\n<?xml version=\"1.0\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:noNamespaceSchemaLocation=\"urn:magento:module:Magento_Store:etc/config.xsd\">\n <default>\n <stripe_settings>\n <overcapture_enabled>1</overcapture_enabled>\n </stripe_settings>\n </default>\n</config>\n```\n\nEnable the module:\n\n```\nphp bin/magento module:enable Vendor_StripeCustomizations\nphp bin/magento setup:upgrade\nphp bin/magento cache:clean\nphp bin/magento cache:flush\n\n```\n\n## How overcapture works\n\nWhen you invoice an order from the Magento admin, a new `Custom Capture Amount`\ninput appears above **Submit Invoice**. The store’s base currency symbol also\nappears in the input box, signaling that you must provide the overcapture amount\nin the base currency.\n\nLeave the input box empty to capture the full amount of the invoice. Enter a\ncustom amount to capture an alternate amount upon invoice submission, if the\ncard network supports it.\n\n## Other considerations\n\nUsing overcapture to update an authorized payment can affect the accuracy of\nyour reconciliation:\n\n- The invoice or order document doesn’t reflect a custom capture amount.\n- Stripe Tax relies on the taxes visible on the invoice to record and reverse\ntaxes, so it also doesn’t reflect the custom capture amount.\n\nTo make sure dependent products and documents match the final payment, consider\nusing the **Payment Action = Order** configuration setting instead. This saves\nthe customer’s payment method, but doesn’t attempt an authorization. You can\nthen edit the order before issuing the invoice, and the totals match the\ncaptured amount.\n\n## Links\n\n- [amount you can\ncapture](https://docs.stripe.com/payments/overcapture?platform=web&ui=stripe-hosted#availability-by-merchant-category)\n-\n[IC+](https://support.stripe.com/questions/understanding-blended-interchange-pricing)\n- [Stripe Support](https://support.stripe.com/)\n-\n[http://www.w3.org/2001/XMLSchema-instance](http://www.w3.org/2001/XMLSchema-instance)",
  "metadata": {
    "title": "Enable overcapture | Stripe Documentation",
    "description": "Capture more than the authorized amount.",
    "sourceURL": "https://docs.stripe.com/connectors/adobe-commerce/cookbooks/enable-over-capture"
  }
}