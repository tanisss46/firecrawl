{
  "content": "# Migrating your Standard Connect integration to USD Bank Transfers\n\n## Learn how to migrate your ACH Credit Transfer Standard Connect integration to USD Bank Transfers.\n\n#### Warning\n\nWe deprecated the Sources API and plan to remove support for local payment\nmethods. If you currently integrate with ACH Credit Transfers, you must [migrate\nto the Payment Methods\nAPI](https://docs.stripe.com/payments/payment-methods/transitioning).\n\nFor information about migrating to USD Bank Transfer supported by the current\nAPIs, refer to the documentation below.\n\n## Reasons to migrate\n\nIf your Connect platform integrates with Standard connected accounts using ACH\nCredit Transfers, you can migrate to USD Bank Transfers. USD Bank Transfers\nenables your connected accounts to benefit from the most up-to-date bank\ntransfer processes. To learn more about the improvements we added to the USD\nBank Transfers product, see [Migrating from Sources-based Credit\nTransfers](https://docs.stripe.com/payments/customer-balance/migrating-from-sources).\n\n### Impact of not migrating\n\nIf you don’t migrate to Bank Transfers, you can continue to use the legacy ACH\nCredit Transfer product. Legacy means we won’t add new functionality to the ACH\nCredit Transfer going forward. To stay up to date, we recommend integrating with\nUSD Bank Transfers instead.\n\nIf you don’t migrate to Bank Transfers, Stripe prevents your connected accounts\nfrom having compatibility issues:\n\n- Users who are currently connected to your platform won’t be able to request\naccess to Bank Transfers through the Dashboard.\n- Users who’ve used Bank Transfers with one or more customers won’t be able to\nconnect to your Stripe platform.\n\nStripe will remove these restrictions from your platform after your integration\nis ready to accept Bank Transfer payments.\n\n### Impact on the ACH Credit Transfers customers of your connected accounts\n\nIf you migrate, Stripe keeps the same bank account information for the customers\nof your connected accounts, which streamlines the process for them. If you don’t\nmigrate, your connected account’s customers can still send funds using the\nlegacy ACH Credit Transfer product.\n\n## Before you begin\n\n- To confirm if you’re using the legacy ACH Credit Transfers product, see the\napplicable **Before you begin** sections for:\n\n- [Migrate from the Sources\nAPI](https://docs.stripe.com/payments/customer-balance/direct-sources-migration)\n- [Migrate with invoicing or\nBilling](https://docs.stripe.com/payments/customer-balance/invoicing-migration)\n- To confirm that you’re currently using Connect with Standard connected\naccounts, navigate to the [Accounts\noverview](https://dashboard.stripe.com/connect/accounts/overview) and [filter by\naccount\ntype](https://docs.stripe.com/connect/dashboard/viewing-all-accounts#filters).\nIf your Live mode account list includes Standard accounts with status\n**Complete** or **Enabled** then you’re using Standard Connect.\n- To confirm that you’re using [direct\ncharges](https://docs.stripe.com/connect/charges#direct) on Standard Connect,\nverify the following:\n\n- If you’re using the API to create charges, the request includes the connected\naccount ID as part of the `Stripe-Account` header.\n- You create charges on the connected account rather than your Stripe account.\n- The funds from these charges (minus Stripe’s fees) are directly available in\nthe connected account’s balance.\n- If you’re not using ACH Credit Transfers with direct charges for Standard\nconnected accounts, this guide doesn’t apply to you. If you’re using ACH Credit\nTransfers in other Connect configurations, see [Migrating from Sources-based\nCredit\nTransfers](https://docs.stripe.com/payments/customer-balance/migrating-from-sources).\n\n## Migrate to Bank Transfers integration\n\nUse this guide to build a Bank Transfers integration alongside your existing ACH\nCredit Transfer integration. Use the new integration to migrate all the existing\nACH Credit Transfer customers of your connected accounts to the new payment\nmethod.\n\n[Create a test Standard connected\naccount](https://docs.stripe.com/payments/customer-balance/standard-connect-migration#create-test-standard)\n[Create a test mode Standard connected\naccount](https://docs.stripe.com/connect/standard-accounts#create-account) for\nthe purpose of testing the new integration.\n\n[Build a Bank Transfers\nintegration](https://docs.stripe.com/payments/customer-balance/standard-connect-migration#build-us-bank-transfers)Sources\nAPIInvoicing or Billing API- Create a test customer:\n\n```\ncurl https://api.stripe.com/v1/customers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d name=\"Jenny Rosen\" \\\n --data-urlencode email=\"jenny.rosen@example.com\"\n```\n- Create an ACH Credit Transfer source and attach it to the customer\n\nComplete the steps in the integration guide of [ACH Credit\nTransfer](https://docs.stripe.com/sources/ach-credit-transfer). Make sure to\npass the `Stripe-Account` header in the API requests that create and attach the\nsource to the customer. Save the bank details of the Source from the\n`ach_credit_transfer` field of the object to refer to later.\n- Create and confirm a PaymentIntent\n\nAt this point, you’re able to create and confirm a bank transfers PaymentIntent\non the customer object of the connected account [following the respective step\nin the Accept a payment\nguide](https://docs.stripe.com/payments/bank-transfers/accept-a-payment?payment-ui=direct-api#web-create-and-confirm-payment-intent).\nThe `Stripe-Account` header must be passed in order to create the PaymentIntent\non the customer of the connected account.\n\nCreating a test mode `customer_balance` PaymentIntent always succeeds. However,\nin live mode [direct charges](https://docs.stripe.com/connect/direct-charges)\nrequire the connected account itself (not the platform) to have activated Bank\nTransfers. Hence, before creating the PaymentIntent on the connected account,\nthe platform must use the [bank_transfer_payments\ncapability](https://docs.stripe.com/connect/account-capabilities#payment-methods)\nto determine whether this is the case. If Bank Transfers isn’t activated, your\nintegration logic could fall back to the legacy ACH Credit Transfer payment\nmethod.\n\n```\nimport stripe\n\nstripe.api_key = \"sk_test_BQokikJOvBiI2HlWgH4olfQ2\"\n\ndef funding_instructions(connected_account: str, customer: stripe.Customer) ->\ndict:\n bank_transfer_payments_capability = stripe.Account.retrieve_capability(\n connected_account,\n \"us_bank_transfer_payments\",\n )\n\n if bank_transfer_payments_capability[\"status\"] == \"active\":\n pi = stripe.PaymentIntent.create(\n stripe_account=connected_account,\n amount=1099,\n currency=\"usd\",\n customer=customer[\"id\"],\n payment_method_types=[\"customer_balance\"],\n payment_method_data={\n \"type\": \"customer_balance\",\n },\n payment_method_options={\n \"customer_balance\": {\n \"funding_type\": \"bank_transfer\",\n \"bank_transfer\": {\n \"type\": \"us_bank_transfer\",\n },\n },\n },\n confirm=True,\n )\n\n return pi.next_action[\"display_bank_transfer_instructions\"]\n else:\n source = stripe.Source.retrieve(\n stripe_account=connected_account, id=customer[\"default_source\"]\n )\n return source[\"ach_credit_transfer\"]\n```\n- Confirm that the integration works\n\nAfter you [test and confirm that the integration\nworks](https://docs.stripe.com/payments/bank-transfers/accept-a-payment?payment-ui=direct-api#test-your-integration),\ncheck if the bank details of the Credit Transfer Source have been migrated.\nNavigate to the customer details page in the Dashboard, and then expand Cash\nbalance. The bank details of the Cash balance should match the ones obtained\nfrom the Source in Step 2.\n\nThe customer of the connected account has been successfully migrated.\n[Contact\nStripe](https://docs.stripe.com/payments/customer-balance/standard-connect-migration#contact-stripe)\nAfter you’ve built, tested, and deployed your integration to production, and\nhave successfully served live traffic, **please reach out to Stripe to let us\nknow that your integration is compatible with Bank Transfers**. We’ll make sure\nthat your integration is working as expected and lift the restrictions imposed\non your connected accounts. We’ll also activate Bank Transfers for all your\nconnected accounts, which allows you to completely stop supporting the legacy\npayment method.\n\n## See also\n\n- [Migrating from Sources-based Credit\nTransfers](https://docs.stripe.com/payments/customer-balance/migrating-from-sources)\n\n## Links\n\n- [migrate to the Payment Methods\nAPI](https://docs.stripe.com/payments/payment-methods/transitioning)\n- [configured with\nproperties](https://docs.stripe.com/connect/update-to-typeless-connect)\n- [Migrating from Sources-based Credit\nTransfers](https://docs.stripe.com/payments/customer-balance/migrating-from-sources)\n- [Migrate from the Sources\nAPI](https://docs.stripe.com/payments/customer-balance/direct-sources-migration)\n- [Migrate with invoicing or\nBilling](https://docs.stripe.com/payments/customer-balance/invoicing-migration)\n- [Accounts overview](https://dashboard.stripe.com/connect/accounts/overview)\n- [filter by account\ntype](https://docs.stripe.com/connect/dashboard/viewing-all-accounts#filters)\n- [direct charges](https://docs.stripe.com/connect/charges#direct)\n- [Create a test mode Standard connected\naccount](https://docs.stripe.com/connect/standard-accounts#create-account)\n- [ACH Credit Transfer](https://docs.stripe.com/sources/ach-credit-transfer)\n- [following the respective step in the Accept a payment\nguide](https://docs.stripe.com/payments/bank-transfers/accept-a-payment?payment-ui=direct-api#web-create-and-confirm-payment-intent)\n- [direct charges](https://docs.stripe.com/connect/direct-charges)\n- [bank_transfer_payments\ncapability](https://docs.stripe.com/connect/account-capabilities#payment-methods)\n- [test and confirm that the integration\nworks](https://docs.stripe.com/payments/bank-transfers/accept-a-payment?payment-ui=direct-api#test-your-integration)",
  "metadata": {
    "title": "Migrating your Standard Connect integration to USD Bank Transfers | Stripe Documentation",
    "description": "Learn how to migrate your ACH Credit Transfer Standard Connect integration to USD Bank Transfers.",
    "sourceURL": "https://docs.stripe.com/payments/customer-balance/standard-connect-migration"
  }
}