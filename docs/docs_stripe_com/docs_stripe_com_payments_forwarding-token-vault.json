{
  "content": "# Forward card details to your own token vault\n\n## Update your in-house vault with card details stored on Stripe.\n\nCreate a [PaymentMethod](https://docs.stripe.com/api/payment_methods) and\n[forward](https://docs.stripe.com/api/forwarding/request) the payment method to\nyour token vault.\n\n#### Request access\n\nTo gain access to use Stripe’s forwarding service, contact [Stripe\nsupport](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fsupport.stripe.com%2Fcontact%2Femail%3Fquestion%3Dother%26topic%3Dpayment_apis%26subject%3DHow%2520can%2520I%2520access%2520the%2520Vault%2520and%2520Forward%2520API%3F%26body%3DWhat%2520endpoint%28s%29%2520would%2520you%2520like%2520to%2520forward%2520card%2520details%2520to%3F).\n\nServer\n\nStripe\n\nToken vault\n\nCreate a PaymentMethod\n\nStripe returns a PaymentMethod object\n\nCall the Vault and Forward API with the PaymentMethod you provide\n\nStripe forwards the request with card data\n\nToken vault endpoint returns a response\n\nStripe redacts identified PCI sensitive data and relays the response\n\nForward card details to your own token vault[Create a\nPaymentMethod](https://docs.stripe.com/payments/forwarding-token-vault#create-payment-method)\nTo collect card details and send them to Stripe for use with the Vault and\nForward API, use the Payment Element to create [a\nPaymentMethod](https://docs.stripe.com/payments/finalize-payments-on-the-server-legacy?type=payment#create-pm).\nAfter you create a PaymentMethod, we automatically store card details in\nStripe’s PCI compliant vault. If you have your own frontend, you can still use\nthe Vault and Forward API by [creating a PaymentMethod\ndirectly](https://docs.stripe.com/api/payment_methods/create).\n\n[Create a\nForwardingRequest](https://docs.stripe.com/payments/forwarding-token-vault#create-forwarding-request)\nPass the PaymentMethod ID to the Request endpoint on your server. Stripe\nprovides a test endpoint (`https://forwarding-api-demo.stripedemos.com/tokens`)\nand a test payment method (`pm_card_visa`) to verify that you can successfully\nretrieve card credentials from Stripe’s vault. Send the card details to this\ntest endpoint before you connect your integration with your in-house vault.\n\n```\ncurl https://api.stripe.com/v1/forwarding/requests \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d payment_method=pm_card_visa \\\n --data-urlencode url=\"https://forwarding-api-demo.stripedemos.com/tokens\" \\\n -d \"request[headers][0][name]\"=Authorization \\\n-d \"request[headers][0][value]\"=\"Bearer\neyJhbGciOiJIUzI1NiJ9.Zm9yd2FyZGluZy1hcGktZGVtbw.2qoK37CNBmMjMDRERSYUSE-YrjsTgGhHnxMeqOxjrAg\"\n\\\n--data-urlencode \"request[body]\"=\"{\\\"metadata\\\":{\\\"reference\\\":\\\"Your Token\nReference\\\"},\\\"card\\\":{\\\"number\\\":\\\"\\\",\\\"exp_month\\\":\\\"\\\",\\\"exp_year\\\":\\\"\\\",\\\"cvc\\\":\\\"\\\",\\\"name\\\":\\\"\\\"}}\"\n\\\n -d \"replacements[0]\"=card_number \\\n -d \"replacements[1]\"=card_expiry \\\n -d \"replacements[2]\"=card_cvc \\\n -d \"replacements[3]\"=cardholder_name\n```\n\n[Configure your in-house token vault\nendpoint](https://docs.stripe.com/payments/forwarding-token-vault#configuring-in-house-vault)\nTo receive Primary Account Numbers (PANs) from the Vault and Forward API, your\ntoken vault must comply with the following specifications.\n\n### PCI compliance\n\nMake sure that your vault is PCI compliant and provide a valid PCI Attestation\nof Compliance to Stripe support. You must refresh this Attestation annually.\n\n### API Requirements\n\nYour vault must contain HTTPS-based APIs that accept JSON and return JSON\nresponses; other formats, such as XML or ISO 8583, aren’t supported.\n\nMake sure that the API contains a single, static URL. Configure this in the\nVault and Forward API for security measures. Don’t change it between requests.\n\n### Authentication\n\nUse the Vault and Forward API to authenticate with your vault using HTTP header\nbased authentication schemes, including bearer tokens.\n\nMake sure that every forwarded API call includes the authentication header to\nauthenticate with your vault.\n\nWe don’t support client certificate authentication.\n\n### Request headers\n\nYou can include additional headers in the forwarded request to your vault.\nHowever, you must verify that the configuration for your vault explicitly\nsupports these headers. Reach out to Stripe support before you begin your\nintegration to verify that the required additional headers are properly\nconfigured. Additionally, make sure that the headers don’t include any sensitive\ninformation, except for the bearer token.\n\n### Request body\n\nMake sure that your vault receives a JSON object with the following shape.\n\n```\n{\n \"card\": {\n \"number\": \"4242424242424242\",\n \"exp_month\": \"12\",\n \"exp_year\": \"2023\",\n \"name\": \"John Doe\",\n \"cvc\": \"123\"\n },\n \"metadata\": {\n // Put your additional fields here\n }\n}\n```\n\nYou can include additional fields as needed under the metadata key in this\nrequest. We pass them through without any additional processing.\n\nThe Vault and Forward API places the decrypted data into the following fields:\n\nField nameTypeDescription`number`StringThe 15- or 16- digit PAN of the\ncard`exp_month`StringThe month of the card expiry`exp_year`StringThe four-digit\nyear of the card expiry`name`StringThe cardholder name`cvc`StringThe card\nverification value. This only becomes available for the first API request to\nStripe after tokenization. We remove this information from our system after a\nshort time period. Don’t store this value.\nYou don’t need to support all of these fields in your vault. The Vault and\nForward API places values into the request only if they’re present in the\nrequest body that you send to the Vault and Forward API. Additionally, you can\ninclude additional fields in the request body, which the Vault and Forward API\npasses to the receiving endpoint.\n\n### Response body\n\nThe Vault and Forward API doesn’t require any response body from your vault. If\nyou provide a body, we return it to the caller of the Vault and Forward API.\nDon’t include any sensitive fields in your response.\n\n### Response codes\n\nThe Vault and Forward API treats any response as a “success” and returns the\nsame response code sent by the token vault endpoint back to the caller through\nStripe. For example, when the upstream returns a status code of `400` to Stripe,\nthe Vault and Forward API responds with a status code of `200`. The response\nbody includes the upstream’s `400` response and error message.\n\n[Verify your integration with your token\nvault](https://docs.stripe.com/payments/forwarding-token-vault#verifying-your-integration)\nTo confirm the correct functionality of your integration with the vault\nendpoint, replace Stripe’s endpoint with your vault configuration. Then,\ninitiate a ForwardingRequest using the PaymentMethod you created.\n\n[Update your token vault with the latest\ncredentials](https://docs.stripe.com/payments/forwarding-token-vault#update-your-vault)\nListen to Stripe webhooks to [learn if a card has been\nupdated](https://docs.stripe.com/payments/cards/overview#automatic-card-updates).\nCall the Vault and Forward API to forward the updated PaymentMethod to your\ntoken vault.\n\n## Links\n\n- [PaymentMethod](https://docs.stripe.com/api/payment_methods)\n- [forward](https://docs.stripe.com/api/forwarding/request)\n- [Stripe\nsupport](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fsupport.stripe.com%2Fcontact%2Femail%3Fquestion%3Dother%26topic%3Dpayment_apis%26subject%3DHow%2520can%2520I%2520access%2520the%2520Vault%2520and%2520Forward%2520API%3F%26body%3DWhat%2520endpoint%28s%29%2520would%2520you%2520like%2520to%2520forward%2520card%2520details%2520to%3F)\n- [a\nPaymentMethod](https://docs.stripe.com/payments/finalize-payments-on-the-server-legacy?type=payment#create-pm)\n- [creating a PaymentMethod\ndirectly](https://docs.stripe.com/api/payment_methods/create)\n-\n[https://forwarding-api-demo.stripedemos.com/tokens](https://forwarding-api-demo.stripedemos.com/tokens)\n- [learn if a card has been\nupdated](https://docs.stripe.com/payments/cards/overview#automatic-card-updates)",
  "metadata": {
    "title": "Forward card details to your own token vault | Stripe Documentation",
    "description": "Update your in-house vault with card details stored on Stripe.",
    "sourceURL": "https://docs.stripe.com/payments/forwarding-token-vault"
  }
}