{
  "content": "# Collect an account to build data-powered products\n\n## Collect your user's account and use data such as balances, ownership details, and transactions to build products.\n\nWebiOSAndroidReact NativeWebViewAvailable in: \nFinancial Connections lets your users securely share their financial data by\nlinking their external financial accounts to your business. You can use\nFinancial Connections to access user-permissioned financial data such as\ntokenized account and routing numbers, account balances, account owner\ninformation, and historical transactions.\n\nSome common examples of how you can use Financial Connections to improve product\nexperiences for your users include:\n\n- Mitigate fraud when onboarding a customer or business by verifying the\n[ownership](https://docs.stripe.com/financial-connections/ownership) information\nof an account, such as the name and address of the bank account holder.\n- Help your users track expenses, handle bills, manage their finances and take\ncontrol of their financial well-being with\n[transactions](https://docs.stripe.com/financial-connections/transactions) data.\n- Speed up underwriting and improve access to credit and other financial\nservices with transactions and balances data.\n- Enable your users to connect their accounts in fewer steps with Link, allowing\nthem to save and quickly reuse their bank account details across Stripe\nmerchants.\n[Set up\nStripeServer-side](https://docs.stripe.com/financial-connections/other-data-powered-products#setup-stripe)\n[Register](https://dashboard.stripe.com/financial-connections/application) for\nFinancial Connections after we approve your account for live-mode access.\n\nUse our official libraries for access to the Stripe API from your application:\n\n```\n# Available as a gem\nsudo gem install stripe\n```\n\n```\n# If you use bundler, you can add this line to your Gemfile\ngem 'stripe'\n```\n\n[Create or retrieve an account\nholderServer-side](https://docs.stripe.com/financial-connections/other-data-powered-products#create-a-customer)\nCreate a [Customer object](https://docs.stripe.com/api/customers/object) when\nusers create an account with your business. By providing an email address,\nFinancial Connections can optimize the [authentication\nflow](https://docs.stripe.com/financial-connections/fundamentals#authentication-flow)\nby dynamically showing a streamlined user interface, for returning\n[Link](https://support.stripe.com/questions/link-for-financial-connections-support-for-businesses)\nusers.\n\n```\ncurl https://api.stripe.com/v1/customers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d email={{CUSTOMER_EMAIL}} \\\n -d name={{CUSTOMER_NAME}}\n```\n\n[Create a Financial Connections\nSessionServer-side](https://docs.stripe.com/financial-connections/other-data-powered-products#create-a-session)\nBefore you can retrieve data from a user’s bank account with Financial\nConnections, your user must authenticate their account with the [authentication\nflow](https://docs.stripe.com/financial-connections/fundamentals#authentication-flow).\n\nYour user begins the authentication flow when they want to connect their account\nto your site or application. Insert a button or link on your site or in your\napplication, which allows a user to link their account—for example, your button\nmight say “Link your bank account”.\n\nCreate a Financial Connections Session by posting to\n`/v1/financial_connections/sessions`:\n\n```\ncurl https://api.stripe.com/v1/financial_connections/sessions \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d \"account_holder[type]\"=customer \\\n -d \"account_holder[customer]\"={{CUSTOMER_ID}} \\\n -d \"permissions[]\"=balances \\\n -d \"permissions[]\"=ownership \\\n -d \"permissions[]\"=payment_method \\\n -d \"permissions[]\"=transactions\n```\n\n- Set `account_holder[customer]` to the Customer `id`.\n- Set the data `permissions` parameter to include the data required to fulfill\nyour use case.\n- *(Optional)* set the `prefetch` parameter for retrieving the data on account\ncreation.\n\nThe\n[permissions](https://docs.stripe.com/api/financial_connections/sessions/create#financial_connections_create_session-permissions)\nparameter controls which account data you can access. You must request at least\none permission. When completing the authentication flow, your user can see the\ndata you’ve requested access to, and provide their consent to share it.\n\nConsider the data required to fulfill your use case and request permission to\naccess only the data you need. Requesting permissions that go well beyond your\napplication’s scope might erode your users’ trust in how you use their data. For\nexample, if you’re building a personal financial management application or a\nlending product, you might request `transactions` data. If you’re mitigating\nfraud such as account takeovers, you might want to request `ownership` details.\n\nAfter your user authenticates their account, you can expand data permissions\nonly by creating a new Financial Connections Session and specifying a new value\nfor the `permissions` parameter. Your user must complete the authentication flow\nagain, where they’ll see the additional data you’ve requested permission to\naccess, and provide consent to share their data.\n\nThe optional [prefetch\nparameter](https://docs.stripe.com/api/financial_connections/sessions/create#financial_connections_create_session-prefetch)\ncontrols which data you retrieve immediately after the user connects their\naccount. Use this option if you know you always want a certain type of data. It\nremoves the need to make an extra API call to initiate a [data\nrefresh](https://docs.stripe.com/api/financial_connections/accounts/refresh).\n\nTo preserve the option to [accept ACH Direct Debit\npayments](https://docs.stripe.com/financial-connections/other-data-powered-products#accept-ach-direct-debit),\nrequest the `payment_method` permission.\n\n[Collect a Financial Connections\naccountClient-side](https://docs.stripe.com/financial-connections/other-data-powered-products#collect-an-account)\nUse the returned `client_secret` with Stripe.js to allow your user to connect\ntheir accounts. A `client_secret` allows client-side Stripe SDKs to make changes\nto the Financial Connections Session. Don’t store it, log it, embed it in URLs,\nor expose it to anyone other than your end user. Make sure that you have\n[TLS](https://docs.stripe.com/security/guide#tls) enabled on any page that\nincludes the client secret.\n\nUse\n[collectFinancialConnectionsAccounts](https://docs.stripe.com/js/financial_connections/collect_financial_connections_accounts)\nto collect an account.\n\n```\nconst stripe = new Stripe('pk_test_TYooMQauvdEDq54NiTphI7jx')\nconst financialConnectionsSessionResult = await\nstripe.collectFinancialConnectionsAccounts({\n clientSecret: \"{{SESSION_CLIENT_SECRET}}\",\n});\n```\n\nThis method loads the [authentication\nflow](https://docs.stripe.com/financial-connections/fundamentals#authentication-flow),\nthe client-side Stripe.js UI that helps your users link their financial accounts\nto you and Stripe.\n\nThe return value of `stripe.collectFinancialConnectionsAccounts` is a Promise.\nWhen the user completes the authentication flow, the Promise resolves with an\nobject that contains the list of connected accounts:\n\n```\n{\n \"financialConnectionsSession\": {\n \"id\": \"fcsess_123\",\n \"accounts\": [\n {\n \"id\": \"fca_456\",\n \"object\": \"financial_connections.account\",\n \"category\": \"Checking\",\n \"display_name\": \"Premium Checking\",\n \"institution_name\": \"Test Bank\",\n \"last4\": \"4242\"\n }\n ]\n }\n}\n```\n\nIf the user connects no accounts, or exits the authentication flow early, the\nresponse contains an empty `accounts` array.\n\nSuccessful completion of the authentication flow also sends one\n`financial_connections.account.created` webhook per account connected.\n\n[Retrieve data on a Financial Connections\naccountServer-side](https://docs.stripe.com/financial-connections/other-data-powered-products#retrieve-additional-data)\nAfter your user has successfully completed the authentication flow, access or\nrefresh the account data you’ve specified in the `permissions` parameter of the\nFinancial Connections Session.\n\nTo protect the privacy of your user’s data, account data accessible to you is\nlimited to the data you’ve specified in the `permissions` parameter.\n\nFollow the guides for\n[balances](https://docs.stripe.com/financial-connections/balances),\n[ownership](https://docs.stripe.com/financial-connections/ownership) and\n[transactions](https://docs.stripe.com/financial-connections/transactions) to\nstart retrieving account data.\n\n[OptionalAccept an ACH Direct Debit payment from a Financial Connections\naccount](https://docs.stripe.com/financial-connections/other-data-powered-products#accept-ach-direct-debit)\n\n## Links\n\n- [overview of integration\noptions](https://docs.stripe.com/financial-connections/use-cases)\n- [ownership](https://docs.stripe.com/financial-connections/ownership)\n- [transactions](https://docs.stripe.com/financial-connections/transactions)\n- [Register](https://dashboard.stripe.com/financial-connections/application)\n- [Customer object](https://docs.stripe.com/api/customers/object)\n- [authentication\nflow](https://docs.stripe.com/financial-connections/fundamentals#authentication-flow)\n-\n[Link](https://support.stripe.com/questions/link-for-financial-connections-support-for-businesses)\n-\n[permissions](https://docs.stripe.com/api/financial_connections/sessions/create#financial_connections_create_session-permissions)\n- [prefetch\nparameter](https://docs.stripe.com/api/financial_connections/sessions/create#financial_connections_create_session-prefetch)\n- [data\nrefresh](https://docs.stripe.com/api/financial_connections/accounts/refresh)\n- [TLS](https://docs.stripe.com/security/guide#tls)\n-\n[collectFinancialConnectionsAccounts](https://docs.stripe.com/js/financial_connections/collect_financial_connections_accounts)\n- [balances](https://docs.stripe.com/financial-connections/balances)",
  "metadata": {
    "title": "Collect an account to build data-powered products | Stripe Documentation",
    "description": "Collect your user's account and use data such as balances, ownership details, and transactions to build products.",
    "sourceURL": "https://docs.stripe.com/financial-connections/other-data-powered-products"
  }
}