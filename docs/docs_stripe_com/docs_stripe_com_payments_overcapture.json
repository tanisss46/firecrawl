{
  "content": "# Capture more than the authorized amount on a payment\n\n## Use overcapture to capture more than the authorized amount for a PaymentIntent.\n\nStripe-hosted pageEmbedded formAdvanced integration\nOvercapture allows you to capture with an amount that’s higher than the\nauthorized amount for a card payment. Unlike [incremental\nauthorizations](https://docs.stripe.com/payments/incremental-authorization),\novercapture doesn’t result in additional authorizations with the card networks.\nWhen you overcapture a PaymentIntent, your customer won’t see any immediate\nupdates on their credit card statement. After the captured amount settles, the\ninitial pending authorization gets updated with the final captured amount.\n\n## Availability\n\nWhen using overcapture, be aware of the following restrictions:\n\n- Only available with Visa, Mastercard, American Express, or Discover.\n- Only eligible for online card payments. For in-person card payments see how to\n[collect\ntips](https://docs.stripe.com/terminal/features/collecting-tips/overview).\n- Card brands limit the amount that you can overcapture (generally calculated as\na percentage of the authorized amount), and impose additional constraints,\nincluding country, card type, and merchant category restrictions (see below).\n-\n[mode](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-mode)\nis set to `payment` and\n[capture_method](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_intent_data-capture_method)\nis set to `manual` on the\n[CheckoutSession](https://docs.stripe.com/api/checkout/sessions/)\n\n#### IC+ feature\n\nWe offer overcapture to users on [IC+\npricing](https://support.stripe.com/questions/understanding-blended-interchange-pricing).\nIf you’re on standard Stripe pricing and want access to this feature, learn more\nat [support.stripe.com](https://support.stripe.com/).\n\n### Availability by card network, merchant country, and merchant category\n\nCard brandMerchant countryMerchant categoryPercent limitVisa*GlobalTaxicabs and\nlimousines; eating places and restaurants; drinking places (alcoholic\nbeverages); fast food restaurants; beauty and barber shops; health and beauty\nspas+20%GlobalCar rentalsGreater of +15% or +75 USD (or local currency\nequivalent)GlobalLodging; cruise lines+15%Global**All other merchant\ncategories+15%MastercardUS***Eating places and restaurants; fast food\nrestaurants+30%American ExpressGlobal****Eating places and restaurants; drinking\nplaces (alcoholic beverages); fast food restaurants+30%GlobalTaxicabs and\nlimousines; beauty and barber shops; health and beauty spas+20%GlobalLodging;\ncar rentals; truck and utility trailer rentals; motor home and recreational\nvehicle rentals; grocery stores; retail stores+15%DiscoverGlobalTaxicabs and\nlimousines; eating places and restaurants; drinking places (alcoholic\nbeverages); fast food restaurants; beauty and barber shops; health and beauty\nspas+20%GlobalLodging; car rentals+15\n* Excludes merchants in the European Economic Area (“EEA”) where the card is\nalso issued in the EEA\n\n** For cardholder-initiated transactions\n\n*** Card must also be issued in the United States\n\n**** The percent limit for debit and prepaid card payments is 20\n\n### Networks with limited support (beta)\n\n### Overcapture with Strong Customer Authentication (SCA)\n\nIf you and the cardholder are in a country that has Strong Customer\nAuthentication (SCA) requirements, keep in mind the limitations of overcapture\navailability.\n\n- Under SCA requirements, you generally need to authenticate an amount that’s\ngreater than or equal to the amount that you eventually capture. For this\nreason, you need to authenticate and authorize for the highest estimated amount\nthat you plan to capture, rather than using overcapture as outlined elsewhere on\nthis page. Subsequently, you can capture up to the full amount authenticated,\ndepending on the total amount for the goods or services provided. If you find it\nnecessary to capture an amount beyond the originally authorized and\nauthenticated amount, you must cancel the original payment and create a new one\nwith the correct amount. However, there are some exceptions to this requirement\n(see below).\n- There are a number of [transaction\nexemptions](https://support.stripe.com/questions/transaction-exemptions-for-strong-customer-authentication-%28sca%29)\nfor SCA where overcapture might be permissible. For example, merchant-initiated\ntransactions (MIT) where the customer isn’t physically present during the\ncheckout flow are potentially exempt. See [when to categorize a transaction as\nMIT](https://support.stripe.com/questions/merchant-initiated-transactions-(mits)-when-to-categorize-a-transaction-as-mit).\n\nYou need to familiarize yourself with the complete documentation to gain a\ncomprehensive understanding of overcapture and SCA requirements. See our [SCA\nguide](https://stripe.com/guides/strong-customer-authentication) for more\ninformation.\n\nYou can use the\n[custom_text](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-custom_text)\nfield when creating a new\n[CheckoutSession](https://docs.stripe.com/api/checkout_sessions) to display\nadditional text on the checkout page to help meet compliance requirements.\n\n#### Compliance\n\nYou’re responsible for your compliance with all applicable laws, regulations,\nand network rules when using overcapture. Make sure to review the rules for the\ncard networks that you plan to use this feature with to make sure your sales\ncomply with the applicable rules, which vary by network. For example, some card\nnetworks don’t allow overcapture for transactions where the final transaction\namount should be known at the time of authorization.\n\nThe information provided on this page relating to your compliance with these\nrequirements is for your general guidance, and isn’t legal, tax, accounting, or\nother professional advice. Consult with a professional if you’re unsure about\nyour obligations.\n\n[Create a Checkout\nSession](https://docs.stripe.com/payments/overcapture#create-and-confirm)\nAdd a checkout button to your website that calls a server-side endpoint to\ncreate a [Checkout\nSession](https://docs.stripe.com/api/checkout/sessions/create).\n\n```\n<html>\n <head>\n <title>Buy cool new product</title>\n </head>\n <body>\n<!-- Use action=\"/create-checkout-session.php\" if your server is PHP based. -->\n <form action=\"/create-checkout-session\" method=\"POST\">\n <button type=\"submit\">Checkout</button>\n </form>\n </body>\n</html>\n```\n\nA Checkout Session is the programmatic representation of what your customer sees\nwhen they’re redirected to the payment form. You can configure it with options\nsuch as:\n\n- [Line\nitems](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-line_items)\nto charge\n- Currencies to use\n\nYou must populate `success_url` with the URL of a page on your website that\nCheckout returns your customer to after they complete the payment. You can\noptionally also provide a `cancel_url` of a page on your website that Checkout\nreturns your customer to if they terminate the payment process before\ncompletion.\n\n#### Note\n\nCheckout Sessions expire 24 hours after creation by default.\n\nAfter creating a Checkout Session, redirect your customer to the\n[URL](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-url)\nreturned in the response.\n\nTo enable the overcapture feature, set\n[request_overcapture](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_method_options-card-request_overcapture)\nto `if_available`.\n\n```\n# This example sets up an endpoint using the Sinatra framework.\n# Watch this video to get started: https://youtu.be/8aA9Enb8NVc.\n\nrequire 'json'\nrequire 'sinatra'\nrequire 'stripe'\n\n# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https://dashboard.stripe.com/apikeys\nStripe.api_key = 'sk_test_BQokikJOvBiI2HlWgH4olfQ2'\n\npost '/create-checkout-session' do\n session = Stripe::Checkout::Session.create({\n line_items: [{\n price_data: {\n currency: 'usd',\n product_data: {\n name: 'T-shirt',\n },\n unit_amount: 2000,\n },\n quantity: 1,\n }],\n payment_method_options: {\n card: {\n request_overcapture: 'if_available',\n },\n },\n mode: 'payment',\n # These placeholder URLs will be replaced in a following step.\n success_url: 'https://example.com/success',\n cancel_url: 'https://example.com/cancel',\n })\n\n redirect session.url, 303\nend\n```\n\nAfter the customer completes checkout, look at the\n[overcapture.status](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-overcapture)\nfield on the [latest_charge](https://docs.stripe.com/api/charges/object) in the\n[PaymentIntent](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-payment_intent)\nto determine if overcapture is available for the payment based on\n[availability](https://docs.stripe.com/payments/overcapture#availability). If\n`available`, the\n[maximum_amount_capturable](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-overcapture-maximum_amount_capturable)\nfield indicates the maximum amount capturable for the PaymentIntent. If\n`unavailable`, the maximum_amount_capturable is the amount authorized.\n\n```\n// PaymentIntent response\n{\n \"id\": \"pi_xxx\",\n \"object\": \"payment_intent\",\n \"amount\": 1000,\n \"amount_capturable\": 1000,\n \"amount_received\": 0,\n \"status\": \"requires_capture\",\n ...\n // if latest_charge is expanded\n \"latest_charge\": {\n \"id\": \"ch_xxx\",\n \"object\": \"charge\",\n \"payment_method_details\": {\n \"card\": {\n \"amount_authorized\": 1000\n \"overcapture\": {\n \"status\": \"available\", // or \"unavailable\"\n \"maximum_amount_capturable\": 1200\n }\n }\n }\n ...\n }\n ...\n}\n```\n\n[Capture the\nPaymentIntent](https://docs.stripe.com/payments/overcapture#capture-payment-intent)\nTo capture more than the currently authorized amount on a PaymentIntent, use the\n[capture](https://docs.stripe.com/api/payment_intents/capture) endpoint and\nprovide an\n[amount_to_capture](https://docs.stripe.com/api/payment_intents/capture#capture_payment_intent-amount_to_capture)\nup to the\n[maximum_amount_capturable](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-overcapture).\n\nIf you need to capture an amount larger than the `maximum_amount_capturable`,\nperform an [incremental\nauthorization](https://docs.stripe.com/payments/incremental-authorization) to\nincrease the authorized amount, where available.\n\n```\ncurl https://api.stripe.com/v1/payment_intents/pi_xxx/capture \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d amount_to_capture=1200 \\\n -d \"expand[]\"=latest_charge\n```\n\nThe\n[amount_capturable](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-amount_capturable)\nand\n[amount_received](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-amount_received)\nfields update accordingly in the PaymentIntent capture response for a successful\novercapture. The captured PaymentIntent that returns has an updated\n[amount](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-amount)\nto reflect the total monetary amount moved for this payment. Use the\n[amount_authorized](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-amount_authorized)\nfield on the associated Charge to reference the initial amount authorized for a\nsuccessfully overcaptured payment.\n\n```\n// PaymentIntent response\n{\n \"id\": \"pi_xxx\",\n \"object\": \"payment_intent\",\n \"amount\": 1200,\n \"amount_capturable\": 0,\n \"amount_received\": 1200,\n \"status\": \"succeeded\",\n ...\n // if latest_charge is expanded\n \"latest_charge\": {\n \"id\": \"ch_xxx\",\n \"object\": \"charge\",\n \"payment_method_details\": {\n \"card\": {\n \"amount_authorized\": 1000,\n \"overcapture\": {\n \"maximum_amount_capturable\": 1200,\n \"status\": \"available\" // or \"unavailable\"\n }\n }\n }\n ...\n }\n ...\n}\n```\n\n## Test your integration\n\nUse any of the below Stripe test cards with any CVC and future expiration date\nto request and perform overcaptures while in test mode. If overcapture is\navailable on payments for a given network in test mode, it’s also available in\nlive mode.\n\nCard brandNumberPayment\nmethodVisa4242424242424242`pm_card_visa`Mastercard5555555555554444`pm_card_mastercard`Amex378282246310005`pm_card_amex`Discover6011111111111117`pm_card_discover`\n\n## Links\n\n- [incremental\nauthorizations](https://docs.stripe.com/payments/incremental-authorization)\n- [collect\ntips](https://docs.stripe.com/terminal/features/collecting-tips/overview)\n-\n[mode](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-mode)\n-\n[capture_method](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_intent_data-capture_method)\n- [CheckoutSession](https://docs.stripe.com/api/checkout/sessions/)\n- [IC+\npricing](https://support.stripe.com/questions/understanding-blended-interchange-pricing)\n- [support.stripe.com](https://support.stripe.com/)\n- [transaction\nexemptions](https://support.stripe.com/questions/transaction-exemptions-for-strong-customer-authentication-%28sca%29)\n- [when to categorize a transaction as\nMIT](https://support.stripe.com/questions/merchant-initiated-transactions-(mits)-when-to-categorize-a-transaction-as-mit)\n- [SCA guide](https://stripe.com/guides/strong-customer-authentication)\n-\n[custom_text](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-custom_text)\n- [CheckoutSession](https://docs.stripe.com/api/checkout_sessions)\n- [Checkout Session](https://docs.stripe.com/api/checkout/sessions/create)\n- [Line\nitems](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-line_items)\n-\n[URL](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-url)\n-\n[request_overcapture](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_method_options-card-request_overcapture)\n- [https://youtu.be/8aA9Enb8NVc.](https://youtu.be/8aA9Enb8NVc)\n- [https://dashboard.stripe.com/apikeys](https://dashboard.stripe.com/apikeys)\n- [https://example.com/success](https://example.com/success)\n- [https://example.com/cancel](https://example.com/cancel)\n-\n[overcapture.status](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-overcapture)\n- [latest_charge](https://docs.stripe.com/api/charges/object)\n-\n[PaymentIntent](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-payment_intent)\n-\n[maximum_amount_capturable](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-overcapture-maximum_amount_capturable)\n- [capture](https://docs.stripe.com/api/payment_intents/capture)\n-\n[amount_to_capture](https://docs.stripe.com/api/payment_intents/capture#capture_payment_intent-amount_to_capture)\n-\n[amount_capturable](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-amount_capturable)\n-\n[amount_received](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-amount_received)\n-\n[amount](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-amount)\n-\n[amount_authorized](https://docs.stripe.com/api/charges/object#charge_object-payment_method_details-card-amount_authorized)",
  "metadata": {
    "title": "Capture more than the authorized amount on a payment | Stripe Documentation",
    "description": "Use overcapture to capture more than the authorized amount for a PaymentIntent.",
    "sourceURL": "https://docs.stripe.com/payments/overcapture"
  }
}