{
  "content": "# India recurring paymentsPublic preview\n\n## Learn how to update an integration to support RBI e-mandates.\n\nThe Reserve Bank of India (RBI) issued a\n[directive](https://www.rbi.org.in/Scripts/NotificationUser.aspx?Id=11668)\n(amended subsequently in [December\n2020](https://www.rbi.org.in/Scripts/NotificationUser.aspx?Id=12002) and [March\n2021](https://www.rbi.org.in/Scripts/NotificationUser.aspx?Id=12051&Mode=0))\nthat introduces additional security measures for recurring payments on India\nissued cards. These measures include:\n\n- Banks need to register cardholders and create an e-mandate through a one-time\nprocess, using additional factor authentication (AFA) like [3D Secure\n(3DS)](https://docs.stripe.com/payments/3d-secure).\n- Banks must alert cardholders at least 24 hours before charges take place and\ngive them the ability to opt out of transactions.\n- Recurring transactions over 15,000 INR (or equivalent in other currencies)\nmust go through AFA each time.\n\nIf you’re an India-based Stripe user or an international (non-IN) Stripe user,\nyour business is impacted if you have customers who use India cards for:\n\n- Off-session payments\n- Subscriptions or Invoices where the `collection_method` is set to\n`charge_automatically`\n\n## How payments work with an e-mandate\n\nStripe has worked with a partner platform to support registering e-mandates and\nissuing pre-debit notifications to customers.\n\n#### Note\n\nWe don’t currently offer the use of e-mandates to Stripe users in Mexico and\nJapan.\n\nDepending on how you’ve integrated with Stripe, you might need to send Stripe\nadditional information to set up a mandate. The customer must go through AFA\n(3DS) to register the mandate.\n\nSubsequent off-session payments or auto-debits for a Subscription undergo a\nsignificant change. Customers need to receive a pre-debit notification at least\n24 hours before the actual payment with the exact debit amount mentioned. The\npre-debit notification contains information about the payment and an option to\ncancel the mandate. If the payment amount is above 15,000 INR or the mandate’s\nmaximum amount, the pre-debit notification contains a link to perform AFA (3DS)\nto authorize the payment.\n\nBecause Stripe is integrating with a partner platform, we wait 26 hours before\ncharging the customer after receiving a payment request (we add a buffer for\npossible downstream issues, which necessitates the 26 hours advance\nnotification). This means that Stripe delays collecting payment by 26 hours.\n\nWithout a mandate for an off-session payment, the payment will be declined.\n\n## Integration\n\nThe RBI regulations impact Subscriptions that use\n`collection_method=charge_automatically` to charge India issued cards.\n\n#### Note\n\nStripe doesn’t support e-mandates for India recurring payments with\n`PaymentIntents` or `SetupIntents`. To manage mandates for recurring payments,\nuse Subscriptions, as described below.\n\n### Subscription creation\n\nCustom codeStripe-hosted page\nWhen creating a new Subscription with the API,\n\n- If you have a default payment method set, the Subscription uses the latest\nSetupIntent on the payment method, and attempts to find a corresponding mandate.\n- If no mandate is in place, Stripe automatically attempts to create one even if\nyou don’t pass in the relevant parameters in\n[mandate_options](https://docs.stripe.com/api/subscriptions/create#create_subscription-payment_settings-payment_method_options-card-mandate_options).\nThe customer then needs to authenticate the payment.\n\nTo learn how to create a new Subscription, see [Build a subscriptions\nintegration](https://docs.stripe.com/billing/subscriptions/build-subscriptions).\n\n### Subscription Revenue Recovery\n\nStripe provides a number of automated recovery features to help collect payments\nthat might’ve been unsuccessful. If you want to handle these payment failures on\nyour own, refer to [Build your own handling for recurring charge\nfailures](https://docs.stripe.com/india-recurring-payments#handle-recurring-charge-failures)\nfor guidance. Otherwise, some recommendations are listed below.\n\n#### Note\n\nPayments from India issued cards are attempted only once. This behavior is\nindependent of your payment retry settings. If the payment from an India issued\ncard fails, your Subscription and Invoice status will still be updated based on\nwhat you configured in your [Subscriptions and emails\nsettings](https://dashboard.stripe.com/settings/billing/automatic) for “If all\nretries for a payment fail”.\n\n#### 3D Secure emails\n\nIf a mandate doesn’t exist on the default payment method during Subscription\nrenewals or updates, Stripe attempts to create a new one. To register the\nmandate, the customer needs to complete AFA (3DS). Enable the [Subscriptions and\nemails settings](https://dashboard.stripe.com/settings/billing/automatic) to\n`Send a Stripe-hosted link for customers to confirm their payments when\nrequired` so that customers can be brought back on-session to complete\nauthentication if required.\n\n#### Note\n\nStripe doesn’t attempt to create a new mandate if the current mandate used by\nthe Subscription is `inactive`.\n\n#### Manage failed payments\n\nWe recommend enabling notifications to your customers if their Subscription\npayments fail and their Subscription is paused. Stripe can send emails to\ncustomers to update failed card payment methods if you enable it in the\n[Subscriptions and emails\nsettings](https://dashboard.stripe.com/settings/billing/automatic).\n\n### Mandate creation\n\nIf you rely on Stripe to automatically create the mandate, the mandate details\nare returned in the Invoice’s underlying PaymentIntent and corresponding Charge,\nor the SetupIntent if you’re creating the Subscription with a trial.\n\nStripe doesn’t return a mandate ID if any of the following is true:\n\n- A card isn’t an India issued card.\n- The currency for the mandate isn’t supported by either the issuer or for the\nStripe account’s country.\n- The India issued card is neither Visa nor Mastercard. Stripe only supports\nmandates for these two card brands.\n\nStripe supports INR mandates for all businesses. The following currencies are\nsupported only for international (non-IN) businesses:\n\n- USD\n- EUR\n- GBP\n- SGD\n- CAD\n- CHF\n- SEK\n- AED\n- JPY\n- NOK\n- MYR\n- HKD\n\nThere are over 100 issuing banks in India and the process of fully adapting to\nthe new requirements is expected to take some time. An issuer might not support\ne-mandates for a particular currency yet. If so, Stripe doesn’t return a mandate\nID.\n\n### Mandate status and troubleshooting\n\nIf Stripe can’t create a mandate, you can suggest using a different card, or you\ncan offer alternative options such as setting\n[collection_method](https://docs.stripe.com/api/subscriptions/object#subscription_object-collection_method)\nas `send_invoice` for the Subscription instead.\n\nAlso, a previously active mandate can become inactive, for instance if the\ncustomer cancels it. In that case, the mandate becomes `inactive` and Stripe\nsends a `mandate.updated` event.\n\nFor more information on receiving webhooks, see [Steps to receive\nwebhooks](https://docs.stripe.com/webhooks#webhooks-summary).\n\n### Subscription updates\n\nThe pre-debit notification that the bank sends tells the cardholder, at minimum,\nabout the name of the business, the transaction amount, the date or time of the\ndebit, the reference number of the mandate, and the reason for debit. Make sure\nthat your mandate details match what you’re actually debiting the customer for\nto avoid confusion or declines.\n\nIf you depend on Stripe to automatically create mandates for your Subscription\nand want to update a Subscription, we recommend that you bring the customer back\non-session to cancel the original Subscription. Doing so creates a new\nsubscription in the following scenarios, and creates a new mandate that reflects\nthe Subscription details accurately:\n\n- Changes to the billing interval of a Subscription\n- Upgrades to a Subscription where the customer wants to avoid having to\nauthorize the payment each renewal. For context, Stripe creates the mandate with\n`amount_type=maximum` by default. A customer can still be charged more than the\nmaximum amount with `amount_type=maximum`. However, the customer must authorize\npayments for amounts more than the `mandate_options[amount]` or 15,000 INR\n(whichever is less).\n\nExamples:\n\n- If you have `amount_type=maximum` , `amount=100000`, the customer would need\nto authenticate for amounts over 1,000 INR.\n- If you have `amount=2000000`, the customer would need to authenticate for\namounts over 15,000 INR.\n\n### Pre-debit notification\n\nWhen the off-session PaymentIntent is\n[confirmed](https://docs.stripe.com/api/payment_intents/confirm), the issuing\nbank sends the customer the pre-debit notification. The PaymentIntent\ntransitions to a `processing` state for the entire duration of the pre-debit\nnotification period (26 hours) and can’t be canceled.\n\n```\n{\n \"object\": \"payment_intent\",\n ...\n \"processing\": {\n \"card\": {\n \"customer_notification\": {\n \"approval_requested\": true,\n \"completes_at\": 1677307005\n }\n },\n \"type\": \"card\"\n },\n ...\n \"status\": \"processing\",\n ...\n}\n```\n\nIf\n[processing.card.customer_notification.approval_requested](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-processing-card-customer_notification-approval_requested)\nis `true`, the customer needs to authenticate the payment using the pre-debit\nnotification sent to them by the issuing bank.\n\nThe\n[processing.card.customer_notification.completes_at](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-processing-card-customer_notification-completes_at)\nattribute specifies the time that the Stripe attempts to charge the card. If\nsuccessfully processing the payment requires customer approval, they need to\nauthenticate the payment by the specified time.\n\n### Error and decline codes\n\nWe return error\n[codes](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-last_payment_error-decline_code)\nfor the following scenarios:\n\nError codeDescription`payment_intent_mandate_invalid`Attempting a recurring\npayment using an inactive mandate returns this code. You can prevent this by\nchecking the mandate status before attempting to\ncharge.`india_recurring_payment_mandate_canceled`Attempting a recurring payment\nusing a canceled mandate returns this code. This can happen when we only learn\nthat a mandate has been canceled at this point.`processing_error`Discovery of a\n(usually transient) processing error returns this code.\nIn the context of e-mandates, certain [decline\ncodes](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-last_payment_error-decline_code)\nhave potentially more specific explanations than [in general\nscenarios](https://docs.stripe.com/declines/codes):\n\nDecline codeDescription`transaction_not_approved`Attempting a subsequent payment\nwhen the customer has paused permissions to auto-debit, or doesn’t authenticate\nthe payment when it’s required returns this code.\n## Testing\n\nYou can use these [test card\nnumbers](https://docs.stripe.com/testing#testing-interactively) to simulate\ndifferent scenarios.\n\nIn a [sandbox](https://docs.stripe.com/sandboxes), it takes approximately 15\nminutes for an off-session PaymentIntent to transition out of the `processing`\nstate. The on-session PaymentIntent for an initial payment never enters the\n`processing` state.\n\nCard numbersPaymentMethodsNumberScenario4000003560000123Simulates successful\nmandate setup and renewals.4000003560000297Simulates a cardholder receiving a\npre-debit notification for an off-session payment either canceling or pausing\nthe payment for a mandate of any amount.4000003560000248Simulates the issuing\nbank’s failure to send a pre-debit notification to the cardholder during\noff-session payment for a mandate of any amount.4000003560000263Simulates a\ncardholder canceling a mandate of any amount.\n## Limitations\n\nKeep in mind the following limitations:\n\n- Stripe attempts to automatically create mandates only on Subscriptions created\nafter October 1, 2021. If you have a Subscription created before then, cancel\nand create a new Subscription to make sure a mandate is created.\n- You can’t create a mandate using the\n[Charges](https://docs.stripe.com/api/charges) and\n[Sources](https://docs.stripe.com/api/sources) APIs.\n- You can’t pass an existing mandate to a Subscription.\n- You can’t cancel or update a mandate.\n\n## Links\n\n- [directive](https://www.rbi.org.in/Scripts/NotificationUser.aspx?Id=11668)\n- [December 2020](https://www.rbi.org.in/Scripts/NotificationUser.aspx?Id=12002)\n- [March\n2021](https://www.rbi.org.in/Scripts/NotificationUser.aspx?Id=12051&Mode=0)\n- [3D Secure (3DS)](https://docs.stripe.com/payments/3d-secure)\n-\n[mandate_options](https://docs.stripe.com/api/subscriptions/create#create_subscription-payment_settings-payment_method_options-card-mandate_options)\n- [Build a subscriptions\nintegration](https://docs.stripe.com/billing/subscriptions/build-subscriptions)\n- [Subscriptions and emails\nsettings](https://dashboard.stripe.com/settings/billing/automatic)\n-\n[collection_method](https://docs.stripe.com/api/subscriptions/object#subscription_object-collection_method)\n- [Steps to receive webhooks](https://docs.stripe.com/webhooks#webhooks-summary)\n- [confirmed](https://docs.stripe.com/api/payment_intents/confirm)\n-\n[processing.card.customer_notification.approval_requested](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-processing-card-customer_notification-approval_requested)\n-\n[processing.card.customer_notification.completes_at](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-processing-card-customer_notification-completes_at)\n-\n[codes](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-last_payment_error-decline_code)\n- [in general scenarios](https://docs.stripe.com/declines/codes)\n- [test card numbers](https://docs.stripe.com/testing#testing-interactively)\n- [sandbox](https://docs.stripe.com/sandboxes)\n- [Charges](https://docs.stripe.com/api/charges)\n- [Sources](https://docs.stripe.com/api/sources)",
  "metadata": {
    "title": "India recurring payments | Stripe Documentation",
    "description": "Learn how to update an integration to support RBI e-mandates.",
    "sourceURL": "https://docs.stripe.com/india-recurring-payments"
  }
}