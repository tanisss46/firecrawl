{
  "content": "# Customize redirect behavior\n\n## Display a confirmation page with your customer's order information.\n\nStripe-hosted pageEmbedded formEmbedded componentsPublic preview\nIf you have a Checkout integration that uses a Stripe-hosted page, Stripe\nredirects your customer to a success page that you create and host on your site.\nYou can use the details from a [Checkout\nSession](https://docs.stripe.com/api/checkout/sessions) to display an order\nconfirmation page for your customer (for example, their name or payment amount)\nafter the payment.\n\n## Redirect customers to a success page\n\nTo use the details from a Checkout Session:\n\n- Modify the\n[success_url](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-success_url)\nto pass the Checkout Session ID to the client side.\n- Look up the Checkout Session using the ID on your success page.\n- Use the Checkout Session to customize what’s displayed on your success page.\n\n## Modify the success URL Server-side\n\nAdd the `{CHECKOUT_SESSION_ID}` template variable to the `success_url` when you\ncreate the Checkout Session. Note that this is a literal string and must be\nadded exactly as you see it here. Do not substitute it with a Checkout Session\nID—this happens automatically after your customer pays and is redirected to the\nsuccess page.\n\n```\nsession = Stripe::Checkout::Session.create(\n success_url: \"http://yoursite.com/order/success\",\nsuccess_url:\n\"http://yoursite.com/order/success?session_id={CHECKOUT_SESSION_ID}\",\n # other options...,\n)\n```\n\n## Create the success page Server-side\n\nLook up the Checkout Session using the ID and create a success page to display\nthe order information. This example prints out the customer’s name:\n\n```\n# This example sets up an endpoint using the Sinatra framework.\n# Watch this video to get started: https://youtu.be/8aA9Enb8NVc.\n\n# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https://dashboard.stripe.com/apikeys\nStripe.api_key = 'sk_test_BQokikJOvBiI2HlWgH4olfQ2'\n\nrequire 'sinatra'\n\nget '/order/success' do\n session = Stripe::Checkout::Session.retrieve(params[:session_id])\n customer = Stripe::Customer.retrieve(session.customer)\n\n \"<html><body><h1>Thanks for your order, #{customer.name}!</h1></body></html>\"\nend\n```\n\n## Test the integration\n\nTo confirm that your redirect is working as expected:\n\n- Click the checkout button.\n- Fill in the customer name and other payment details.\n- Click **Pay**.\n\nIf it works, you’re redirected to the success page with your custom message. For\nexample, if you used the message in the code samples, the success page displays\nthis message: **Thanks for your order, Jenny Rosen!**\n\n## Links\n\n- [Checkout Session](https://docs.stripe.com/api/checkout/sessions)\n-\n[success_url](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-success_url)\n- [http://yoursite.com/order/success](http://yoursite.com/order/success)\n-\n[http://yoursite.com/order/success?session_id={CHECKOUT_SESSION_ID}](http://yoursite.com/order/success?session_id={CHECKOUT_SESSION_ID})\n- [https://youtu.be/8aA9Enb8NVc.](https://youtu.be/8aA9Enb8NVc)\n- [https://dashboard.stripe.com/apikeys](https://dashboard.stripe.com/apikeys)",
  "metadata": {
    "title": "Customize redirect behavior | Stripe Documentation",
    "description": "Display a confirmation page with your customer's order information.",
    "sourceURL": "https://docs.stripe.com/payments/checkout/custom-success-page"
  }
}