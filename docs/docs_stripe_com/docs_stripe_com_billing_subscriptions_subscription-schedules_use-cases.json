{
  "content": "# Subscription schedules use cases\n\n## Learn how to use subscription schedules.\n\nTo understand\n[subscription](https://docs.stripe.com/billing/subscriptions/creating)\nschedules, imagine a fictional newspaper company called The Pacific. It offers\ntwo subscription options:\n\n- *Print*, where customers receive the physical paper\n- *Digital*, where customers get access to exclusive content on The Pacific’s\nwebsite\n\nBoth subscriptions bill monthly. Browse possible options for subscription\nschedules below.\n\n## Start a subscription in the future\n\nBy default, new print subscriptions start on the first day of the next month. To\naccomplish this, the `start_date` is set to a point in the future. The code\nbelow creates a subscription that starts in the future:\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d start_date=1690873200 \\\n -d end_behavior=release \\\n -d \"phases[0][items][0][price]\"={{PRICE_PRINT}} \\\n -d \"phases[0][items][0][quantity]\"=1 \\\n -d \"phases[0][iterations]\"=12\n```\n\n## Backdate a subscription\n\nWhen customers subscribe to the digital plan, The Pacific backdates their\nsubscriptions to the first day of the current month. Backdating charges for time\nin the past and allows digital subscribers to access the website immediately.\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d start_date=1688194800 \\\n -d end_behavior=release \\\n -d \"phases[0][items][0][price]\"={{PRICE_DIGITAL}} \\\n -d \"phases[0][items][0][quantity]\"=1 \\\n -d \"phases[0][iterations]\"=12\n```\n\n## Add a schedule to an existing subscription\n\nThe Pacific may discover that some of their original customers are on\nsubscriptions without schedules. Because these subscriptions exist already, the\nsubscription IDs can be passed in the `from_subscription` attribute to add a\nschedule. Passing the subscription IDs in this way creates a schedule with one\nphase that’s based on the current billing period of the subscription.\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d from_subscription={{SUBSCRIPTION_ID}}\n```\n\nWhile adding these schedules, some customers decide to get a print subscription\nso The Pacific adds a second phase to the schedule to start the print plan one\nmonth from now. The following use case shows an example of this process.\n\n## Upgrade subscriptions\n\nThe Pacific offers an option to start with a print subscription for one month,\nthen automatically add the digital option. Some customers prefer this because\nthey can test out the print publication first and then decide if they want to\ncontinue or cancel their subscription.\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d start_date=now \\\n -d end_behavior=release \\\n -d \"phases[0][items][0][price]\"={{PRICE_PRINT}} \\\n -d \"phases[0][items][0][quantity]\"=1 \\\n -d \"phases[0][iterations]\"=1 \\\n -d \"phases[1][items][0][price]\"={{PRICE_PRINT}} \\\n -d \"phases[1][items][0][quantity]\"=1 \\\n -d \"phases[1][items][1][price]\"={{PRICE_DIGITAL}} \\\n -d \"phases[1][items][1][quantity]\"=1 \\\n -d \"phases[1][iterations]\"=11\n```\n\n## Downgrade subscriptions\n\nThe Pacific also offers an option to start a subscription with both the print\nand digital publications, and then downgrade to only the print publication for\nthe rest of the subscription. [Customers](https://docs.stripe.com/api/customers)\nuse this option to test out both publications to see how they like them.\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d start_date=now \\\n -d end_behavior=release \\\n -d \"phases[0][items][0][price]\"={{PRICE_DIGITAL}} \\\n -d \"phases[0][items][0][quantity]\"=1 \\\n -d \"phases[0][items][1][price]\"={{PRICE_PRINT}} \\\n -d \"phases[0][items][1][quantity]\"=1 \\\n -d \"phases[0][iterations]\"=1 \\\n -d \"phases[1][items][0][price]\"={{PRICE_PRINT}} \\\n -d \"phases[1][items][0][quantity]\"=1 \\\n -d \"phases[1][iterations]\"=11\n```\n\n## Change subscriptions\n\nThe Pacific offers two print subscription options, a basic option with\nadvertisements or a premium option without advertisements. Some customers on the\npremium option decide they want to change to the basic option with\nadvertisements at the next billing cycle. Create a schedule using the existing\nsubscription and then update the schedule with the basic option with\nadvertisements as a new phase.\n\n```\n# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https://dashboard.stripe.com/apikeys\nStripe.api_key = 'sk_test_BQokikJOvBiI2HlWgH4olfQ2'\n\n# Create a subscription schedule with the existing subscription\nschedule = Stripe::SubscriptionSchedule.create({\n from_subscription: 'sub_ERf72J8Sc7qx7D',\n})\n\n# Update the schedule with the new phase\nStripe::SubscriptionSchedule.update(\n schedule.id,\n {\n phases: [\n {\n items: [\n {\n price: schedule.phases[0].items[0].price,\n quantity: schedule.phases[0].items[0].quantity,\n },\n ],\n start_date: schedule.phases[0].start_date,\n end_date: schedule.phases[0].end_date,\n },\n {\n items: [\n {\n price: '{{PRICE_PRINT_BASIC}}',\n quantity: 1,\n },\n ],\n iterations: 1,\n },\n ],\n },\n)\n```\n\n## Increase the quantity\n\nYou can also schedule increases to the quantities on a subscription. The\nschedule below starts with one instance of the digital publication for one\nmonth. In the second phase, the quantity is increased to 2 for 11 more months.\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d start_date=now \\\n -d end_behavior=release \\\n -d \"phases[0][items][0][price]\"={{PRICE_ID}} \\\n -d \"phases[0][items][0][quantity]\"=1 \\\n -d \"phases[0][iterations]\"=1 \\\n -d \"phases[1][items][0][price]\"={{PRICE_ID}} \\\n -d \"phases[1][items][0][quantity]\"=2 \\\n -d \"phases[1][iterations]\"=11\n```\n\n## Use coupons\n\nSometimes The Pacific runs subscription specials. The schedule below starts the\ncustomer on the print publication at 50% off for six months. The schedule\nremoves the coupon from the subscription in the second phase, which entails the\nremaining six months.\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d start_date=now \\\n -d end_behavior=release \\\n -d \"phases[0][items][0][price]\"={{PRICE_ID}} \\\n -d \"phases[0][items][0][quantity]\"=1 \\\n -d \"phases[0][iterations]\"=6 \\\n -d \"phases[0][coupon]\"={{COUPON_ID}} \\\n -d \"phases[1][items][0][price]\"={{PRICE_ID}} \\\n -d \"phases[1][items][0][quantity]\"=1 \\\n -d \"phases[1][iterations]\"=6\n```\n\n## Change tax rates\n\nThe Pacific operates in several jurisdictions, and some of them have unique tax\nrates for subscription based businesses. One of these jurisdictions requires two\ntax rates: one for the first month when a customer initially subscribes, and one\nfor recurring billings.\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d start_date=now \\\n -d end_behavior=release \\\n -d \"phases[0][items][0][price]\"={{PRICE_ID}} \\\n -d \"phases[0][items][0][quantity]\"=1 \\\n -d \"phases[0][items][0][tax_rates][0]\"=txr_2J8lmBBGHJYyuUJqF6QJtaAA \\\n -d \"phases[0][iterations]\"=1 \\\n -d \"phases[1][items][0][price]\"={{PRICE_ID}} \\\n -d \"phases[1][items][0][quantity]\"=1 \\\n -d \"phases[1][items][0][tax_rates][0]\"=txr_2J8lmBBGHJYyuUJqF6QJtbBB \\\n -d \"phases[1][iterations]\"=11\n```\n\n## Release a subscription from a schedule\n\nYou can [release](https://docs.stripe.com/api/subscription_schedules/release) a\nsubscription from a schedule as long as the status of the schedule is\n`not_started` or `active`. Releasing a subscription leaves it in place but\nremoves the schedule and any remaining phases.\n\n```\ncurl -X POST\nhttps://api.stripe.com/v1/subscription_schedules/{{SUBSCRIPTION_SCHEDULE_ID}}/release\n\\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\"\n```\n\n## Cancel a schedule and subscription\n\nYou can cancel a subscription schedule and its associated subscription\nimmediately (if the subscription schedule has an active subscription). A\nsubscription schedule can only be canceled if its status is `not_started` or\n`active`.\n\n```\ncurl -X POST\nhttps://api.stripe.com/v1/subscription_schedules/{{SUBSCRIPTION_SCHEDULE_ID}}/cancel\n\\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\"\n```\n\n## Reset the billing cycle anchor\n\nThe Pacific bills their long-time print customers on whichever day of the month\nthey originally subscribed. This day is their billing cycle anchor.\n\nIf these customers transition to the digital edition, The Pacific schedules\ntheir transition date for the 1st day of the following month. They also reset\nthe billing cycle anchor to that same date.\n\nYou can verify that the billing cycle anchor gets reset by creating a\nsubscription using the sample code below. Look at the subscription in the\nDashboard, and notice that the Upcoming\n[Invoice](https://docs.stripe.com/api/invoices) is scheduled to bill the\ncustomer as soon as the digital subscription starts on the 1st.\n\nTo see what happens if you don’t reset the anchor, run the sample code again,\nbut remove the line that sets the billing cycle anchor to `phase_start`. Without\nthat line, the Upcoming Invoice in the Dashboard waits to bill the customer\nuntil a full month from today, despite the transition that occurs on the 1st.\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d start_date=now \\\n -d \"phases[0][items][0][price]\"={{PRICE_PRINT}} \\\n -d \"phases[0][items][0][quantity]\"=1 \\\n -d \"phases[0][end_date]\"=1690873200 \\\n -d \"phases[1][items][0][price]\"={{PRICE_DIGITAL}} \\\n -d \"phases[1][items][0][quantity]\"=1 \\\n -d \"phases[1][iterations]\"=11 \\\n -d \"phases[1][billing_cycle_anchor]\"=phase_start\n```\n\n## Installment plans\n\nInstallment plans allow customers to make partial payments for a set amount of\ntime until the total amount is paid. For example, when The Pacific buys new\nprinting presses, they sell the used ones to other publications. Smaller\npublications rarely have enough funds to pay for a printing press upfront, so\nthey pay using an installment plan instead.\n\nFor most presses, The Pacific charges 1,000 USD per month so a reusable price is\ncreated:\n\n```\ncurl https://api.stripe.com/v1/prices \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d unit_amount=100000 \\\n -d currency=usd \\\n -d product=prod_Hh99apo1OViyGW \\\n -d \"recurring[interval]\"=month\n```\n\nDepending on the make, model, and age of the printing press, The Pacific charges\ndifferent amounts. This example charges 1,000 USD each month for 6 months, for a\ntotal of 6,000 USD.\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d start_date=now \\\n -d end_behavior=cancel \\\n -d \"phases[0][items][0][price]\"={{PRICE_ID}} \\\n -d \"phases[0][items][0][quantity]\"=1 \\\n -d \"phases[0][iterations]\"=6\n```\n\nThe number of `iterations` is multiplied by the price’s interval—6 monthly\npayments in this example—to determine the number of times the customer is\ncharged. `end_behavior` determines what happens to the subscription after the\nlast iteration is complete. In an installment plan, the subscription isn’t\nneeded anymore so `end_behavior` is set to `cancel`.\n\nIn rare cases, The Pacific charges less than the usual 1,000 USD per month. In\nthese scenarios, they use `price_data` to create a single-use price. This\nexample creates a 500 USD price, and charges monthly for 6 months:\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d start_date=now \\\n -d end_behavior=cancel \\\n -d \"phases[0][items][0][price_data][currency]\"=usd \\\n -d \"phases[0][items][0][price_data][product]\"=prod_Hh99apo1OViyGW \\\n -d \"phases[0][items][0][price_data][recurring][interval]\"=month \\\n -d \"phases[0][items][0][price_data][unit_amount]\"=50000 \\\n -d \"phases[0][items][0][quantity]\"=1 \\\n -d \"phases[0][iterations]\"=6\n```\n\n## Links\n\n- [subscription](https://docs.stripe.com/billing/subscriptions/creating)\n- [Customers](https://docs.stripe.com/api/customers)\n- [https://dashboard.stripe.com/apikeys](https://dashboard.stripe.com/apikeys)\n- [release](https://docs.stripe.com/api/subscription_schedules/release)\n- [Invoice](https://docs.stripe.com/api/invoices)",
  "metadata": {
    "title": "Subscription schedules use cases | Stripe Documentation",
    "description": "Learn how to use subscription schedules.",
    "sourceURL": "https://docs.stripe.com/billing/subscriptions/subscription-schedules/use-cases"
  }
}