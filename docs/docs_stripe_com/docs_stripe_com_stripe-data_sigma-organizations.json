{
  "content": "# Query data across accounts belonging to an organizationPublic preview\n\n## Use Sigma with Organizations to query multiple accounts.\n\nIf you use [Stripe\nOrganizations](https://docs.stripe.com/get-started/account/orgs) to unify your\nbusiness across multiple Stripe accounts, you can run Sigma queries across\nmultiple accounts with Sigma for Organizations. Using Sigma queries allows you\nto gain insights about your customers and payments across your entire business\nin the Dashboard.\n\n## Getting started\n\nBefore you begin, complete the following steps:\n\n- [Create an\norganization](https://docs.stripe.com/get-started/account/orgs/build) and add\nall the accounts you want to include in your queries.\n- Enable Sigma in each account you want to include in your queries.\n- Make sure that youâ€™re assigned a role at the organization-level with\npermissions to view reports (such as\n[Analyst](https://docs.stripe.com/get-started/account/teams/roles)) to run and\nexecute Sigma queries.\n\n## Run Sigma queries across multiple accounts\n\nTo run Sigma queries that span multiple accounts in your organization, follow\nthese steps:\n\n- From the Dashboard, switch into your organization from the account picker,\nthen click [Sigma](https://dashboard.stripe.com/org/sigma/queries).\n- Write a new query, choose from saved queries, or select from the list of\ntemplates.\n- To specify the accounts in scope of your query, click the **Run on accounts**\ndropdown in the top right corner, then click **Edit business accounts**.\n- Run the query across the accounts you selected.\n\n### Return results for each account\n\nBy default, queries return results that include data across all selected\naccounts. To return results for each account, you can group results by\n`merchant_id`. For example, the following query returns the sum of payment\nintents in the last 14 days for each account and currency:\n\n```\nselect\n merchant_id,\n currency,\n sum(amount) as total_payment_volume_last_14d\nfrom payment_intents\nwhere created >= date_add('day', -14, current_date)\ngroup by 1, 2\n```\n\n`merchant_id``currency``total_payment_volume_last_14d`acct_ffGTVwu5ZNBuFgkUSD4934823acct_mRW2Pj50Di0G5BFCAD2235991acct_7bpzAYf5YCFf9b6GBP1870021acct_VVDFrkS41Xkd8IMEU9008212\n### Filter accounts within a query\n\nTo use the `merchant_id` field to filter results to specific accounts directly\nin your query, add a `WHERE merchant_id = 'acct_id'` clause. For example, the\nfollowing query returns the total volume of payments in a specific account:\n\n```\nselect\n currency,\n sum(amount) as total_payment_volume_last_14d\nfrom payment_intents\nwhere created >= date_add('day', -14, current_date)\nAND merchant_id in (\n 'acct_d8upQPPBbFtSIe1',\n 'acct_1fCSEPk3waoDZox'\n)\ngroup by 1\n```\n\n`currency``total_payment_volume_last_14d`USD8833809CAD9008212\n\n## Links\n\n- [Stripe Organizations](https://docs.stripe.com/get-started/account/orgs)\n- [Create an\norganization](https://docs.stripe.com/get-started/account/orgs/build)\n- [Analyst](https://docs.stripe.com/get-started/account/teams/roles)\n- [Sigma](https://dashboard.stripe.com/org/sigma/queries)",
  "metadata": {
    "title": "Query data across accounts belonging to an organization | Stripe Documentation",
    "description": "Use Sigma with Organizations to query multiple accounts.",
    "sourceURL": "https://docs.stripe.com/stripe-data/sigma-organizations"
  }
}