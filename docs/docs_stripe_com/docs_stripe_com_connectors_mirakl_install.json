{
  "content": "# Mirakl Connector installation\n\n## Install and validate the Miraki connector for Stripe.\n\n## Requirements\n\nInstalling and running the application requires the following:\n\n- PHP 7.3+\n- PostgreSQL\n- A web server, Nginx recommended\n- A valid SSL/[TLS](https://docs.stripe.com/security/guide#tls) certificate\n- Supervisord or equivalent\n- Crontab or equivalent\n\n## Install using Docker\n\nYou can build and start the application by embedding it in a container. See our\n[Docker\nsample](https://github.com/stripe/stripe-mirakl-connector/tree/master/examples/docker)\nfor more information.\n\n## Install manually\n\n- Install [Composer](https://getcomposer.org/download/).\n- Clone or download the [Mirakl\nConnector](https://github.com/stripe/stripe-mirakl-connector.git) from GitHub.\n- Move the content to your web server directory, for example, `/var/www`.\n- Download dependencies:\n\n```\ncomposer install --prefer-dist --no-dev\n```\n\n- Make sure you properly configured the [.env\nfile](https://docs.stripe.com/connectors/mirakl/configuration).\n- Run the migrations to set up the database:\n\n```\nbin/console doctrine:migration:migrate --no-interaction\n```\n\nIf you encounter any errors at this stage, check the `DATABASE_URL` variable in\nyour .env file.\n\n- Update your supervisor to automatically start and restart the workers.\n\nA [configuration\nexample](https://github.com/stripe/stripe-mirakl-connector/blob/master/examples/docker/app/config/supervisord.conf)\nis available in our Docker sample. You can skip this step in a development\nenvironment and start the workers manually when needed, for example:\n\n```\nphp bin/console messenger:consume process_transfers --time-limit=3600 --env=prod\n```\n\n- Update your job scheduler to run the commands periodically.\n\nA [configuration\nexample](https://github.com/stripe/stripe-mirakl-connector/blob/master/examples/docker/app/config/crontab)\nis available in our Docker sample. You can skip this step in a development\nenvironment and start the jobs manually when needed, for example:\n\n```\nphp bin/console connector:dispatch:process-transfer -q 2>&1\n```\n\n- Make sure that your web server is configured to use the `public` directory as\ndocument root.\n\n## Check your installation\n\nOpen your terminal and run the following command to confirm that your\napplication is up and running correctly:\n\n```\ncurl -X GET \"https://connector-url/api/mappings\" \\\n -H \"accept: application/json\" \\\n -H \"X-AUTH-TOKEN: $OPERATOR_PASSWORD\"\n```\n\nYou should get a `200` response code along with an empty payload.\n\n## Security\n\nOn your server, *restrict all inbound traffic* to the connector except for the\nfollowing endpoints:\n\n- **/api/public/onboarding/refresh**\n\nStripe redirects the seller to this URL to get a new onboarding link if it\nexpires.\n- **/api/public/webhook/operator**\n\nStripe notifies this endpoint when a payment is updated to map it with a Mirakl\norder within the connector.\n- **/api/public/webhook/sellers**\n\nStripe notifies this endpoint when a Stripe account is updated to synchronize\nthe sellerâ€™s status within the connector.\n\nThese endpoints are safe to expose, they each have an internal protection\nmechanism. Other endpoints are not safe to expose unless protected by a strong\n`OPERATOR_PASSWORD`.\n\n## See also\n\n- [Integration\nsteps](https://docs.stripe.com/connectors/mirakl#integration-steps).\n\n## Links\n\n- [TLS](https://docs.stripe.com/security/guide#tls)\n- [Docker\nsample](https://github.com/stripe/stripe-mirakl-connector/tree/master/examples/docker)\n- [Composer](https://getcomposer.org/download/)\n- [Mirakl Connector](https://github.com/stripe/stripe-mirakl-connector.git)\n- [.env file](https://docs.stripe.com/connectors/mirakl/configuration)\n- [configuration\nexample](https://github.com/stripe/stripe-mirakl-connector/blob/master/examples/docker/app/config/supervisord.conf)\n- [configuration\nexample](https://github.com/stripe/stripe-mirakl-connector/blob/master/examples/docker/app/config/crontab)\n- [Integration\nsteps](https://docs.stripe.com/connectors/mirakl#integration-steps)",
  "metadata": {
    "title": "Mirakl Connector installation | Stripe Documentation",
    "description": "Install and validate the Miraki connector for Stripe.",
    "sourceURL": "https://docs.stripe.com/connectors/mirakl/install"
  }
}