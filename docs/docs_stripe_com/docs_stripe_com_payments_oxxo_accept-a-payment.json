{
  "content": "# Accept an OXXO payment\n\n## Learn how to accept OXXO, a common payment method in Mexico.\n\nWebMobileStripe-hosted pageDirect API\n#### Caution\n\nStripe automatically presents your customers payment method options by\nevaluating their currency, payment method restrictions, and other parameters. We\nrecommend that you configure your payment methods from the Stripe Dashboard\nusing the instructions in [Accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?platform=web&ui=stripe-hosted).\n\nIf you want to continue manually configuring the payment methods you present to\nyour customers with Checkout, use this guide. Otherwise, update your integration\nto [configure payment methods in the\nDashboard](https://docs.stripe.com/payments/dashboard-payment-methods).\n\nOXXO is a [single use](https://docs.stripe.com/payments/payment-methods#usage)\npayment method where customers are required to [take additional\nsteps](https://docs.stripe.com/payments/payment-methods#customer-actions) to\ncomplete their payment. [Customers](https://docs.stripe.com/api/customers) pay\nby providing an OXXO voucher with a generated number and cash payment at an OXXO\nconvenience store.\n\n[Determine\ncompatibility](https://docs.stripe.com/payments/oxxo/accept-a-payment#compatibility)\nA Checkout Session must satisfy all of the following conditions to support OXXO\npayments:\n\n- [Prices](https://docs.stripe.com/api/prices) for all line items must be in the\nsame currency. If you have line items in different currencies, create separate\nCheckout Sessions for each currency.\n- You can only use one-time line items (recurring\n[subscription](https://docs.stripe.com/billing/subscriptions/creating) plans are\nnot supported).\n[Accept a\npayment](https://docs.stripe.com/payments/oxxo/accept-a-payment#accept-a-payment)\n#### Note\n\nBuild an integration to [accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?integration=checkout)\nwith Checkout before using this guide.\n\nUse this guide to learn how to enable OXXO—it shows the differences between\naccepting a card payment and using OXXO.\n\n### Enable OXXO as a payment method\n\nWhen creating a new [Checkout\nSession](https://docs.stripe.com/api/checkout/sessions), you need to:\n\n- Add `oxxo` to the list of `payment_method_types`\n- Make sure all your `line_items` use the `mxn` currency.\n\n```\nStripe::Checkout::Session.create({\n mode: 'payment',\n payment_method_types: ['card'],\n payment_method_types: ['card', 'oxxo'],\n # The parameter is optional. The default value of expires_after_days is 3.\n payment_method_options: {\n oxxo: {\n expires_after_days: 2\n }\n },\n line_items: [{\n price_data: {\n # To accept `oxxo`, all line items must have currency: mxn\n currency: 'mxn',\n product_data: {\n name: 'T-shirt',\n },\n unit_amount: 2000,\n },\n quantity: 1,\n }],\n success_url: 'https://example.com/success',\n cancel_url: 'https://example.com/cancel',\n})\n```\n\n### Additional payment method options\n\nYou can specify an optional `expires_after_days` parameter in the [payment\nmethod\noptions](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_method_options-oxxo-expires_after_days)\nfor your `Session` that sets the number of calendar days before an OXXO voucher\nexpires. For example, if you create an OXXO voucher on Monday and you set\n`expires_after_days` to 2, the OXXO voucher will expire on Wednesday at 23:59\nAmerica/Mexico_City (UTC-6) time. The `expires_after_days` parameter can be set\nfrom 1 to 7 days. The default is 3 days.\n\n### Redirect to Stripe hosted voucher page\n\nAfter submitting the Checkout form successfully, the customer is redirected to\nthe `hosted_voucher_url`. The customer can find the barcode or print the OXXO\nvoucher from the hosted voucher page. You can locate the `hosted_voucher_url` in\n[payment_intent.next_action.oxxo_display_details](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-next_action-oxxo_display_details-hosted_voucher_url).\n\nStripe allows customization of customer-facing UIs on the [Branding\nSettings](https://dashboard.stripe.com/account/branding) page. The following\nbrand settings can be applied to the voucher:\n\n- **Icon**—your brand image and public business name\n- **Accent color**—used as the color of Print button\n- **Brand color**—used as the background color\n\n### Fulfill your orders\n\nBecause OXXO is a delayed notification payment method, you need to use a method\nsuch as [webhooks](https://docs.stripe.com/webhooks) to monitor the payment\nstatus and handle order fulfillment. Learn more about [setting up webhooks and\nfulfilling orders](https://docs.stripe.com/checkout/fulfillment).\n\nThe following events are sent when the payment status changes:\n\nEvent NameDescriptionNext steps\n\n[checkout.session.completed](https://docs.stripe.com/api/events/types#event_types-checkout.session.completed)\n\nThe customer has successfully submitted the Checkout form. Stripe has generated\nthe OXXO voucher.\n\nYou can choose to email the `hosted_voucher_url` to your customer in case they\nlose the OXXO voucher.\n\nWait for the customer to pay the OXXO voucher.\n\n[checkout.session.async_payment_succeeded](https://docs.stripe.com/api/events/types#event_types-checkout.session.async_payment_succeeded)The\ncustomer has successfully paid the OXXO. The `PaymentIntent` transitions to\n`succeeded`.Fulfill the goods or services that the customer\npurchased.[checkout.session.async_payment_failed](https://docs.stripe.com/api/events/types#event_types-checkout.session.async_payment_failed)The\nOXXO voucher has expired, or the payment has failed for some other reason. The\n`PaymentIntent` returns to a status of `requires_payment_method`.Contact the\ncustomer via email and request that they place a new order.[Test your\nintegration](https://docs.stripe.com/payments/oxxo/accept-a-payment#test-integration)\nWhen testing your Checkout integration, select OXXO as the payment method and\nclick the **Pay** button.\n\nEmailDescription\n`{any_prefix}@{any_domain}`\n\nSimulates an OXXO voucher which a customer pays after 3 minutes and the\n`payment_intent.succeeded` webhook arrives after about 3 minutes. In production,\nthis webhook arrives after 1 business day.\n\nExample: fulano@test.com\n\n`{any_prefix}succeed_immediately@{any_domain}`\n\nSimulates an OXXO voucher which a customer pays immediately and the\n`payment_intent.succeeded` webhook arrives within several seconds. In\nproduction, this webhook arrives after 1 business day.\n\nExample: succeed_immediately@test.com\n\n`{any_prefix}expire_immediately@{any_domain}`\n\nSimulates an OXXO voucher which expires before a customer pays and the\n`payment_intent.payment_failed` webhook arrives within several seconds.\n\nThe `expires_after` field in\n[next_action.oxxo_display_details](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-next_action-oxxo_display_details-expires_after)\nis set to the current time regardless of what the `expires_after_days` parameter\nin [payment method\noptions](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-payment_method_options-oxxo-expires_after_days)\nis set to.\n\nExample: expire_immediately@test.com\n\n`{any_prefix}expire_with_delay@{any_domain}`\n\nSimulates an OXXO voucher which expires before a customer pays and the\n`payment_intent.payment_failed` webhook arrives after about 3 minutes.\n\nThe `expires_after` field in\n[next_action.oxxo_display_details](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-next_action-oxxo_display_details-expires_after)\nis set to 3 minutes in the future regardless of what the `expires_after_days`\nparameter in [payment method\noptions](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-payment_method_options-oxxo-expires_after_days)\nis set to.\n\nExample: expire_with_delay@test.com\n\n`{any_prefix}fill_never@{any_domain}`\n\nSimulates an OXXO voucher which expires before a customer pays and the\n`payment_intent.payment_failed` webhook arrives after 1 business day and 2\ncalendar days. In production, this webhook arrives at the same time as in\ntestmode.\n\nExample: fill_never@test.com\n\n[OptionalSend payment instruction\nemails](https://docs.stripe.com/payments/oxxo/accept-a-payment#instruction-emails)\n## See also\n\n- [Checkout fulfillment](https://docs.stripe.com/checkout/fulfillment)\n- [Customizing\nCheckout](https://docs.stripe.com/payments/checkout/customization)\n\n## Links\n\n- [Accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?platform=web&ui=stripe-hosted)\n- [configure payment methods in the\nDashboard](https://docs.stripe.com/payments/dashboard-payment-methods)\n- [single use](https://docs.stripe.com/payments/payment-methods#usage)\n- [take additional\nsteps](https://docs.stripe.com/payments/payment-methods#customer-actions)\n- [Customers](https://docs.stripe.com/api/customers)\n- [Prices](https://docs.stripe.com/api/prices)\n- [subscription](https://docs.stripe.com/billing/subscriptions/creating)\n- [accept a\npayment](https://docs.stripe.com/payments/accept-a-payment?integration=checkout)\n- [Checkout Session](https://docs.stripe.com/api/checkout/sessions)\n- [https://example.com/success](https://example.com/success)\n- [https://example.com/cancel](https://example.com/cancel)\n- [payment method\noptions](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_method_options-oxxo-expires_after_days)\n-\n[payment_intent.next_action.oxxo_display_details](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-next_action-oxxo_display_details-hosted_voucher_url)\n- [Branding Settings](https://dashboard.stripe.com/account/branding)\n- [webhooks](https://docs.stripe.com/webhooks)\n- [setting up webhooks and fulfilling\norders](https://docs.stripe.com/checkout/fulfillment)\n-\n[checkout.session.completed](https://docs.stripe.com/api/events/types#event_types-checkout.session.completed)\n-\n[checkout.session.async_payment_succeeded](https://docs.stripe.com/api/events/types#event_types-checkout.session.async_payment_succeeded)\n-\n[checkout.session.async_payment_failed](https://docs.stripe.com/api/events/types#event_types-checkout.session.async_payment_failed)\n-\n[next_action.oxxo_display_details](https://docs.stripe.com/api/payment_intents/object#payment_intent_object-next_action-oxxo_display_details-expires_after)\n- [payment method\noptions](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-payment_method_options-oxxo-expires_after_days)\n- [Customizing\nCheckout](https://docs.stripe.com/payments/checkout/customization)",
  "metadata": {
    "title": "Accept an OXXO payment | Stripe Documentation",
    "description": "Learn how to accept OXXO, a common payment method in Mexico.",
    "sourceURL": "https://docs.stripe.com/payments/oxxo/accept-a-payment"
  }
}