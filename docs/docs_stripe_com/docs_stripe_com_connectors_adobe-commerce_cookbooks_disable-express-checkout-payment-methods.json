{
  "content": "# Disable specific shipping methods in Express Checkout modals\n\n## Remove specific shipping methods from the Express Checkout modal.\n\nCertain shipping methods, like **Pick up from store**, might require additional\ncustomer input, such as the pickup address. These aren’t suitable for Express\nCheckout wallets, which don’t provide a way to customize the payment modal.\n\nIf you use this kind of shipping method, you can disable it for Express Checkout\nusing a module customization.\n\n## Create a new module\n\nCreate a new module with the following directory structure. Replace `Vendor`\nwith your preferred vendor name.\n\n```\napp/code/Vendor/StripeCustomizations/\n├── etc/\n│ └── module.xml\n├── Plugin/\n│ └── Api/\n│ └── Response/\n│ └── ECEResponse.php\n├── registration.php\n\n```\n\nInside `registration.php`, register your module with Magento.\n\n```\n<?php\n\\Magento\\Framework\\Component\\ComponentRegistrar::register(\n \\Magento\\Framework\\Component\\ComponentRegistrar::MODULE,\n 'Vendor_StripeCustomizations',\n __DIR__\n);\n```\n\nInside `etc/module.xml`, define the module and set up dependencies to ensure it\nloads after the Stripe module.\n\n```\n<?xml version=\"1.0\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:noNamespaceSchemaLocation=\"urn:magento:framework:Module/etc/module.xsd\">\n <module name=\"Vendor_StripeCustomizations\" setup_version=\"1.0.0\">\n <sequence>\n <module name=\"StripeIntegration_Payments\"/>\n </sequence>\n </module>\n</config>\n```\n\nInside `etc/di.xml`, define the following plugin:\n\n```\n<?xml version=\"1.0\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\nxsi:noNamespaceSchemaLocation=\"urn:magento:framework:ObjectManager/etc/config.xsd\">\n <type name=\"StripeIntegration\\Payments\\Model\\Config\">\n <plugin\n name=\"vendor_stripecustomizations_eceresponse_plugin\"\n type=\"Vendor\\StripeCustomizations\\Plugin\\Api\\Response\\ECEResponse\"\n sortOrder=\"10\"\n disabled=\"false\" />\n </type>\n</config>\n```\n\nInside `Plugin/Api/Response/ECEResponse.php`, create the an afterMethod\ninterceptor:\n\n```\n<?php\nnamespace Vendor\\StripeCustomizations\\Plugin\\Payments;\n\nclass ECEResponse\n{\n /**\n * After plugin for getShippingRatesForQuoteShippingAddress method.\n *\n * @param $subject\n * @param array $result\n * @return array\n */\npublic function afterGetShippingRatesForQuoteShippingAddress($subject, array\n$result)\n {\n $idToRemove = \"store_pickup\";\n\nreturn array_filter($result, function ($shippingRate) use ($idToRemove) {\n return $shippingRate['id'] !== $idToRemove;\n });\n }\n}\n```\n\nEnable the module:\n\n```\nphp bin/magento module:enable Vendor_StripeCustomizations\nphp bin/magento setup:upgrade\nphp bin/magento cache:clean\nphp bin/magento cache:flush\n\n```\n\n## Links\n\n-\n[http://www.w3.org/2001/XMLSchema-instance](http://www.w3.org/2001/XMLSchema-instance)",
  "metadata": {
    "title": "Disable specific shipping methods in Express Checkout modals | Stripe Documentation",
    "description": "Remove specific shipping methods from the Express Checkout modal.",
    "sourceURL": "https://docs.stripe.com/connectors/adobe-commerce/cookbooks/disable-express-checkout-payment-methods"
  }
}