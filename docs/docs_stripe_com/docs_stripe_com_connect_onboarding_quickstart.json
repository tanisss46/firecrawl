{
  "content": "connected accounts. We’ve customized the connected account properties based on\nyour choices when onboarding your platform account to Connect. Changes made here\ndon’t update your platform settings and aren’t reflected in the Stripe\nDashboard.\n\nSee [Design an\nintegration](https://docs.stripe.com/connect/design-an-integration) to learn\nmore about making these choices.\n\nServer\n### Choose how your connected accounts onboard to Stripe\n\nYour choice of onboarding method affects the availability of other account\noptions below.\n\nOnboarding:HostedEmbeddedAPI\nRedirect your connected accounts to Stripe-hosted onboarding using an Account\nLink.\n\nServer\n### Choose where your connected accounts manage their payments and account details\n\nDashboard access:StripeExpressNone\nGive your connected accounts access to the Stripe Dashboard.\n\nServer\n### Choose your charge type\n\nCharge type:DirectDestinationSeparate charges and transfers\nCreate charges directly on your connected accounts.\n\nServer\n### Choose who pays fees\n\nWho pays fees:Your connected accountsYour platform\nStripe takes Stripe fees from your connected accounts.\n\nServer\n### Choose who is liable for negative balances\n\nNegative balance liability:StripePlatform\nYour platform isn’t liable for negative account balances. Stripe is responsible\nfor collecting updated information when requirements are due or change.\n\nServer2Set up dependencies\n### Install the Stripe Ruby library\n\nInstall the Stripe Ruby gem and require it in your code. Alternatively, if\nyou’re starting from scratch and need a Gemfile, download the project files\nusing the link in the code editor.\n\nTerminalBundlerGitHub\nInstall the gem:\n\n`gem install stripe -v 9.1.0`Server\n### Set your secret key\n\nAdd your secret key to your server.\n\nServer\n### Set your publishable key\n\nAdd your publishable key to a `.env` file. React automatically loads it into\nyour application as an [environment\nvariable](https://create-react-app.dev/docs/adding-custom-environment-variables/).\n\nClient\n### Add your platform branding\n\nTo use Stripe-hosted onboarding, first go to your [onboarding\nsettings](https://dashboard.stripe.com/settings/connect/onboarding-interface)\nand customize your branding. You need to set a business name, icon, and brand\ncolor.\n\nServer3Create a connected account\n### Add an endpoint for creating a connected account\n\nSet up an endpoint on your server for your client to call to handle creating a\nconnected account.\n\nServer\n### Create a connected account\n\nCreate a connected account by calling the Stripe API. We’ve configured the\nattributes used based on the preferences you’ve selected above. You can prefill\nverification information, the business profile of the user, and other fields on\nthe [account](https://docs.stripe.com/api/accounts/create) if your platform has\nalready collected it.\n\nServer\n### Call the endpoint to create a connected account\n\nCall the endpoint you added above to create a connected account.\n\nClient4Onboard the connected account\n### Overview\n\nPer [your preference\nselection](https://docs.stripe.com/connect/onboarding/quickstart#choose-onboarding-surface),\nyou selected Stripe-hosted onboarding. Your platform redirects your connected\naccounts to a Stripe-hosted, co-branded onboarding interface using an [Account\nLink](https://docs.stripe.com/api/account_links).\n\nServer\n### Create an Account Links endpoint\n\nAdd an endpoint on your server to create an Account Link.\n\nServer\n### Provide a return URL\n\nWhen your connected account completes the onboarding flow, it redirects them to\nthe return URL. That doesn’t mean that all information has been collected or\nthat the connected account has no outstanding requirements. It only means that\nthey entered and exited the flow properly.\n\nServer\n### Provide a refresh URL\n\nStripe redirects your connected account to the refresh URL when the link is\nexpired, the link has already been visited, your platform can’t access the\nconnected account, or the account is rejected. Have the refresh URL create a new\nonboarding Account Link and redirect your user to it.\n\nServer\n### Call the endpoint to create an Account link\n\nProvide the connected account ID.\n\nClient\n### Redirect the user to the URL\n\nSend the user to Stripe to complete onboarding. They’re redirected back to your\napp when onboarding is complete.\n\nClient\n### Handle the connected account returning\n\nShow the connected account a useful page when they exit the Stripe-hosted\nonboarding flow.\n\nClient\n### Handle the Account Link refreshing\n\nCall your endpoint for refreshing the Account Link at the refresh URL.\n\nClient5Next steps\n### Accept payments\n\nNow that you have onboarded a connected account, continue to [create direct\ncharges](https://docs.stripe.com/connect/direct-charges).\n\nServerWas this page\nhelpful?server.rbApp.jsx.envRefresh.jsxReturn.jsxHome.jsxDownload\n```\nrequire 'sinatra'require 'stripe'\n# This is a placeholder - it should be replaced with your secret API key.# Sign in to see your own test API key embedded in code samples.# Don’t submit any personally identifiable information in requests made with this key.Stripe.api_key = 'sk_INSERT_YOUR_SECRET_KEY'\nStripe.api_version = '2023-10-16'\nset :static, trueset :port, 4242set :public_folder, 'dist'\npost '/account_link' do content_type 'application/json'\n body = JSON.parse(request.body.read) connected_account_id = body[\"account\"]\nbegin account_link = Stripe::AccountLink.create({ account: connected_account_id,\nreturn_url: \"http://localhost:4242/return/#{connected_account_id}\", refresh_url:\n\"http://localhost:4242/refresh/#{connected_account_id}\", type:\n\"account_onboarding\", })\n{ url: account_link.url }.to_json rescue => error puts \"An error occurred when\ncalling the Stripe API to create an account link: #{error.message}\"; return\n[500, { error: error.message }.to_json] endend\npost '/account' do content_type 'application/json'\n begin account = Stripe::Account.create\n{ account: account[:id] }.to_json rescue => error puts \"An error occurred when\ncalling the Stripe API to create an account: #{error.message}\"; return [500, {\nerror: error.message }.to_json] endend\nget '/*path' do send_file File.join(settings.public_folder, 'index.html')end\n```\n\n## Links\n\n- [text version of this\nguide](https://docs.stripe.com/payments/accept-a-payment)\n- [View the text-based\nguide](https://docs.stripe.com/connect/design-an-integration)\n- [no-code options](https://docs.stripe.com/no-code)\n- [our partners](https://stripe.partners)\n- [environment\nvariable](https://create-react-app.dev/docs/adding-custom-environment-variables/)\n- [onboarding\nsettings](https://dashboard.stripe.com/settings/connect/onboarding-interface)\n- [account](https://docs.stripe.com/api/accounts/create)\n- [Account Link](https://docs.stripe.com/api/account_links)\n- [create direct charges](https://docs.stripe.com/connect/direct-charges)",
  "metadata": {
    "title": "Build a Connect integration | Stripe Documentation",
    "description": "",
    "sourceURL": "https://docs.stripe.com/connect/onboarding/quickstart"
  }
}