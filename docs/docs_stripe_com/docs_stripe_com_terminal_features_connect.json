{
  "content": "# Use Terminal with Connect\n\n## Integrate Stripe Terminal with your Connect platform.\n\nStripe Terminal is fully compatible with\n[Connect](https://docs.stripe.com/connect), enabling your platform or\nmarketplace to accept in-person payments.\n\nThe way Terminal creates API objects depends on whether you use [direct\ncharges](https://docs.stripe.com/connect/direct-charges) or [destination\ncharges](https://docs.stripe.com/connect/destination-charges). If you use direct\ncharges, all payment-related Terminal API objects belong to connected accounts\nwhile readers might belong to either the connected account or the platform. If\nyou use destination charges, all Terminal API objects are created on your\nplatform account. In both cases, use\n[Locations](https://docs.stripe.com/api/terminal/locations) to group readers as\nyou see fit.\n\n#### Note\n\nTerminal Connect Accounts must have the `card_payments` capability to perform\ntransactions.\n\n## Direct charges\n\n### Connected accounts own readers\n\nWith this integration, all API resources belong to the connected account rather\nthan the platform. The connected account is responsible for the cost of Stripe\nfees, refunds, and chargebacks.\n\nIn the Dashboard, you can view your Terminal data by logging in as the connected\naccount.\n\n#### Create locations and readers Server-side\n\nCreate Terminal API objects like\n[Locations](https://docs.stripe.com/api/terminal/locations) and\n[Readers](https://docs.stripe.com/api/terminal/readers) that belong to the same\nconnected account which owns the payment.\n\nTo [create a\nLocation](https://docs.stripe.com/terminal/fleet/locations-and-zones?dashboard-or-api=dashboard#create-locations-and-zones)\nbelonging to a connected account, use the `Stripe-Account` header.\n\n```\ncurl https://api.stripe.com/v1/terminal/locations \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d display_name=HQ \\\n -d \"address[line1]\"=\"1272 Valencia Street\" \\\n -d \"address[city]\"=\"San Francisco\" \\\n -d \"address[state]\"=CA \\\n -d \"address[country]\"=US \\\n -d \"address[postal_code]\"=94110\n```\n\nBefore you can connect your application to a [smart\nreader](https://docs.stripe.com/terminal/payments/connect-reader?reader-type=internet),\nyou must register the reader to a Stripe account. To register a reader to a\nconnected account, use the `Stripe-Account` header.\n\n```\ncurl https://api.stripe.com/v1/terminal/readers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d registration_code={{READER_REGISTRATION_CODE}} \\\n --data-urlencode label=\"Alice's reader\" \\\n -d location={{LOCATION_ID}}\n```\n\n#### Create connection tokens Server-side\n\n#### Note\n\nWhen using [Connect OAuth](https://docs.stripe.com/connect/oauth-reference)\nauthentication, the connected account needs to be authorized for live mode and\ntest mode separately, using the respective application Client ID for each mode.\n\nWhen creating a\n[ConnectionToken](https://docs.stripe.com/api/terminal/connection_tokens) for\nthe Terminal SDK, set the `Stripe-Account` header to the connected account\naccepting payments. You can also provide a `location` parameter to control\naccess to readers. If you provide a location, the `ConnectionToken` is only\nusable with readers assigned to that location. If you don’t provide a location,\nthe `ConnectionToken` is usable with all readers.\n\n```\ncurl https://api.stripe.com/v1/terminal/connection_tokens \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d location={{LOCATION_ID}}\n```\n\n#### Create PaymentIntents Client-side Server-side\n\nWith the iOS, Android, and React Native SDKs, you can create a `PaymentIntent`\non the client or server. The JavaScript SDK only supports server-side creation.\n\n##### Client-side\n\nWhen creating a `PaymentIntent` client-side for direct charges, you don’t need\nto specify any additional parameters for the `PaymentIntent`. Instead, when\ncreating a `ConnectionToken`, set the `Stripe-Account` header to the connected\naccount accepting payments. The client SDKs create the `PaymentIntent` on the\nsame connected account the `ConnectionToken` belongs to. For more information,\nsee [Create PaymentIntents\nClient-side](https://docs.stripe.com/terminal/payments/collect-card-payment#create-client-side).\n\n##### Server-side\n\nThe JavaScript SDK requires you to create the `PaymentIntent` on your server.\nFor the other client SDKs, you might want to create the `PaymentIntent` on your\nserver if the information required to start a payment isn’t readily available in\nyour app. For more information, see [Create PaymentIntents\nServer-side](https://docs.stripe.com/terminal/payments/collect-card-payment?terminal-sdk-platform=js#create-payment).\n\nWhen creating a `PaymentIntent` server-side for direct charges, set the\n`Stripe-Account` header to the connected account.\n\n```\ncurl https://api.stripe.com/v1/payment_intents \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d amount=1000 \\\n -d currency=usd \\\n -d \"payment_method_types[]\"=card_present \\\n -d capture_method=manual\n```\n\n### Platform owns readers\n\n#### Note\n\n[Contact us](mailto:stripe-terminal-betas@stripe.com) if you’re interested in\nletting the platform own and manage readers with direct charges. This private\npreview feature is currently available for [smart\nreaders](https://docs.stripe.com/terminal/smart-readers) leveraging a\n[server-driven\nintegration](https://docs.stripe.com/terminal/payments/setup-integration?terminal-sdk-platform=server-driven).\nThis integration works only with connected accounts that you control through a\nsingle platform.\n\nWith this integration, device management resources like\n[Locations](https://docs.stripe.com/api/terminal/locations) and\n[Readers](https://docs.stripe.com/api/terminal/readers) belong to the platform\naccount while payment resources like\n[PaymentIntents](https://docs.stripe.com/api/payment_intents) belong to the\nconnected account. This allows a single reader managed by the platform to\nprocess payments for multiple different connected accounts. The connected\naccount is responsible for the cost of Stripe fees, refunds, and chargebacks.\n\nIn the Dashboard, you can view your Terminal device management data directly\nwhen logged into your platform account. You can view payment data by logging in\nas the connected account.\n\n#### Create locations and readers\n\nThe best way to group Reader objects by connected account is by assigning them\nto `Locations`. On your platform account, [create a\nLocation](https://docs.stripe.com/terminal/fleet/locations-and-zones?dashboard-or-api=dashboard#create-locations-and-zones)\nfor a connected account using a display name that identifies the account.\n\n```\ncurl https://api.stripe.com/v1/terminal/locations \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d display_name=HQ \\\n -d \"address[line1]\"=\"1272 Valencia Street\" \\\n -d \"address[city]\"=\"San Francisco\" \\\n -d \"address[state]\"=CA \\\n -d \"address[country]\"=US \\\n -d \"address[postal_code]\"=94110\n```\n\nBefore you can connect your application to a [smart\nreader](https://docs.stripe.com/terminal/payments/connect-reader?reader-type=internet),\nyou must register the reader to your platform account.\n\n```\ncurl https://api.stripe.com/v1/terminal/readers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d registration_code={{READER_REGISTRATION_CODE}} \\\n --data-urlencode label=\"Alice's reader\" \\\n -d location={{LOCATION_ID}}\n```\n\n#### Create PaymentIntents\n\nWhen creating a `PaymentIntent` for direct charges, set the `Stripe-Account`\nheader to the connected account.\n\n#### Note\n\nThe platform can only process PaymentIntents later if you create them for\nconnected accounts that you control through a single platform.\n\n```\ncurl https://api.stripe.com/v1/payment_intents \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d amount=1000 \\\n -d currency=usd \\\n -d \"payment_method_types[]\"=card_present \\\n -d capture_method=manual\n```\n\n#### Process PaymentIntents\n\nThe platform can process the connected account’s `PaymentIntent` with the\nplatform-owned reader.\n\n#### Note\n\nThe PaymentIntent can only be processed if you create it using the\n`Stripe-Account` header.\n\n```\ncurl\nhttps://api.stripe.com/v1/terminal/readers/{{READER_ID}}/process_payment_intent\n\\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d payment_intent={{PAYMENT_INTENT_ID}}\n```\n\n## Destination charges\n\nWhen using [destination\ncharges](https://docs.stripe.com/connect/destination-charges), API resources\nlike [PaymentIntents](https://docs.stripe.com/api/payment_intents) and\n[Locations](https://docs.stripe.com/api/terminal/locations) belong to your\nplatform account. Each payment creates a transfer to a connected account\nautomatically.\n\nIn the Dashboard, you can view your Terminal data directly when logged into your\nplatform account.\n\n### Create locations and readers Server-side\n\nThe best way to group Reader objects by connected account is by assigning them\nto `Locations`. On your platform account, [create a\nLocation](https://docs.stripe.com/terminal/fleet/locations-and-zones?dashboard-or-api=dashboard#create-locations-and-zones)\nfor a connected account using a display name that identifies the account.\n\n```\ncurl https://api.stripe.com/v1/terminal/locations \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d display_name=HQ \\\n -d \"address[line1]\"=\"1272 Valencia Street\" \\\n -d \"address[city]\"=\"San Francisco\" \\\n -d \"address[state]\"=CA \\\n -d \"address[country]\"=US \\\n -d \"address[postal_code]\"=94110\n```\n\nBefore you can connect your application to a [smart\nreader](https://docs.stripe.com/terminal/payments/connect-reader?reader-type=internet),\nyou must register the reader to your platform account.\n\n```\ncurl https://api.stripe.com/v1/terminal/readers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d registration_code={{READER_REGISTRATION_CODE}} \\\n --data-urlencode label=\"Alice's reader\" \\\n -d location={{LOCATION_ID}}\n```\n\n### Create connection tokens Server-side\n\nWhen creating a `ConnectionToken` for the Terminal SDK, use your platform\naccount’s secret key. Don’t set the `Stripe-Account` header. Provide a\n`location` parameter to control access to readers. If you provide a location,\nthe `ConnectionToken` is only usable with readers assigned to that location. If\nyou don’t provide a location, the `ConnectionToken` is usable with all readers.\n\n```\ncurl https://api.stripe.com/v1/terminal/connection_tokens \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d location={{LOCATION_ID}}\n```\n\n### Create PaymentIntents Client-side Server-side\n\nWhen creating a `PaymentIntent` using destination charges, provide the\n[on_behalf_of](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-on_behalf_of)\nand\n[transfer_data[destination]](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-transfer_data-destination),\nand\n[application_fee_amount](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-application_fee_amount)\nparameters.\n\nThe `on_behalf_of` parameter is the ID of the connected account that becomes the\nsettlement merchant for the payment. For Terminal transactions, this parameter\n**must** be set in cases where the platform country isn’t the same as the\nConnect account country. When `on_behalf_of` is set, Stripe automatically:\n\n- Settles charges in the country of the specified account, thereby minimizing\ndeclines and avoiding currency conversions.\n- Uses the fee structure for the connected account’s country.\n- Lists the connected account’s address and phone number on the customer’s\ncredit card statement, as opposed to the platform’s address and phone number\n(only occurs if the account and platform are in different countries).\n\nFor `transfer_data[destination]`, set the ID of the connected account that\nreceives the transfer.\n\nFinally, you can withhold an application fee for your platform by providing the\n[application_fee_amount](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-application_fee_amount)\nparameter.\n\n#### Client-side\n\nWith the iOS, Android, and React Native SDKs, you can create a `PaymentIntent`\nclient-side and provide the `onBehalfOf`, `transferDataDestination`, and\n`applicationFeeAmount` parameters.\n\nJavaScriptiOSAndroidReact Native\n#### Note\n\nClient-side `PaymentIntent` creation is possible with the other SDKs. If you’re\nusing the JavaScript SDK for Stripe Terminal, create a `PaymentIntent`\nserver-side.\n\n#### Server-side\n\nThe JavaScript SDK requires you to create the `PaymentIntent` on your server.\nFor the other client SDKs, you want to create the `PaymentIntent` on your server\nif the information required to start a payment isn’t readily available in your\napp. For more information, see [Create PaymentIntents\nServer-side](https://docs.stripe.com/terminal/payments/collect-card-payment?terminal-sdk-platform=js#create-payment).\n\n```\ncurl https://api.stripe.com/v1/payment_intents \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d amount=1000 \\\n -d currency=usd \\\n -d \"payment_method_types[]\"=card_present \\\n -d capture_method=manual \\\n -d application_fee_amount=200 \\\n -d on_behalf_of={{CONNECTED_ACCOUNT_ID}} \\\n -d \"transfer_data[destination]\"={{CONNECTED_ACCOUNT_ID}}\n```\n\n## See also\n\n- [Cart display](https://docs.stripe.com/terminal/features/display)\n- [Receipts](https://docs.stripe.com/terminal/features/receipts)\n\n## Links\n\n- [Connect](https://docs.stripe.com/connect)\n- [direct charges](https://docs.stripe.com/connect/direct-charges)\n- [destination charges](https://docs.stripe.com/connect/destination-charges)\n- [Locations](https://docs.stripe.com/api/terminal/locations)\n- [Readers](https://docs.stripe.com/api/terminal/readers)\n- [create a\nLocation](https://docs.stripe.com/terminal/fleet/locations-and-zones?dashboard-or-api=dashboard#create-locations-and-zones)\n- [smart\nreader](https://docs.stripe.com/terminal/payments/connect-reader?reader-type=internet)\n- [Connect OAuth](https://docs.stripe.com/connect/oauth-reference)\n- [ConnectionToken](https://docs.stripe.com/api/terminal/connection_tokens)\n- [Create PaymentIntents\nClient-side](https://docs.stripe.com/terminal/payments/collect-card-payment#create-client-side)\n- [Create PaymentIntents\nServer-side](https://docs.stripe.com/terminal/payments/collect-card-payment?terminal-sdk-platform=js#create-payment)\n- [smart readers](https://docs.stripe.com/terminal/smart-readers)\n- [server-driven\nintegration](https://docs.stripe.com/terminal/payments/setup-integration?terminal-sdk-platform=server-driven)\n- [PaymentIntents](https://docs.stripe.com/api/payment_intents)\n-\n[on_behalf_of](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-on_behalf_of)\n-\n[transfer_data[destination]](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-transfer_data-destination)\n-\n[application_fee_amount](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-application_fee_amount)\n- [Cart display](https://docs.stripe.com/terminal/features/display)\n- [Receipts](https://docs.stripe.com/terminal/features/receipts)",
  "metadata": {
    "title": "Use Terminal with Connect | Stripe Documentation",
    "description": "Integrate Stripe Terminal with your Connect platform.",
    "sourceURL": "https://docs.stripe.com/terminal/features/connect"
  }
}