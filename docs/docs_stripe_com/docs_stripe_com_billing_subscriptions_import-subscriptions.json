{
  "content": "# Migrate subscriptions to Stripe Billing using Stripe APIs\n\n## Learn how to migrate your existing subscriptions to Stripe using Stripe APIs.\n\nLearn how to migrate your existing\n[subscriptions](https://docs.stripe.com/billing/subscriptions/creating) from a\nthird-party, an in-house system, or an existing Stripe account to Stripe Billing\nusing Stripe APIs.\n\n## Before you begin\n\n- If you haven’t already, review the [migration\nstages](https://docs.stripe.com/billing/subscriptions/migrate-subscriptions).\n- [Set up a Stripe Billing\nintegration](https://docs.stripe.com/billing/subscriptions/build-subscriptions).\nThis prerequisite is only required once before importing subscriptions to\nStripe, and you don’t need to repeat it for future migrations.\n- [Request a PAN data\nimport](https://docs.stripe.com/get-started/data-migrations/pan-import) from\nyour current processor. If you’re attempting a Stripe-to-Stripe migration, this\nprerequisite isn’t necessary because you’re already using Stripe for payment\nprocessing.\n[Manage legacy products and\nprices](https://docs.stripe.com/billing/subscriptions/import-subscriptions#legacy-prices)\nIf you have legacy [pricing\nmodel](https://docs.stripe.com/products-prices/pricing-models)s that you need to\ncontinue supporting in Stripe, create a placeholder product, such as `Legacy\nplan`. Here’s an example:\n\n```\ncurl https://api.stripe.com/v1/products \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d id={{NEW_PRODUCT_ID}} \\\n -d name=\"Legacy plan\" \\\n -d description=\"Imported legacy plan from source system\" \\\n -d \"metadata[OLD_PRODUCT_ID]\"={{OLD_PRODUCT_ID}}\n```\n\nWhen you need to update subscriptions with legacy plans, pass in the prices as\nneeded using `items.price_data`. This overrides any existing legacy price. To\nlearn more, see [variable\npricing](https://docs.stripe.com/products-prices/pricing-models#variable-pricing).\n\n```\ncurl https://api.stripe.com/v1/subscriptions \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d \"items[0][price_data][currency]\"=USD \\\n -d \"items[0][price_data][product]\"={{PRODUCT_ID}} \\\n -d \"items[0][price_data][recurring][interval]\"=month \\\n -d \"items[0][price_data][recurring][interval_count]\"=3 \\\n -d \"items[0][price_data][unit_amount]\"=1000 \\\n -d \"items[0][quantity]\"=1\n```\n\n[Import your\nsubscriptions](https://docs.stripe.com/billing/subscriptions/import-subscriptions#import-subscriptions)\nAfter you import your customers and create a pricing model, you can start\nimporting your subscriptions. You should be able to export subscription data\nfrom third-party systems through their UI or API. Contact your subscriptions\nprocessor if they don’t provide this option through either interface.\n\nTo import subscriptions, use your list of customers to create the appropriate\nsubscription for each one. For example, if a subscriber has a monthly `Basic`\nsubscription plan in your old model, use the monthly recurring price associated\nwith that level when you create their subscription in Stripe.\n\n### Make source data Stripe-compatible\n\nBefore you start importing subscriptions into Stripe, make sure that all of your\nsource data is compatible with our expected format.\n\n#### Important fields for migrating subscriptions\n\nIf you use relevant subscription data in your custom integration that Stripe\ndoesn’t also use, you can apply your data to the `metadata` field of the\nsubscriptions you create in Stripe. The following table describes other\nimportant fields to consider when importing subscriptions.\n\nFieldDescription[customer](https://docs.stripe.com/api/subscription_schedules/object#subscription_schedule_object-customer)Make\nsure that you’ve properly mapped the customer ID from your source data to the\nnew customer ID in\nStripe.[phases.items.price](https://docs.stripe.com/api/subscription_schedules/object#subscription_schedule_object-phases-items-price)Make\nsure that you’ve mapped the price ID from your source data to the new price ID\nin\nStripe.[current_phase.start_date](https://docs.stripe.com/api/subscription_schedules/object#subscription_schedule_object-current_phase-start_date)Make\nsure that the subscription schedule you define in Stripe lines up with and\nmaintains continuity from your original source data. For example, if a customer\nhas 6 months left on a yearly subscription in your source system, make sure that\n`billing_cycle_anchor` and `start_date` reflect the correct mid-cycle\nterm.Third-party metadataImport any additional data fields from your source\ndata, which might include product names, plan names, and third-party application\nIDs.Tax settingsInclude any tax IDs, VAT IDs, or other tax information.\n#### Prepare legacy prices\n\nIf you created placeholders for [legacy\nprices](https://docs.stripe.com/billing/subscriptions/import-subscriptions#legacy-prices),\nyou need to map those prices to the subscriptions and customers you’re\nimporting. For each subscription with a legacy price, use the\n[price_data](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data)\nparameter of the\n[Subscriptions](https://docs.stripe.com/api/subscriptions#subscriptions) API to\npass in information about the price and subscription. The required fields are:\n\nParameterDescription[currency](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-currency)Currency\nof the price, in three-letter ISO\nformat.[product](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-product)ID\nof the placeholder product. You can use this for all of the legacy\nprices.[recurring](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-recurring)Information\nabout the amount and frequency of the recurring\nprice.[recurring.interval](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-recurring)Frequency\nof the interval-`day`, `week`, `month`, or\n`year`.[recurring.interval_count](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-recurring-interval_count)Number\nof intervals between billings. For example, setting `interval=day` and\n`interval_count=30` means that you bill the customer every 30 days. The maximum\ninterval is 1 year (1 year, 12 months, or 52\nweeks).[recurring.unit_amount_decimal](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-unit_amount_decimal)Same\nas\n[unit_amount](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-unit_amount),\nbut allows you to specify more granular decimal amounts in cents, up to 12\ndecimals. You can only set one of `unit_amount` and `unit_amount_decimal`.\n### Import subscription data into Stripe\n\nAfter you’ve prepared your source data, you can start importing subscriptions\ninto Stripe.\n\n#### Test mode\n\nUse [test mode](https://docs.stripe.com/test-mode) to run through the pricing\nmodel import process at least once before running the import in live mode. You\nneed to remap your script:\n\n- If you wipe the data in test mode and rerun the import.\n- When you move to live mode, because the price IDs are different in test mode\nand live mode.\n\nIn test mode, you can use [test\nclocks](https://docs.stripe.com/billing/testing/test-clocks) to simulate\nsubscriptions advancing through time. This allows you to see how the migrated\nsubscriptions work in production.\n\n#### Create subscriptions\n\nWhile you can use the [Subscription](https://docs.stripe.com/api/subscriptions)\nAPI to create subscriptions, we recommend using the [Subscription\nSchedules](https://docs.stripe.com/api/subscription_schedules) API. With this\nAPI, you can schedule subscriptions to start in the future. For example, it’s\nthe only way to start monthly subscriptions more than 30 days in advance. The\nability to start subscriptions in the future also allows you to review the\nimport before you start to bill your customers in production.\n\nAdditionally, the Subscription Schedules API provides `phases`, which provide\nmuch more flexibility in defining settings such as tax behavior, collection\nmethod, and coupon usage within more granular intervals. You can also define\ndifferent behavior for different intervals. For example, you could apply a\ncoupon only for the first 3 months of a yearly subscription.\n\nHere’s how to create subscriptions that start on June 1, 2022 at 12:00 AM UTC.\n\n```\ncurl https://api.stripe.com/v1/subscription_schedules \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d \"default_settings[billing_cycle_anchor]\"=phase_start \\\n -d \"phases[0][items][0][price]\"={{PRICE_ID}} \\\n -d start_date=1654066801\n```\n\n[Confirm your\nmigration](https://docs.stripe.com/billing/subscriptions/import-subscriptions#confirm-migration)\nAfter you’ve imported your subscriptions, use the API to confirm that the\nsubscriptions exist in Stripe.\n\nUse the [list Subscriptions](https://docs.stripe.com/api/subscriptions/list) API\nto view all of the Subscriptions in Stripe. You can pass the\n[created](https://docs.stripe.com/api/subscriptions/list#list_subscriptions-created)\nparameter to filter for recently created Subscriptions.\n\n```\ncurl -G https://api.stripe.com/v1/subscriptions \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d \"created[gt]\"=1647294709\n```\n\n## See also\n\n- [Subscriptions schedules](https://docs.stripe.com/api/subscription_schedules)\n\n## Links\n\n- [subscriptions](https://docs.stripe.com/billing/subscriptions/creating)\n- [migration\nstages](https://docs.stripe.com/billing/subscriptions/migrate-subscriptions)\n- [Set up a Stripe Billing\nintegration](https://docs.stripe.com/billing/subscriptions/build-subscriptions)\n- [Request a PAN data\nimport](https://docs.stripe.com/get-started/data-migrations/pan-import)\n- [pricing model](https://docs.stripe.com/products-prices/pricing-models)\n- [variable\npricing](https://docs.stripe.com/products-prices/pricing-models#variable-pricing)\n-\n[customer](https://docs.stripe.com/api/subscription_schedules/object#subscription_schedule_object-customer)\n-\n[phases.items.price](https://docs.stripe.com/api/subscription_schedules/object#subscription_schedule_object-phases-items-price)\n-\n[current_phase.start_date](https://docs.stripe.com/api/subscription_schedules/object#subscription_schedule_object-current_phase-start_date)\n-\n[price_data](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data)\n- [Subscriptions](https://docs.stripe.com/api/subscriptions#subscriptions)\n-\n[currency](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-currency)\n-\n[product](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-product)\n-\n[recurring](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-recurring)\n-\n[recurring.interval_count](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-recurring-interval_count)\n-\n[recurring.unit_amount_decimal](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-unit_amount_decimal)\n-\n[unit_amount](https://docs.stripe.com/api/subscriptions/create#create_subscription-items-price_data-unit_amount)\n- [test mode](https://docs.stripe.com/test-mode)\n- [test clocks](https://docs.stripe.com/billing/testing/test-clocks)\n- [Subscription](https://docs.stripe.com/api/subscriptions)\n- [Subscription Schedules](https://docs.stripe.com/api/subscription_schedules)\n- [list Subscriptions](https://docs.stripe.com/api/subscriptions/list)\n-\n[created](https://docs.stripe.com/api/subscriptions/list#list_subscriptions-created)",
  "metadata": {
    "title": "Migrate subscriptions to Stripe Billing using Stripe APIs | Stripe Documentation",
    "description": "Learn how to migrate your existing subscriptions to Stripe using Stripe APIs.",
    "sourceURL": "https://docs.stripe.com/billing/subscriptions/import-subscriptions"
  }
}