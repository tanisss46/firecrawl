{
  "content": "# File upload guide\n\n## Use the File Upload API to securely send dispute evidence, identification documents, and more to Stripe.\n\nWhen you upload a file to Stripe using the API, a file token and other\ninformation about the file is returned. The token can then be used in other API\ncalls. This guide provides a detailed walk-through of this process.\n\n## Uploading a file\n\nTo upload a file, send a `multipart/form-data` request to\n**https://files.stripe.com/v1/files**. Note that the subdomain\n**files.stripe.com** is different than most of Stripe’s API endpoints. The\nrequest should specify a `purpose` and a `file`. The following example uploads a\nfile located at **/path/to/a/file.jpg** on your local file system with the\npurpose `dispute_evidence`:\n\n```\ncurl https://files.stripe.com/v1/files \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -F \"file\"=\"@/path/to/a/file.jpg\" \\\n -F \"purpose\"=\"dispute_evidence\"\n```\n\nThe following example uploads a file using our Android SDK with the purpose\n`dispute_evidence`:\n\n```\nclass CheckoutActivity : AppCompatActivity() {\n private val stripe: Stripe by lazy {\n Stripe(this, \"pk_test_TYooMQauvdEDq54NiTphI7jx\")\n }\n\n private fun uploadFile(file: File) {\n stripe.createFile(\n StripeFileParams(\n file,\n StripeFilePurpose.DisputeEvidence\n ),\n callback = object : ApiResultCallback<StripeFile> {\n override fun onSuccess(result: StripeFile) {\n // File upload succeeded\n }\n\n override fun onError(e: Exception) {\n // File upload failed\n }\n\n }\n )\n }\n}\n```\n\nThere are [several valid\npurpose](https://docs.stripe.com/api#create_file-purpose) values, each with file\nformat and size requirements.\n\nPurposeDescriptionSupported mimetypesMax\nsizeExpiryDownloadable`account_requirement`Additional documentation requirements\nthat can be requested for an account.PDFJPEGPNG16MBNEVERfalse`business_icon`A\nbusiness icon.JPEGPNGGIF512KBNEVERtrue`business_logo`A business\nlogo.JPEGPNGGIF512KBNEVERtrue`customer_signature`Customer signature\nimage.JPEGPNGSVG4MB7 daystrue`dispute_evidence`Evidence to submit with a dispute\nresponse.PDFJPEGPNG5MB9 monthstrue`identity_document`A document to verify the\nidentity of an account owner during account\nprovisioning.PDFJPEGPNG16MBNEVERfalse`issuing_regulatory_reporting`Additional\nregulatory reporting requirements for Issuing.JSON256KB2\nyearstrue`pci_document`A self-assessment PCI\nquestionnaire.PDF16MBNEVERtrue`tax_document_user_upload`A user-uploaded tax\ndocument.PDFCSVJPEGPNGXLSXDOCX16MBNEVERtrue`additional_verification`Additional\nverification for custom\naccounts.PDFJPEGPNG16MBNEVERfalse`terminal_reader_splashscreen`Splashscreen to\nbe displayed on Terminal readers.PNGJPEGGIF4.194304MB1 yeartrue\n#### Caution\n\n`identity_document` images also need to be smaller than 8,000px by 8,000px.\n\nThe MIME type of the file you wish to upload must correspond to its file format.\n\nFile formatMIME\ntypeAPKapplication/vnd.android.package-archiveCSVtext/csvDOCXapplication/vnd.openxmlformats-officedocument.wordprocessingml.documentGIFimage/gifHTMLtext/htmlJPEGimage/jpegJSONapplication/jsonJSONLapplication/jsonlMARKDOWNtext/markdownPDFapplication/pdfPEMapplication/x-pem-filePNGimage/pngSVGimage/svg+xmlTIFFimage/tiffTSVtext/tab-separated-valuesTXTtext/plainWEBPimage/webpXLSapplication/vnd.ms-excelXLSMapplication/vnd.ms-excel.sheet.macroEnabled.12XLSXapplication/vnd.openxmlformats-officedocument.spreadsheetml.sheetXMLapplication/xmlZIPapplication/zip\n#### Caution\n\nAny Microsoft Office documents containing VBA macros will be rejected due to\nsecurity concerns.\n\nA successful request returns a [file](https://docs.stripe.com/api/files/object)\nobject.\n\n## Retrieving a File API resource\n\nTo retrieve the API resource for a File, make a GET request to the **/v1/files**\nendpoint of the **files.stripe.com** subdomain providing the file upload ID:\n\n```\ncurl https://files.stripe.com/v1/files/{{FILE_ID}} \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2\n```\n\nWhen using restricted API keys, you must receive prior access to the `Files`\nresource.\n\n## Downloading File Contents\n\nIf the file purpose allows downloading the file contents, then the\n[file](https://docs.stripe.com/api/files/object) includes a non-null `url` field\nindicating how to access the contents. This url requires authentication with\nyour Stripe API keys.\n\n```\ncurl https://files.stripe.com/v1/files/{{FILE_ID}}/contents\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2\n```\n\nIf you want unauthenticated access to a file whose purpose allows downloading,\nthen you can produce anonymous download links by creating a\n[file_link](https://docs.stripe.com/api#file_links).\n\n```\ncurl https://api.stripe.com/v1/file_links \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2\n -d file={{FILE_ID}}\n```\n\nThe file_link resource has a `url` field that will allow unauthenticated access\nto the contents of the file.\n\n## Using a file\n\nAfter a file is uploaded, the file upload ID can be used in other API requests.\nFor example, to attach an uploaded file to a particular dispute as evidence:\n\n```\ncurl https://api.stripe.com/v1/disputes/{{DISPUTE_ID}}\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2\n -d \"evidence[receipt]\"={{FILE_ID}}\n```\n\nNote that you can only use an uploaded file in a single API request.\n\n## Handling Upload Errors\n\nWhen you use the File API to upload a PDF document, we run it through a series\nof checks to validate that it is correctly formatted and meets PDF\nspecifications. We return an error for uploads that fail any of our checks.\n\nTry the following to fix errors that we detect:\n\n- Remove annotations or additional media you added to the document.\n- If you cannot remove your annotations or media, or if you combined several\nPDFs into one, try using your computer’s Print to PDF function to create a fresh\ndocument.- [Print to PDF with\nmacOS](https://support.apple.com/guide/mac-help/save-a-document-as-a-pdf-on-mac-mchlp1531/mac)\n- [Print to PDF with Adobe\nAcrobat](https://helpx.adobe.com/acrobat/using/print-to-pdf.html)\n\n## Links\n\n- [several valid purpose](https://docs.stripe.com/api#create_file-purpose)\n- [file](https://docs.stripe.com/api/files/object)\n- [file_link](https://docs.stripe.com/api#file_links)\n- [Print to PDF with\nmacOS](https://support.apple.com/guide/mac-help/save-a-document-as-a-pdf-on-mac-mchlp1531/mac)\n- [Print to PDF with Adobe\nAcrobat](https://helpx.adobe.com/acrobat/using/print-to-pdf.html)",
  "metadata": {
    "title": "File upload guide | Stripe Documentation",
    "description": "Use the File Upload API to securely send dispute evidence, identification documents, and more to Stripe.",
    "sourceURL": "https://docs.stripe.com/file-upload"
  }
}