{
  "content": "# Sources and customersDeprecated\n\n## Learn how to attach and manage sources with Customer objects.\n\n#### Warning\n\nWe deprecated the Sources API and plan to remove support for local payment\nmethods. If you currently handle any local payment methods using the Sources\nAPI, you must [migrate them to the Payment Methods\nAPI](https://docs.stripe.com/payments/payment-methods/transitioning).\n\nWhile we don’t plan to remove support for card payments, we recommend replacing\nany use of the Sources API with the [PaymentMethods\nAPI](https://docs.stripe.com/api/payment_methods), which provides access to our\nlatest features and payment method types.\n\nA [Source](https://docs.stripe.com/api#sources) object can be either [single-use\nor reusable](https://docs.stripe.com/sources#single-use-or-reusable), as\nindicated by its `usage` parameter. While sources can be charged directly,\n*reusable* sources should always be attached to a\n[Customer](https://docs.stripe.com/api#customers) object for later reuse.\nAttaching reusable sources to `Customer` objects allows you to present your\ncustomers with a list of reusable payment methods that they have previously used\nwith your app or website.\n\n## Reusable sources\n\nCertain payment methods (for example, [SEPA Direct\nDebit](https://docs.stripe.com/sources/sepa-debit)) support reusable sources, so\nthat you can create additional payments without your customer’s needing to\ncomplete the payment process again. A source that you can reuse has its `usage`\nparameter set to `reusable`.\n\nYou must [attach](https://docs.stripe.com/api#attach_source) a reusable source\nto a `Customer` object before making a charge request. If you charge a reusable\nsource without first attaching it, the source is consumed (its status changes\nfrom `chargeable` to `consumed`). Consumed sources cannot be used for further\npayments.\n\n### Attaching a source to a new Customer object\n\nYou can create a `Customer` object and attach a source in one API call. This is\nuseful if this is the first time you’re seeing this customer.\n\n```\ncurl https://api.stripe.com/v1/customers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n --data-urlencode email=\"paying.user@example.com\" \\\n -d source=src_18eYalAHEMiOZZp1l9ZTjSU0\n```\n\nThe source becomes the `Customer` object’s [default\nsource](https://docs.stripe.com/api#customer_object-default_source), since this\nis the customer’s first and only payment method. The default source is\nautomatically selected if you make a charge request using the `customer`\nparameter without specifying a `source`.\n\n### Attaching a Source to an existing Customer object\n\nWhen you [update](https://docs.stripe.com/api#update_customer) a `Customer`\nobject that has a default source, this automatically detaches the existing\nsource, and adds the provided source as the new default. To add a source without\nreplacing the existing default, use the\n[attach](https://docs.stripe.com/api#attach_source) method, as shown below.\n\n```\ncurl https://api.stripe.com/v1/customers/cus_AFGbOSiITuJVDs/sources \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d \"source\"=\"src_18eYalAHEMiOZZp1l9ZTjSU0\"\n```\n\nHere, because a default source might already exist for the `Customer` object,\nthe newly attached source does not become the default source. However, you can\nchange the default source by updating the `Customer` object and specifying the\nsource as a value for `default_source`.\n\n```\ncurl https://api.stripe.com/v1/customers/cus_AFGbOSiITuJVDs \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d default_source=src_18eYalAHEMiOZZp1l9ZTjSU0\n```\n\n### Charging an attached source\n\nYou must specify both the `Customer` object and the source when making a charge\nrequest.\n\n```\ncurl https://api.stripe.com/v1/charges \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d amount=\"1099\" \\\n -d currency=\"eur\" \\\n -d customer=cus_AFGbOSiITuJVDs \\\n -d source=src_18eYalAHEMiOZZp1l9ZTjSU0\n```\n\nIf you attempt to charge a `Customer` object without specifying a source, Stripe\nuses the customer’s default source.\n\n### Detaching a source\n\nIf you need to remove a source from a particular `Customer` object, you can\n[detach the source](https://docs.stripe.com/api#detach_source). Doing so changes\nthe source’s status to `consumed`, so it cannot be used once detached.\n\n## Single-use sources\n\nSingle-use sources must be created each time a customer makes a payment, and\ncannot be reused. For that reason, we do not recommend that you permanently\nattach them to customers.\n\nIf you want to associate a payment with a particular `Customer` object, you can\ninclude a `customer` parameter when making a charge request with a source, even\nif the source is not attached.\n\n```\ncurl https://api.stripe.com/v1/charges \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d amount=\"1099\" \\\n -d currency=\"eur\" \\\n -d customer=cus_AFGbOSiITuJVDs \\\n -d source=src_18eYalAHEMiOZZp1l9ZTjSU0\n```\n\nThe resulting `Charge` object references both the `Customer` and `Source`\nobjects, even if they’re not directly related to one another.\n\n## See also\n\n- [Supported payment methods on Sources](https://docs.stripe.com/sources)\n- [Best practices for using\nSources](https://docs.stripe.com/sources/best-practices)\n- [Cloning saved payment\nmethods](https://docs.stripe.com/connect/cloning-customers-across-accounts)\n- [Sources API reference](https://docs.stripe.com/api#sources)\n\n## Links\n\n- [migrate them to the Payment Methods\nAPI](https://docs.stripe.com/payments/payment-methods/transitioning)\n- [PaymentMethods API](https://docs.stripe.com/api/payment_methods)\n- [Source](https://docs.stripe.com/api#sources)\n- [single-use or\nreusable](https://docs.stripe.com/sources#single-use-or-reusable)\n- [Customer](https://docs.stripe.com/api#customers)\n- [SEPA Direct Debit](https://docs.stripe.com/sources/sepa-debit)\n- [attach](https://docs.stripe.com/api#attach_source)\n- [default source](https://docs.stripe.com/api#customer_object-default_source)\n- [update](https://docs.stripe.com/api#update_customer)\n- [detach the source](https://docs.stripe.com/api#detach_source)\n- [Supported payment methods on Sources](https://docs.stripe.com/sources)\n- [Best practices for using\nSources](https://docs.stripe.com/sources/best-practices)\n- [Cloning saved payment\nmethods](https://docs.stripe.com/connect/cloning-customers-across-accounts)",
  "metadata": {
    "title": "Sources and customers | Stripe Documentation",
    "description": "Learn how to attach and manage sources with Customer objects.",
    "sourceURL": "https://docs.stripe.com/sources/customers"
  }
}