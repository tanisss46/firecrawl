{
  "content": "# Save details for future payments with pre-authorized debit in Canada\n\n## Save payment method details for future Canadian pre-authorized debit payments.\n\nStripe-hosted pageAdvanced integration\nYou can use the [Setup Intents\nAPI](https://docs.stripe.com/payments/setup-intents) to collect payment method\ndetails in advance, with the final amount or payment date determined later. This\nis useful for:\n\n- Saving payment methods to a wallet to streamline future purchases\n- Collecting surcharges after fulfilling a service\n- Starting a free trial for a subscription\n\n#### Note\n\nPre-authorized debit in Canada is a **delayed notification payment method**,\nwhich means that funds are not immediately available after payment. A payment\ntypically takes **5 business days** to arrive in your account.\n\nMost bank accounts in Canada hold Canadian dollars (CAD), with a small number of\naccounts in other currencies, including US dollars (USD). It is possible to\naccept PAD payments in either CAD or USD, but choosing the correct currency for\nyour customer is important to avoid payment failures.\n\nUnlike many card-based payment methods, you might not be able to successfully\ndebit a CAD account in USD or debit a USD account in CAD. Most often, attempting\nto do so results in a delayed payment failure that takes up to five business\ndays.\n\nTo avoid these failures, it is safest to set up PAD bank accounts in CAD unless\nyou are confident your customer’s account accepts USD debits.\n\n[Set up\nStripeServer-side](https://docs.stripe.com/payments/acss-debit/set-up-payment#checkout-set-up-stripe)\nFirst, you need a Stripe account. [Register\nnow](https://dashboard.stripe.com/register).\n\nUse our official libraries for access to the Stripe API from your application:\n\n```\n# Available as a gem\nsudo gem install stripe\n```\n\n```\n# If you use bundler, you can add this line to your Gemfile\ngem 'stripe'\n```\n\n[Create or retrieve a\nCustomerServer-side](https://docs.stripe.com/payments/acss-debit/set-up-payment#checkout-create-customer)\nTo reuse a bank account for future payments, it must be attached to a\n[Customer](https://docs.stripe.com/api/customers).\n\nCreate a Customer object when your customer creates an account with your\nbusiness. Associating the ID of the Customer object with your own internal\nrepresentation of a customer lets you retrieve and use the stored payment method\ndetails later. If your customer hasn’t created an account, you can still create\na Customer object now and associate it with your internal representation of the\ncustomer’s account later.\n\nCreate a new Customer or retrieve an existing Customer to associate with these\npayment details. Include the following code on your server to create a new\nCustomer.\n\n```\ncurl -X POST https://api.stripe.com/v1/customers \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\"\n```\n\n[Set up future\npayments](https://docs.stripe.com/payments/acss-debit/set-up-payment#setup-a-payment)\n#### Note\n\nThis guide builds on the foundational [set up future\npayments](https://docs.stripe.com/payments/save-and-reuse) Checkout integration.\n\nUse this guide to learn how to enable Canadian Pre-Authorized Debits (PADs)—it\nshows the differences between setting up future payments for cards and using\nPADs.\n\n### Enable Canadian pre-authorized debit as a payment method\n\nWhen creating a new [Checkout\nSession](https://docs.stripe.com/api/checkout/sessions), you need to:\n\nPre-authorized debit in Canada\n\n- Add `acss_debit` to the list of `payment_method_types`.\n- Specify additional\n[payment_method_options](https://docs.stripe.com/api/setup_intents/create#create_setup_intent-payment_method_options-acss_debit)\nparameters to describe your transaction. Learn more below.\n\nPayments must specify a [payment\nschedule](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_method_options-acss_debit-mandate_options-payment_schedule)\nfor customers to authorize when checking out. See [PAD\nMandates](https://docs.stripe.com/payments/acss-debit#mandates) for details on\nhow to choose the right mandate options for your business:\n\nParameterValueRequired`payment_method_options[acss_debit][currency]`Currency to\nuse for future payments with this payment method. Must match the customer’s bank\naccount currency. Accepted values are `cad` or\n`usd`.Yes`payment_method_options[acss_debit][mandate_options][payment_schedule]`The\nmandate payment schedule. Accepted values are `interval`, `sporadic`, or\n`combined`. See the [PAD\nMandates](https://docs.stripe.com/payments/acss-debit#mandates) overview to help\nyou select the right schedule for your\nbusiness.Yes`payment_method_options[acss_debit][mandate_options][interval_description]`Text\ndescription of the payment schedule. See the [PAD\nMandates](https://docs.stripe.com/payments/acss-debit#mandates) overview to help\nyou construct the right interval description for your business.Required if\n`payment_schedule` value is `interval` or\n`combined``payment_method_options[acss_debit][mandate_options][transaction_type]`The\ntype of the mandate you’re creating, either `personal` (if your customer is an\nindividual) or `business` (if your customer is a business).Yes\n### Create a Checkout session\n\n```\nStripe::Checkout::Session.create({\n mode: 'setup',\n payment_method_types: ['card'],\n payment_method_types: ['acss_debit'],\n\n # or you can take multiple payment methods with\n # payment_method_types: ['card', 'acss_debit', ...]\n payment_method_options: {\n acss_debit: {\n currency: 'cad',\n mandate_options: {\n payment_schedule: 'interval',\n interval_description: 'First day of every month',\n transaction_type: 'personal',\n }\n }\n },\n customer: customer.id,\n success_url: 'https://example.com/success',\n cancel_url: 'https://example.com/cancel',\n})\n```\n\nDuring the Checkout session, the customer is presented with a UI modal that\nhandles bank account details collection and instant verification with an\noptional fallback to verification using microdeposits. If the customer opts for\nmicrodeposit verification, Stripe automatically sends two small deposits to the\nprovided bank account which take 1-2 business days to appear on the customer’s\nonline bank statement. When the deposits are expected to arrive, the customer\nreceives an email with a link to confirm these amounts and verify the bank\naccount with Stripe. After verification is completed, the payment method is\nready to be used for future payments.\n\n[Test your\nintegration](https://docs.stripe.com/payments/acss-debit/set-up-payment#checkout-test-integration)\n### Receive micro-deposit verification email\n\nIn order to receive the micro-deposit verification email in test mode after\ncollecting the bank account details and accepting a mandate, provide an email in\nthe `payment_method[billing_details][email]` field in the form of\n`{any_prefix}+test_email@{any_domain}` when confirming the payment method\ndetails.\n\n### Test account numbers\n\nStripe provides several test account numbers you can use to make sure your\nintegration for manually-entered bank accounts is ready for production. All test\naccounts that automatically succeed or fail the payment must be verified using\nthe test micro-deposit amounts below before they can be completed.\n\nInstitution NumberTransit NumberAccount\nNumberScenario`000``11000``000123456789`Succeeds the payment immediately after\nmicro-deposits are verified.`000``11000``900123456789`Succeeds the payment with\na three-minute delay after micro-deposits are\nverified.`000``11000``000222222227`Fails the payment immediately after\nmicro-deposits are verified.`000``11000``900222222227`Fails the payment with a\nthree-minute delay after micro-deposits are\nverified.`000``11000``000666666661`Fails to send verification\nmicro-deposits.`000``11000``000777777771`Fails the payment due to the payment\namount causing the account to exceed its weekly payment volume\nlimit.`000``11000``000888888881`Fails the payment due to the payment amount\nexceeding the account’s transaction limit.\nTo mimic successful or failed bank account verifications in test mode, use these\nmeaningful amounts for micro-deposits:\n\nMicro-deposit ValuesScenario`32` and `45`Successfully verifies the account.Any\nother number combinationsFails account verification.[Use the payment\nmethodServer-side](https://docs.stripe.com/payments/acss-debit/set-up-payment#use-the-payment-method)\nAfter completing the Checkout Session, you can\n[collect](https://docs.stripe.com/payments/checkout/save-and-reuse?payment-ui=stripe-hosted#retrieve-checkout-session)\nthe [PaymentMethod](https://docs.stripe.com/api/payment_methods) ID and a\n[Mandate](https://docs.stripe.com/api/mandates) ID. You can use these to\ninitiate future payments without having to prompt the customer for their bank\naccount a second time.\n\n#### Warning\n\nFuture pre-authorized debit payments must be charged according to the terms of\nthe existing mandate. Debiting at any time that doesn’t meet the terms of the\nmandate could be cause for a payment dispute.\n\nWhen you’re ready to charge your customer off-session, provide the\n`payment_method`, `customer`, and `mandate` IDs when [creating a\nPaymentIntent](https://docs.stripe.com/api/payment_intents/create).\n\n[OptionalInstant only\nverificationServer-side](https://docs.stripe.com/payments/acss-debit/set-up-payment#checkout-instant-only)[OptionalMicro-deposit\nonly\nverificationServer-side](https://docs.stripe.com/payments/acss-debit/set-up-payment#checkout-microdeposit-only)\n\n## Links\n\n- [Setup Intents API](https://docs.stripe.com/payments/setup-intents)\n- [Register now](https://dashboard.stripe.com/register)\n- [Customer](https://docs.stripe.com/api/customers)\n- [set up future payments](https://docs.stripe.com/payments/save-and-reuse)\n- [Checkout Session](https://docs.stripe.com/api/checkout/sessions)\n-\n[payment_method_options](https://docs.stripe.com/api/setup_intents/create#create_setup_intent-payment_method_options-acss_debit)\n- [payment\nschedule](https://docs.stripe.com/api/checkout/sessions/create#create_checkout_session-payment_method_options-acss_debit-mandate_options-payment_schedule)\n- [PAD Mandates](https://docs.stripe.com/payments/acss-debit#mandates)\n- [https://example.com/success](https://example.com/success)\n- [https://example.com/cancel](https://example.com/cancel)\n-\n[collect](https://docs.stripe.com/payments/checkout/save-and-reuse?payment-ui=stripe-hosted#retrieve-checkout-session)\n- [PaymentMethod](https://docs.stripe.com/api/payment_methods)\n- [Mandate](https://docs.stripe.com/api/mandates)\n- [creating a PaymentIntent](https://docs.stripe.com/api/payment_intents/create)",
  "metadata": {
    "title": "Save details for future payments with pre-authorized debit in Canada | Stripe Documentation",
    "description": "Save payment method details for future Canadian pre-authorized debit payments.",
    "sourceURL": "https://docs.stripe.com/payments/acss-debit/set-up-payment"
  }
}