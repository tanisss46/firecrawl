{
  "content": "# Create invoices with Connect\n\n## With Connect, you can create invoices for connected accounts, optionally taking fees in the process.\n\nYou can create [invoices](https://docs.stripe.com/api/invoices) for connected\naccounts, which support [several\napproaches](https://docs.stripe.com/connect/charges) for collecting payments.\nYou can use [direct charges](https://docs.stripe.com/connect/direct-charges) to\ncreate them directly on the connected account. Alternatively, you can create\ninvoices on the platform with transfers to the connected account by using\n[destination charges](https://docs.stripe.com/connect/destination-charges). You\ncan also take an application fee on these invoices.\n\n#### Note\n\nInvoice transactions are based on [Invoicing\npricing](https://stripe.com/invoicing/pricing).\n\n## Create an invoice using direct charges\n\nTo create an invoice that directly charges on a connected account, [create an\ninvoice](https://docs.stripe.com/api#create_invoice) while\n[authenticated](https://docs.stripe.com/connect/authentication#stripe-account-header)\nas the connected account. For this to work, the customer must be defined on the\nconnected account.\n\n```\ncurl https://api.stripe.com/v1/invoices \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d customer={{CUSTOMER_ID}} \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\"\n```\n\nAs with [creating a direct\ncharge](https://docs.stripe.com/connect/direct-charges#collect-fees) on a\nconnected account, you can create a customer on a connected account by using\neither the platform’s publishable key or the connected account’s publishable\nkey. You can also create a token by using [shared\ncustomers](https://docs.stripe.com/connect/cloning-customers-across-accounts).\nWhen you use direct charges, the connected account is responsible for the cost\nof the Stripe fees, refunds, and chargebacks.\n\n## Create an invoice using destination charges\n\nTo create an invoice that charges on the platform and creates automatic\ntransfers to a connected account, [create an\ninvoice](https://docs.stripe.com/api#create_invoice) while providing the\nconnected account ID as the `transfer_data[destination]`\n[value](https://docs.stripe.com/api/invoices/object#invoice_object-transfer_data).\n\n```\ncurl https://api.stripe.com/v1/invoices \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d customer={{CUSTOMER_ID}} \\\n -d \"transfer_data[destination]\"={{CONNECTED_ACCOUNT_ID}}\n```\n\nFor this to work, the customer must be defined on the platform account, and you\nmust create the connected account token by using the platform’s publishable key.\nIf charging a customer, the customer must exist within the platform account.\nWhen using automatic transfers, the platform is the business of record.\n\n## Display Connected Account Tax IDs and Business Details on your Invoices\n\nCertain regions have regulatory requirements for merchants to show their tax IDs\nand other business details on customer-facing documents.\n\nIn some cases, you can fulfill these requirements by displaying information\nabout a connected account instead of information about your platform. The\nfollowing steps show how to render a connected account’s tax ID and business\ndetails on invoice emails, invoice PDFs, Hosted Invoice Pages, and invoice\nreceipts:\n\n- Create tax IDs for your connected account.\n- Set default tax IDs for your connected account.\n- Specify the connected account either using the [on_behalf_of\nparameter](https://docs.stripe.com/connect/invoices#on-behalf-of) or as the\n`issuer` on existing or new invoices, subscriptions, and subscription schedules.\n\n### Create tax IDs for your connected account\n\nThe following example creates a single tax ID for the connected account. Stripe\nstores the tax ID on the connected account. To create additional tax IDs, call\nthe endpoint again.\n\n```\ncurl https://api.stripe.com/v1/tax_ids \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\" \\\n -d type=eu_vat \\\n -d value=DE123456789\n```\n\n### Set default tax IDs for your connected account\n\nStripe automatically pulls default tax IDs from the invoice `issuer`’s account\nduring finalization unless `account_tax_ids` is already set on the invoices.\n\nYou can set the tax IDs stored on the connected account as the default tax IDs\nfor that account. The following example sets existing tax IDs as default tax\nIDs:\n\n```\ncurl https://api.stripe.com/v1/accounts/{{CONNECTED_ACCOUNT_ID}} \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d \"settings[invoices][default_account_tax_ids][0]\"=atxi_123 \\\n -d \"settings[invoices][default_account_tax_ids][1]\"=atxi_456\n```\n\n### Set issuer on existing or new invoices, subscriptions, and subscription schedules as the connected account\n\nThe following example sets `issuer` on an existing subscription. During invoice\nfinalization, subscription invoices pull in the issuer’s default tax IDs:\n\n```\ncurl https://api.stripe.com/v1/subscriptions/{{SUBSCRIPTION_ID}} \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d \"invoice_settings[issuer][type]\"=account \\\n -d \"invoice_settings[issuer][account]\"={{CONNECTED_ACCOUNT_ID}}\n```\n\nThe following example sets `issuer` during invoice creation:\n\n```\ncurl https://api.stripe.com/v1/invoices \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d \"issuer[type]\"=account \\\n -d \"issuer[account]\"={{CONNECTED_ACCOUNT_ID}} \\\n -d \"transfer_data[destination]\"={{CONNECTED_ACCOUNT_ID}}\n```\n\nAlternatively, the `on_behalf_of` parameter also prints a connected account’s\ndetails on the invoice email, invoice PDF, Hosted Invoice Page, and invoice\nreceipt.\n\n### Set account tax IDs on existing or new invoices, subscriptions, and subscription schedules\n\nYou can specify `account_tax_ids` for invoices, subscriptions, and subscription\nschedules to override the default tax IDs. The following example sets\n`account_tax_ids` on an existing subscription:\n\n```\ncurl https://api.stripe.com/v1/subscriptions/{{SUBSCRIPTION_ID}} \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d \"invoice_settings[issuer][type]\"=account \\\n -d \"invoice_settings[issuer][account]\"={{CONNECTED_ACCOUNT_ID}} \\\n -d \"invoice_settings[account_tax_ids][0]\"=txi_123 \\\n -d \"invoice_settings[account_tax_ids][1]\"=txi_456\n```\n\nThe following example sets `account_tax_ids` during invoice creation:\n\n```\ncurl https://api.stripe.com/v1/invoices \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d customer={{CUSTOMER_ID}} \\\n -d \"issuer[type]\"=account \\\n -d \"issuer[account]\"={{CONNECTED_ACCOUNT_ID}} \\\n -d \"transfer_data[destination]\"={{CONNECTED_ACCOUNT_ID}} \\\n -d \"account_tax_ids[0]\"=txi_123 \\\n -d \"account_tax_ids[1]\"=txi_456\n```\n\n### Create tax IDs stored on the platform for your connected account\n\nThe tax ID you create is stored on the platform account instead of the connected\naccount. The following example creates a single tax ID for the connected account\nwithout using the `Stripe-Account` header:\n\n```\ncurl https://api.stripe.com/v1/tax_ids \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d type=eu_vat \\\n -d value=DE123456789 \\\n -d \"owner[type]\"=account \\\n -d \"owner[account]\"={{CONNECTED_ACCOUNT_ID}}\n```\n\n## Collect application fees\n\nOn the invoice, you can optionally withhold an application fee. The following\nexample shows an\n[application_fee_amount](https://docs.stripe.com/api/subscriptions/object#subscription_object-application_fee_percent)\nfor an invoice with a direct charge on the connected account:\n\n```\ncurl https://api.stripe.com/v1/invoices \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d customer={{CUSTOMER_ID}} \\\n -d application_fee_amount=\"10\" \\\n -H \"Stripe-Account: {{CONNECTED_ACCOUNT_ID}}\"\n```\n\nThis example shows an `application_fee_amount` for an invoice with a destination\ncharge:\n\n```\ncurl https://api.stripe.com/v1/invoices \\\n -u sk_test_BQokikJOvBiI2HlWgH4olfQ2: \\\n -d customer={{CUSTOMER_ID}} \\\n -d application_fee_amount=\"10\" \\\n -d \"transfer_data[destination]\"={{CONNECTED_ACCOUNT_ID}}\n```\n\n## Make the connected account the settlement merchant\n\nTo make the connected account the settlement merchant, charge the customer using\nthe `on_behalf_of` parameter when you create or update the invoice. You must set\n`on_behalf_of` in the API before finalizing an invoice—the Dashboard doesn’t\nhave an interface for invoices you send on behalf of connected accounts.\n\nSetting the `on_behalf_of` parameter applies the branding, contact information,\nand account tax ID of the connected account to the invoice email, invoice PDF,\nHosted Invoice Page, and invoice receipt. However, when you use `on_behalf_of`\nin test mode, emails aren’t sent—just like standard invoices sent via API. In\ntest mode, you can verify that Stripe created an invoice by checking the\n[Invoices page](https://dashboard.stripe.com/test/invoices) of the Dashboard.\n\nTo collect payments on behalf of the connected account, the connected account\nalso needs to have [account\ncapabilities](https://docs.stripe.com/connect/account-capabilities) enabled for\nthe relevant payment methods. You can automatically transfer payments for\ninvoices created on behalf of the connected account by using destination\ncharges. For more information about the `on_behalf_of​` parameter, refer to the\nrelevant Connect documentation:\n\n- For automatic transfers to the connected account, refer to the `on_behalf_of`\nparameter details in the [Create a\ncharge](https://docs.stripe.com/connect/charges#on_behalf_of) guide.\n- For information on how to transfer payments manually, refer to [Transfer\navailability](https://docs.stripe.com/connect/separate-charges-and-transfers#transfer-availability).\n- For a list of account capabilities that are required to collect payments on\nbehalf of the connected account, refer to [Payment method\ncapabilities](https://docs.stripe.com/connect/account-capabilities#payment-methods).\n\nThe following example shows how to use the `on_behalf_of` parameter for a new\ninvoice by using separate charges and transfers:\n\n```\ncurl https://api.stripe.com/v1/invoices \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d on_behalf_of={{CONNECTED_ACCOUNT_ID}} \\\n -d customer={{CUSTOMER_ID}}\n```\n\nAs with standard destination charges, ​​you can set an `application_fee_amount`\non invoices. This example shows how to use `on_behalf_of` with a destination\ncharge and application fee.\n\n```\ncurl https://api.stripe.com/v1/invoices \\\n -u \"sk_test_BQokikJOvBiI2HlWgH4olfQ2:\" \\\n -d on_behalf_of={{CONNECTED_ACCOUNT_ID}} \\\n -d application_fee_amount=10 \\\n -d \"transfer_data[destination]\"={{CONNECTED_ACCOUNT_ID}} \\\n -d customer={{CUSTOMER_ID}}\n```\n\nInvoices created on behalf of a connected account ​​don’t support bank transfers\npayment methods, such as ACH Credit Transfer and paper checks.\n\n## Integrate tax calculation and collection\n\nYou need to first determine which entity is liable for tax. The entity that’s\nliable for tax might be your connected account or the platform, depending on\nyour business model. To learn more, see [Stripe Tax with\nConnect](https://docs.stripe.com/tax/connect).\n\n## See also\n\n- [Create charges](https://docs.stripe.com/connect/charges)\n- [Share customers across\naccounts](https://docs.stripe.com/connect/cloning-customers-across-accounts)\n- [Multiple currencies](https://docs.stripe.com/connect/currencies)\n\n## Links\n\n- [Connect](https://docs.stripe.com/connect)\n- [invoices](https://docs.stripe.com/api/invoices)\n- [several approaches](https://docs.stripe.com/connect/charges)\n- [direct charges](https://docs.stripe.com/connect/direct-charges)\n- [destination charges](https://docs.stripe.com/connect/destination-charges)\n- [Invoicing pricing](https://stripe.com/invoicing/pricing)\n- [create an invoice](https://docs.stripe.com/api#create_invoice)\n-\n[authenticated](https://docs.stripe.com/connect/authentication#stripe-account-header)\n- [creating a direct\ncharge](https://docs.stripe.com/connect/direct-charges#collect-fees)\n- [shared\ncustomers](https://docs.stripe.com/connect/cloning-customers-across-accounts)\n-\n[value](https://docs.stripe.com/api/invoices/object#invoice_object-transfer_data)\n-\n[application_fee_amount](https://docs.stripe.com/api/subscriptions/object#subscription_object-application_fee_percent)\n- [Invoices page](https://dashboard.stripe.com/test/invoices)\n- [account capabilities](https://docs.stripe.com/connect/account-capabilities)\n- [Create a charge](https://docs.stripe.com/connect/charges#on_behalf_of)\n- [Transfer\navailability](https://docs.stripe.com/connect/separate-charges-and-transfers#transfer-availability)\n- [Payment method\ncapabilities](https://docs.stripe.com/connect/account-capabilities#payment-methods)\n- [Stripe Tax with Connect](https://docs.stripe.com/tax/connect)\n- [Multiple currencies](https://docs.stripe.com/connect/currencies)",
  "metadata": {
    "title": "Create invoices with Connect | Stripe Documentation",
    "description": "With Connect, you can create invoices for connected accounts, optionally taking fees in the process.",
    "sourceURL": "https://docs.stripe.com/connect/invoices"
  }
}